function primusProvider(){function primusService($rootScope,$q){var primus=new Primus(this.endpoint,this.options),resourceDefers={};return primus.$on=function(event,listener){function applyListener(){var args=arguments;$rootScope.$apply(function(){listener.apply(null,args)})}return primus.on(event,applyListener),function(){primus.removeListener(event,applyListener)}},primus.$resource=function(name,multiplex){if(multiplex="undefined"==typeof multiplex?provider.multiplex:multiplex,resourceDefers[name])return resourceDefers[name].promise;resourceDefers[name]=$q.defer();var resource=primus.resource(name,multiplex);return resource.once("ready",function(){resourceDefers[name].resolve(resource),$rootScope.$apply()}),resourceDefers[name].promise},primus}var provider=this;this.$get=["$rootScope","$q",primusService],this.setOptions=function(options){return this.options=options,this},this.setEndpoint=function(endpoint){return this.endpoint=endpoint,this},this.setDefaultMultiplex=function(multiplex){return this.multiplex=multiplex,this}}window.ionic={controllers:{},views:{}},function(ionic){function B1(t){return t*t*t}function B2(t){return 3*t*t*(1-t)}function B3(t){return 3*t*(1-t)*(1-t)}function B4(t){return(1-t)*(1-t)*(1-t)}var bezierCoord=function(x,y){if(!x)var x=0;if(!y)var y=0;return{x:x,y:y}};ionic.Animator={getQuadraticBezier:function(percent,C1,C2,C3,C4){var pos=new bezierCoord;return pos.x=C1.x*B1(percent)+C2.x*B2(percent)+C3.x*B3(percent)+C4.x*B4(percent),pos.y=C1.y*B1(percent)+C2.y*B2(percent)+C3.y*B3(percent)+C4.y*B4(percent),pos},getCubicBezier:function(x1,y1,x2,y2,duration){epsilon=1e3/60/duration/4;var curveX=function(t){var v=1-t;return 3*v*v*t*x1+3*v*t*t*x2+t*t*t},curveY=function(t){var v=1-t;return 3*v*v*t*y1+3*v*t*t*y2+t*t*t},derivativeCurveX=function(t){var v=1-t;return 3*(2*(t-1)*t+v*v)*x1+3*(-t*t*t+2*v*t)*x2};return function(t){var t0,t1,t2,x2,d2,i,x=t;for(t2=x,i=0;8>i;i++){if(x2=curveX(t2)-x,Math.abs(x2)<epsilon)return curveY(t2);if(d2=derivativeCurveX(t2),Math.abs(d2)<1e-6)break;t2-=x2/d2}if(t0=0,t1=1,t2=x,t0>t2)return curveY(t0);if(t2>t1)return curveY(t1);for(;t1>t0;){if(x2=curveX(t2),Math.abs(x2-x)<epsilon)return curveY(t2);x>x2?t0=t2:t1=t2,t2=.5*(t1-t0)+t0}return curveY(t2)}},animate:function(element){return{leave:function(){var endFunc=function(){element.classList.remove("leave"),element.classList.remove("leave-active"),element.removeEventListener("webkitTransitionEnd",endFunc),element.removeEventListener("transitionEnd",endFunc)};return element.addEventListener("webkitTransitionEnd",endFunc),element.addEventListener("transitionEnd",endFunc),element.classList.add("leave"),element.classList.add("leave-active"),this},enter:function(){var endFunc=function(){element.classList.remove("enter"),element.classList.remove("enter-active"),element.removeEventListener("webkitTransitionEnd",endFunc),element.removeEventListener("transitionEnd",endFunc)};return element.addEventListener("webkitTransitionEnd",endFunc),element.addEventListener("transitionEnd",endFunc),element.classList.add("enter"),element.classList.add("enter-active"),this}}}}}(ionic),function(ionic){ionic.DomUtil={getTextBounds:function(textNode){if(document.createRange){var range=document.createRange();if(range.selectNodeContents(textNode),range.getBoundingClientRect){var rect=range.getBoundingClientRect(),sx=window.scrollX,sy=window.scrollY;return{top:rect.top+sy,left:rect.left+sx,right:rect.left+sx+rect.width,bottom:rect.top+sy+rect.height,width:rect.width,height:rect.height}}}return null},getChildIndex:function(element,type){if(type)for(var c,ch=element.parentNode.children,i=0,k=0,j=ch.length;j>i;i++)if(c=ch[i],c.nodeName&&c.nodeName.toLowerCase()==type){if(c==element)return k;k++}return Array.prototype.slice.call(element.parentNode.children).indexOf(element)},swapNodes:function(src,dest){dest.parentNode.insertBefore(src,dest)},getParentWithClass:function(e,className){for(;e.parentNode;){if(e.parentNode.classList&&e.parentNode.classList.contains(className))return e.parentNode;e=e.parentNode}return null},getParentOrSelfWithClass:function(e,className){for(;e;){if(e.classList&&e.classList.contains(className))return e;e=e.parentNode}return null}}}(window.ionic),function(ionic){window.CustomEvent||!function(){var CustomEvent;CustomEvent=function(event,params){var evt;return params=params||{bubbles:!1,cancelable:!1,detail:void 0},evt=document.createEvent("CustomEvent"),evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt},CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}(),ionic.EventController={VIRTUALIZED_EVENTS:["tap","swipe","swiperight","swipeleft","drag","hold","release"],trigger:function(eventType,data){var event=new CustomEvent(eventType,{detail:data});data&&data.target&&data.target.dispatchEvent(event)||window.dispatchEvent(event)},on:function(type,callback,element){for(var e=element||window,i=0,j=this.VIRTUALIZED_EVENTS.length;j>i;i++)if(type==this.VIRTUALIZED_EVENTS[i]){var gesture=new ionic.Gesture(element);return gesture.on(type,callback),gesture}e.addEventListener(type,callback)},off:function(type,callback,element){element.removeEventListener(type,callback)},onGesture:function(type,callback,element){var gesture=new ionic.Gesture(element);return gesture.on(type,callback),gesture},offGesture:function(gesture,type,callback){gesture.off(type,callback)},handlePopState:function(){}},ionic.on=function(){ionic.EventController.on.apply(ionic.EventController,arguments)},ionic.off=function(){ionic.EventController.off.apply(ionic.EventController,arguments)},ionic.trigger=function(){ionic.EventController.trigger.apply(ionic.EventController.trigger,arguments)},ionic.onGesture=function(){return ionic.EventController.onGesture.apply(ionic.EventController.onGesture,arguments)},ionic.offGesture=function(){return ionic.EventController.offGesture.apply(ionic.EventController.offGesture,arguments)}}(window.ionic),function(ionic){function setup(){if(!ionic.Gestures.READY){ionic.Gestures.event.determineEventTypes();for(var name in ionic.Gestures.gestures)ionic.Gestures.gestures.hasOwnProperty(name)&&ionic.Gestures.detection.register(ionic.Gestures.gestures[name]);ionic.Gestures.event.onTouch(ionic.Gestures.DOCUMENT,ionic.Gestures.EVENT_MOVE,ionic.Gestures.detection.detect),ionic.Gestures.event.onTouch(ionic.Gestures.DOCUMENT,ionic.Gestures.EVENT_END,ionic.Gestures.detection.detect),ionic.Gestures.READY=!0}}ionic.Gesture=function(element,options){return new ionic.Gestures.Instance(element,options||{})},ionic.Gestures={},ionic.Gestures.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ionic.Gestures.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ionic.Gestures.HAS_TOUCHEVENTS="ontouchstart"in window,ionic.Gestures.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,ionic.Gestures.NO_MOUSEEVENTS=ionic.Gestures.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(ionic.Gestures.MOBILE_REGEX),ionic.Gestures.EVENT_TYPES={},ionic.Gestures.DIRECTION_DOWN="down",ionic.Gestures.DIRECTION_LEFT="left",ionic.Gestures.DIRECTION_UP="up",ionic.Gestures.DIRECTION_RIGHT="right",ionic.Gestures.POINTER_MOUSE="mouse",ionic.Gestures.POINTER_TOUCH="touch",ionic.Gestures.POINTER_PEN="pen",ionic.Gestures.EVENT_START="start",ionic.Gestures.EVENT_MOVE="move",ionic.Gestures.EVENT_END="end",ionic.Gestures.DOCUMENT=window.document,ionic.Gestures.plugins={},ionic.Gestures.READY=!1,ionic.Gestures.Instance=function(element,options){var self=this;return null===element?void console.error("Null element passed to gesture (element does not exist). Not listening for gesture"):(setup(),this.element=element,this.enabled=!0,this.options=ionic.Gestures.utils.extend(ionic.Gestures.utils.extend({},ionic.Gestures.defaults),options||{}),this.options.stop_browser_behavior&&ionic.Gestures.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),ionic.Gestures.event.onTouch(element,ionic.Gestures.EVENT_START,function(ev){self.enabled&&ionic.Gestures.detection.startDetect(self,ev)}),this)},ionic.Gestures.Instance.prototype={on:function(gesture,handler){for(var gestures=gesture.split(" "),t=0;t<gestures.length;t++)this.element.addEventListener(gestures[t],handler,!1);return this},off:function(gesture,handler){for(var gestures=gesture.split(" "),t=0;t<gestures.length;t++)this.element.removeEventListener(gestures[t],handler,!1);return this},trigger:function(gesture,eventData){var event=ionic.Gestures.DOCUMENT.createEvent("Event");event.initEvent(gesture,!0,!0),event.gesture=eventData;var element=this.element;return ionic.Gestures.utils.hasParent(eventData.target,element)&&(element=eventData.target),element.dispatchEvent(event),this},enable:function(state){return this.enabled=state,this}};var last_move_event=null,enable_detect=!1,touch_triggered=!1;ionic.Gestures.event={bindDom:function(element,type,handler){for(var types=type.split(" "),t=0;t<types.length;t++)element.addEventListener(types[t],handler,!1)},onTouch:function(element,eventType,handler){var self=this;this.bindDom(element,ionic.Gestures.EVENT_TYPES[eventType],function(ev){var sourceEventType=ev.type.toLowerCase();if(!sourceEventType.match(/mouse/)||!touch_triggered){sourceEventType.match(/touch/)||sourceEventType.match(/pointerdown/)||sourceEventType.match(/mouse/)&&1===ev.which?enable_detect=!0:sourceEventType.match(/mouse/)&&1!==ev.which&&(enable_detect=!1),sourceEventType.match(/touch|pointer/)&&(touch_triggered=!0);var count_touches=0;enable_detect&&(ionic.Gestures.HAS_POINTEREVENTS&&eventType!=ionic.Gestures.EVENT_END?count_touches=ionic.Gestures.PointerEvent.updatePointer(eventType,ev):sourceEventType.match(/touch/)?count_touches=ev.touches.length:touch_triggered||(count_touches=sourceEventType.match(/up/)?0:1),count_touches>0&&eventType==ionic.Gestures.EVENT_END?eventType=ionic.Gestures.EVENT_MOVE:count_touches||(eventType=ionic.Gestures.EVENT_END),(count_touches||null===last_move_event)&&(last_move_event=ev),handler.call(ionic.Gestures.detection,self.collectEventData(element,eventType,self.getTouchList(last_move_event,eventType),ev)),ionic.Gestures.HAS_POINTEREVENTS&&eventType==ionic.Gestures.EVENT_END&&(count_touches=ionic.Gestures.PointerEvent.updatePointer(eventType,ev))),count_touches||(last_move_event=null,enable_detect=!1,touch_triggered=!1,ionic.Gestures.PointerEvent.reset())}})},determineEventTypes:function(){var types;types=ionic.Gestures.HAS_POINTEREVENTS?ionic.Gestures.PointerEvent.getEvents():ionic.Gestures.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_START]=types[0],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_MOVE]=types[1],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_END]=types[2]},getTouchList:function(ev){return ionic.Gestures.HAS_POINTEREVENTS?ionic.Gestures.PointerEvent.getTouchList():ev.touches?ev.touches:(ev.indentifier=1,[ev])},collectEventData:function(element,eventType,touches,ev){var pointerType=ionic.Gestures.POINTER_TOUCH;return(ev.type.match(/mouse/)||ionic.Gestures.PointerEvent.matchType(ionic.Gestures.POINTER_MOUSE,ev))&&(pointerType=ionic.Gestures.POINTER_MOUSE),{center:ionic.Gestures.utils.getCenter(touches),timeStamp:(new Date).getTime(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return ionic.Gestures.detection.stopDetect()}}}},ionic.Gestures.PointerEvent={pointers:{},getTouchList:function(){var self=this,touchlist=[];return Object.keys(self.pointers).sort().forEach(function(id){touchlist.push(self.pointers[id])}),touchlist},updatePointer:function(type,pointerEvent){return type==ionic.Gestures.EVENT_END?this.pointers={}:(pointerEvent.identifier=pointerEvent.pointerId,this.pointers[pointerEvent.pointerId]=pointerEvent),Object.keys(this.pointers).length},matchType:function(pointerType,ev){if(!ev.pointerType)return!1;var types={};return types[ionic.Gestures.POINTER_MOUSE]=ev.pointerType==ev.MSPOINTER_TYPE_MOUSE||ev.pointerType==ionic.Gestures.POINTER_MOUSE,types[ionic.Gestures.POINTER_TOUCH]=ev.pointerType==ev.MSPOINTER_TYPE_TOUCH||ev.pointerType==ionic.Gestures.POINTER_TOUCH,types[ionic.Gestures.POINTER_PEN]=ev.pointerType==ev.MSPOINTER_TYPE_PEN||ev.pointerType==ionic.Gestures.POINTER_PEN,types[pointerType]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},ionic.Gestures.utils={extend:function(dest,src,merge){for(var key in src)void 0!==dest[key]&&merge||(dest[key]=src[key]);return dest},hasParent:function(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1},getCenter:function(touches){for(var valuesX=[],valuesY=[],t=0,len=touches.length;len>t;t++)valuesX.push(touches[t].pageX),valuesY.push(touches[t].pageY);return{pageX:(Math.min.apply(Math,valuesX)+Math.max.apply(Math,valuesX))/2,pageY:(Math.min.apply(Math,valuesY)+Math.max.apply(Math,valuesY))/2}},getVelocity:function(delta_time,delta_x,delta_y){return{x:Math.abs(delta_x/delta_time)||0,y:Math.abs(delta_y/delta_time)||0}},getAngle:function(touch1,touch2){var y=touch2.pageY-touch1.pageY,x=touch2.pageX-touch1.pageX;return 180*Math.atan2(y,x)/Math.PI},getDirection:function(touch1,touch2){var x=Math.abs(touch1.pageX-touch2.pageX),y=Math.abs(touch1.pageY-touch2.pageY);return x>=y?touch1.pageX-touch2.pageX>0?ionic.Gestures.DIRECTION_LEFT:ionic.Gestures.DIRECTION_RIGHT:touch1.pageY-touch2.pageY>0?ionic.Gestures.DIRECTION_UP:ionic.Gestures.DIRECTION_DOWN},getDistance:function(touch1,touch2){var x=touch2.pageX-touch1.pageX,y=touch2.pageY-touch1.pageY;return Math.sqrt(x*x+y*y)},getScale:function(start,end){return start.length>=2&&end.length>=2?this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]):1},getRotation:function(start,end){return start.length>=2&&end.length>=2?this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0]):0},isVertical:function(direction){return direction==ionic.Gestures.DIRECTION_UP||direction==ionic.Gestures.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(element,css_props){var prop,vendors=["webkit","khtml","moz","Moz","ms","o",""];if(css_props&&element.style){for(var i=0;i<vendors.length;i++)for(var p in css_props)css_props.hasOwnProperty(p)&&(prop=p,vendors[i]&&(prop=vendors[i]+prop.substring(0,1).toUpperCase()+prop.substring(1)),element.style[prop]=css_props[p]);"none"==css_props.userSelect&&(element.onselectstart=function(){return!1})}}},ionic.Gestures.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(inst,eventData){this.current||(this.stopped=!1,this.current={inst:inst,startEvent:ionic.Gestures.utils.extend({},eventData),lastEvent:!1,name:""},this.detect(eventData))},detect:function(eventData){if(this.current&&!this.stopped){eventData=this.extendEventData(eventData);for(var inst_options=this.current.inst.options,g=0,len=this.gestures.length;len>g;g++){var gesture=this.gestures[g];if(!this.stopped&&inst_options[gesture.name]!==!1&&gesture.handler.call(gesture,eventData,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=eventData),eventData.eventType==ionic.Gestures.EVENT_END&&!eventData.touches.length-1&&this.stopDetect(),eventData}},stopDetect:function(){this.previous=ionic.Gestures.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(ev){var startEv=this.current.startEvent;if(startEv&&(ev.touches.length!=startEv.touches.length||ev.touches===startEv.touches)){startEv.touches=[];for(var i=0,len=ev.touches.length;len>i;i++)startEv.touches.push(ionic.Gestures.utils.extend({},ev.touches[i]))}var delta_time=ev.timeStamp-startEv.timeStamp,delta_x=ev.center.pageX-startEv.center.pageX,delta_y=ev.center.pageY-startEv.center.pageY,velocity=ionic.Gestures.utils.getVelocity(delta_time,delta_x,delta_y);return ionic.Gestures.utils.extend(ev,{deltaTime:delta_time,deltaX:delta_x,deltaY:delta_y,velocityX:velocity.x,velocityY:velocity.y,distance:ionic.Gestures.utils.getDistance(startEv.center,ev.center),angle:ionic.Gestures.utils.getAngle(startEv.center,ev.center),direction:ionic.Gestures.utils.getDirection(startEv.center,ev.center),scale:ionic.Gestures.utils.getScale(startEv.touches,ev.touches),rotation:ionic.Gestures.utils.getRotation(startEv.touches,ev.touches),startEvent:startEv}),ev},register:function(gesture){var options=gesture.defaults||{};return void 0===options[gesture.name]&&(options[gesture.name]=!0),ionic.Gestures.utils.extend(ionic.Gestures.defaults,options,!0),gesture.index=gesture.index||1e3,this.gestures.push(gesture),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},ionic.Gestures.gestures=ionic.Gestures.gestures||{},ionic.Gestures.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(ev,inst){switch(ev.eventType){case ionic.Gestures.EVENT_START:clearTimeout(this.timer),ionic.Gestures.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==ionic.Gestures.detection.current.name&&inst.trigger("hold",ev)},inst.options.hold_timeout);break;case ionic.Gestures.EVENT_MOVE:ev.distance>inst.options.hold_threshold&&clearTimeout(this.timer);break;case ionic.Gestures.EVENT_END:clearTimeout(this.timer)}}},ionic.Gestures.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(ev,inst){if(ev.eventType==ionic.Gestures.EVENT_END){var prev=ionic.Gestures.detection.previous,did_doubletap=!1;if(ev.deltaTime>inst.options.tap_max_touchtime||ev.distance>inst.options.tap_max_distance)return;prev&&"tap"==prev.name&&ev.timeStamp-prev.lastEvent.timeStamp<inst.options.doubletap_interval&&ev.distance<inst.options.doubletap_distance&&(inst.trigger("doubletap",ev),did_doubletap=!0),(!did_doubletap||inst.options.tap_always)&&(ionic.Gestures.detection.current.name="tap",inst.trigger(ionic.Gestures.detection.current.name,ev))}}},ionic.Gestures.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(ev,inst){if(ev.eventType==ionic.Gestures.EVENT_END){if(inst.options.swipe_max_touches>0&&ev.touches.length>inst.options.swipe_max_touches)return;(ev.velocityX>inst.options.swipe_velocity||ev.velocityY>inst.options.swipe_velocity)&&(inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev))}}},ionic.Gestures.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(ev,inst){if(ionic.Gestures.detection.current.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(inst.options.drag_max_touches>0&&ev.touches.length>inst.options.drag_max_touches))switch(ev.eventType){case ionic.Gestures.EVENT_START:this.triggered=!1;break;case ionic.Gestures.EVENT_MOVE:if(ev.distance<inst.options.drag_min_distance&&ionic.Gestures.detection.current.name!=this.name)return;if(ionic.Gestures.detection.current.name!=this.name&&(ionic.Gestures.detection.current.name=this.name,inst.options.correct_for_drag_min_distance)){var factor=Math.abs(inst.options.drag_min_distance/ev.distance);ionic.Gestures.detection.current.startEvent.center.pageX+=ev.deltaX*factor,ionic.Gestures.detection.current.startEvent.center.pageY+=ev.deltaY*factor,ev=ionic.Gestures.detection.extendEventData(ev)}(ionic.Gestures.detection.current.lastEvent.drag_locked_to_axis||inst.options.drag_lock_to_axis&&inst.options.drag_lock_min_distance<=ev.distance)&&(ev.drag_locked_to_axis=!0);var last_direction=ionic.Gestures.detection.current.lastEvent.direction;ev.drag_locked_to_axis&&last_direction!==ev.direction&&(ev.direction=ionic.Gestures.utils.isVertical(last_direction)?ev.deltaY<0?ionic.Gestures.DIRECTION_UP:ionic.Gestures.DIRECTION_DOWN:ev.deltaX<0?ionic.Gestures.DIRECTION_LEFT:ionic.Gestures.DIRECTION_RIGHT),this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev),(inst.options.drag_block_vertical&&ionic.Gestures.utils.isVertical(ev.direction)||inst.options.drag_block_horizontal&&!ionic.Gestures.utils.isVertical(ev.direction))&&ev.preventDefault();break;case ionic.Gestures.EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}},ionic.Gestures.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(ev,inst){if(ionic.Gestures.detection.current.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(ev.touches.length<2))switch(inst.options.transform_always_block&&ev.preventDefault(),ev.eventType){case ionic.Gestures.EVENT_START:this.triggered=!1;break;case ionic.Gestures.EVENT_MOVE:var scale_threshold=Math.abs(1-ev.scale),rotation_threshold=Math.abs(ev.rotation);if(scale_threshold<inst.options.transform_min_scale&&rotation_threshold<inst.options.transform_min_rotation)return;ionic.Gestures.detection.current.name=this.name,this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),rotation_threshold>inst.options.transform_min_rotation&&inst.trigger("rotate",ev),scale_threshold>inst.options.transform_min_scale&&(inst.trigger("pinch",ev),inst.trigger("pinch"+(ev.scale<1?"in":"out"),ev));break;case ionic.Gestures.EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}},ionic.Gestures.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(ev,inst){return inst.options.prevent_mouseevents&&ev.pointerType==ionic.Gestures.POINTER_MOUSE?void ev.stopDetect():(inst.options.prevent_default&&ev.preventDefault(),void(ev.eventType==ionic.Gestures.EVENT_START&&inst.trigger(this.name,ev)))}},ionic.Gestures.gestures.Release={name:"release",index:1/0,handler:function(ev,inst){ev.eventType==ionic.Gestures.EVENT_END&&inst.trigger(this.name,ev)}}}(window.ionic),function(ionic){ionic.Platform={detect:function(){var platforms=[];this._checkPlatforms(platforms);for(var i=0;i<platforms.length;i++)document.body.classList.add("platform-"+platforms[i])},_checkPlatforms:function(platforms){this.isCordova()&&platforms.push("cordova"),this.isIOS7()&&platforms.push("ios7")},isCordova:function(){return window.cordova||window.PhoneGap||window.phonegap},isIOS7:function(){return window.device?parseFloat(window.device.version)>=7:!1}},ionic.Platform.detect()}(window.ionic),function(window,document,ionic){"use strict";function inputTapPolyfill(ele,e){return"radio"===ele.type||"checkbox"===ele.type||("submit"===ele.type||"button"===ele.type?ionic.trigger("click",{target:ele}):ele.focus()),e.stopPropagation(),e.preventDefault(),!1}function tapPolyfill(e){if(e.gesture&&"touch"===e.gesture.pointerType&&e.gesture.srcEvent&&!e.alreadyHandled){e=e.gesture.srcEvent;for(var ele=e.target;ele;){if("INPUT"===ele.tagName||"TEXTAREA"===ele.tagName||"SELECT"===ele.tagName)return inputTapPolyfill(ele,e);if("LABEL"===ele.tagName){if(ele.control)return inputTapPolyfill(ele.control,e)}else if("A"===ele.tagName||"BUTTON"===ele.tagName)return ionic.trigger("click",{target:ele}),e.stopPropagation(),e.preventDefault(),!1;ele=ele.parentElement}var activeElement=document.activeElement;return!activeElement||"INPUT"!==activeElement.tagName&&"TEXTAREA"!==activeElement.tagName&&"SELECT"!==activeElement.tagName?void 0:(activeElement.blur(),e.stopPropagation(),e.preventDefault(),!1)}}window.rAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}(),ionic.CSS={},function(){for(var d=document.createElement("div"),keys=["webkitTransform","transform","-webkit-transform","webkit-transform","-moz-transform","moz-transform","MozTransform","mozTransform"],i=0;i<keys.length;i++)if(void 0!==d.style[keys[i]]){ionic.CSS.TRANSFORM=keys[i];break}}(),ionic.on("tap",tapPolyfill,window)}(this,document,ionic),function(ionic){ionic.Utils={arrayMove:function(arr,old_index,new_index){if(new_index>=arr.length)for(var k=new_index-arr.length;k--+1;)arr.push(void 0);return arr.splice(new_index,0,arr.splice(old_index,1)[0]),arr},proxy:function(func,context){var args=Array.prototype.slice.call(arguments,2);return function(){return func.apply(context,args.concat(Array.prototype.slice.call(arguments)))}},debounce:function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:Date.now(),timeout=null,result=func.apply(context,args)};return function(){var now=Date.now();previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},inherit:function(protoProps,staticProps){var child,parent=this;child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},ionic.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&ionic.extend(child.prototype,protoProps),child.__super__=parent.prototype,child},extend:function(obj){for(var args=Array.prototype.slice.call(arguments,1),i=0;i<args.length;i++){var source=args[i];if(source)for(var prop in source)obj[prop]=source[prop]}return obj}},ionic.inherit=ionic.Utils.inherit,ionic.extend=ionic.Utils.extend,ionic.throttle=ionic.Utils.throttle,ionic.proxy=ionic.Utils.proxy,ionic.debounce=ionic.Utils.debounce}(window.ionic),function(ionic){"use strict";ionic.views.View=function(){this.initialize.apply(this,arguments)},ionic.views.View.inherit=ionic.inherit,ionic.extend(ionic.views.View.prototype,{initialize:function(){}})}(window.ionic),function(global){var time=Date.now||function(){return+new Date},desiredFrames=60,millisecondsPerSecond=1e3,running={},counter=1;global.core?core.effect||(core.effect={}):global.core={effect:{}},core.effect.Animate={requestAnimationFrame:function(){var requestFrame=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||global.oRequestAnimationFrame,isNative=!!requestFrame;if(requestFrame&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(requestFrame.toString())&&(isNative=!1),isNative)return function(callback,root){requestFrame(callback,root)};var TARGET_FPS=60,requests={},requestCount=0,rafHandle=1,intervalHandle=null,lastActive=+new Date;return function(callback){var callbackHandle=rafHandle++;return requests[callbackHandle]=callback,requestCount++,null===intervalHandle&&(intervalHandle=setInterval(function(){var time=+new Date,currentRequests=requests;requests={},requestCount=0;for(var key in currentRequests)currentRequests.hasOwnProperty(key)&&(currentRequests[key](time),lastActive=time);time-lastActive>2500&&(clearInterval(intervalHandle),intervalHandle=null)},1e3/TARGET_FPS)),callbackHandle}}(),stop:function(id){var cleared=null!=running[id];return cleared&&(running[id]=null),cleared},isRunning:function(id){return null!=running[id]},start:function(stepCallback,verifyCallback,completedCallback,duration,easingMethod,root){var start=time(),lastFrame=start,percent=0,dropCounter=0,id=counter++;if(root||(root=document.body),id%20===0){var newRunning={};for(var usedId in running)newRunning[usedId]=!0;running=newRunning}var step=function(virtual){var render=virtual!==!0,now=time();if(!running[id]||verifyCallback&&!verifyCallback(id))return running[id]=null,void(completedCallback&&completedCallback(desiredFrames-dropCounter/((now-start)/millisecondsPerSecond),id,!1));if(render)for(var droppedFrames=Math.round((now-lastFrame)/(millisecondsPerSecond/desiredFrames))-1,j=0;j<Math.min(droppedFrames,4);j++)step(!0),dropCounter++;duration&&(percent=(now-start)/duration,percent>1&&(percent=1));var value=easingMethod?easingMethod(percent):percent;stepCallback(value,now,render)!==!1&&1!==percent||!render?render&&(lastFrame=now,core.effect.Animate.requestAnimationFrame(step,root)):(running[id]=null,completedCallback&&completedCallback(desiredFrames-dropCounter/((now-start)/millisecondsPerSecond),id,1===percent||null==duration))};return running[id]=!0,core.effect.Animate.requestAnimationFrame(step,root),id}}}(this);var Scroller;!function(ionic){var NOOP=function(){},easeOutCubic=function(pos){return Math.pow(pos-1,3)+1},easeInOutCubic=function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)};ionic.views.Scroll=ionic.views.View.inherit({initialize:function(options){this.__container=options.el,this.__content=options.el.firstElementChild,this.options={scrollingX:!1,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:NOOP,penetrationDeceleration:.03,penetrationAcceleration:.08};for(var key in options)this.options[key]=options[key];this.__callback=this.getRenderFn(),this.__initEventHandlers(),this.resize()},__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,__initEventHandlers:function(){var self=this,container=this.__container;if("ontouchstart"in window)container.addEventListener("touchstart",function(e){e.target.tagName.match(/input|textarea|select/i)||(self.doTouchStart(e.touches,e.timeStamp),e.preventDefault())},!1),document.addEventListener("touchmove",function(e){e.defaultPrevented||self.doTouchMove(e.touches,e.timeStamp)},!1),document.addEventListener("touchend",function(e){self.doTouchEnd(e.timeStamp)},!1);else{var mousedown=!1;container.addEventListener("mousedown",function(e){e.target.tagName.match(/input|textarea|select/i)||(self.doTouchStart([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),mousedown=!0)},!1),document.addEventListener("mousemove",function(e){mousedown&&!e.defaultPrevented&&(self.doTouchMove([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),mousedown=!0)},!1),document.addEventListener("mouseup",function(e){mousedown&&(self.doTouchEnd(e.timeStamp),mousedown=!1)
},!1)}},resize:function(){this.setDimensions(Math.min(this.__container.clientWidth,this.__container.parentElement.clientWidth),Math.min(this.__container.clientHeight,this.__container.parentElement.clientHeight),this.__content.offsetWidth,this.__content.offsetHeight+20)},getRenderFn:function(){var engine,content=this.__content,docStyle=document.documentElement.style;"MozAppearance"in docStyle?engine="gecko":"WebkitAppearance"in docStyle?engine="webkit":"string"==typeof navigator.cpuClass&&(engine="trident");var undef,vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[engine],helperElem=document.createElement("div"),perspectiveProperty=vendorPrefix+"Perspective",transformProperty=vendorPrefix+"Transform";return helperElem.style[perspectiveProperty]!==undef?function(left,top,zoom){content.style[transformProperty]="translate3d("+-left+"px,"+-top+"px,0) scale("+zoom+")"}:helperElem.style[transformProperty]!==undef?function(left,top,zoom){content.style[transformProperty]="translate("+-left+"px,"+-top+"px) scale("+zoom+")"}:function(left,top,zoom){content.style.marginLeft=left?-left/zoom+"px":"",content.style.marginTop=top?-top/zoom+"px":"",content.style.zoom=zoom||""}},setDimensions:function(clientWidth,clientHeight,contentWidth,contentHeight){var self=this;clientWidth===+clientWidth&&(self.__clientWidth=clientWidth),clientHeight===+clientHeight&&(self.__clientHeight=clientHeight),contentWidth===+contentWidth&&(self.__contentWidth=contentWidth),contentHeight===+contentHeight&&(self.__contentHeight=contentHeight),self.__computeScrollMax(),self.scrollTo(self.__scrollLeft,self.__scrollTop,!0)},setPosition:function(left,top){var self=this;self.__clientLeft=left||0,self.__clientTop=top||0},setSnapSize:function(width,height){var self=this;self.__snapWidth=width,self.__snapHeight=height},activatePullToRefresh:function(height,activateCallback,deactivateCallback,startCallback){var self=this;self.__refreshHeight=height,self.__refreshActivate=activateCallback,self.__refreshDeactivate=deactivateCallback,self.__refreshStart=startCallback},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var self=this;self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate(),self.scrollTo(self.__scrollLeft,self.__scrollTop,!0)},getValues:function(){var self=this;return{left:self.__scrollLeft,top:self.__scrollTop,zoom:self.__zoomLevel}},getScrollMax:function(){var self=this;return{left:self.__maxScrollLeft,top:self.__maxScrollTop}},zoomTo:function(level,animate,originLeft,originTop){var self=this;if(!self.options.zooming)throw new Error("Zooming is not enabled!");self.__isDecelerating&&(core.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1);var oldLevel=self.__zoomLevel;null==originLeft&&(originLeft=self.__clientWidth/2),null==originTop&&(originTop=self.__clientHeight/2),level=Math.max(Math.min(level,self.options.maxZoom),self.options.minZoom),self.__computeScrollMax(level);var left=(originLeft+self.__scrollLeft)*level/oldLevel-originLeft,top=(originTop+self.__scrollTop)*level/oldLevel-originTop;left>self.__maxScrollLeft?left=self.__maxScrollLeft:0>left&&(left=0),top>self.__maxScrollTop?top=self.__maxScrollTop:0>top&&(top=0),self.__publish(left,top,level,animate)},zoomBy:function(factor,animate,originLeft,originTop){var self=this;self.zoomTo(self.__zoomLevel*factor,animate,originLeft,originTop)},scrollTo:function(left,top,animate,zoom){var self=this;if(self.__isDecelerating&&(core.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1),null!=zoom&&zoom!==self.__zoomLevel){if(!self.options.zooming)throw new Error("Zooming is not enabled!");left*=zoom,top*=zoom,self.__computeScrollMax(zoom)}else zoom=self.__zoomLevel;self.options.scrollingX?self.options.paging?left=Math.round(left/self.__clientWidth)*self.__clientWidth:self.options.snapping&&(left=Math.round(left/self.__snapWidth)*self.__snapWidth):left=self.__scrollLeft,self.options.scrollingY?self.options.paging?top=Math.round(top/self.__clientHeight)*self.__clientHeight:self.options.snapping&&(top=Math.round(top/self.__snapHeight)*self.__snapHeight):top=self.__scrollTop,left=Math.max(Math.min(self.__maxScrollLeft,left),0),top=Math.max(Math.min(self.__maxScrollTop,top),0),left===self.__scrollLeft&&top===self.__scrollTop&&(animate=!1),self.__publish(left,top,zoom,animate)},scrollBy:function(left,top,animate){var self=this,startLeft=self.__isAnimating?self.__scheduledLeft:self.__scrollLeft,startTop=self.__isAnimating?self.__scheduledTop:self.__scrollTop;self.scrollTo(startLeft+(left||0),startTop+(top||0),animate)},doMouseZoom:function(wheelDelta,timeStamp,pageX,pageY){var self=this,change=wheelDelta>0?.97:1.03;return self.zoomTo(self.__zoomLevel*change,!1,pageX-self.__clientLeft,pageY-self.__clientTop)},doTouchStart:function(touches,timeStamp){if(null==touches.length)throw new Error("Invalid touch list: "+touches);if(timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp)throw new Error("Invalid timestamp value: "+timeStamp);var self=this;self.__interruptedAnimation=!0,self.__isDecelerating&&(core.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1,self.__interruptedAnimation=!0),self.__isAnimating&&(core.effect.Animate.stop(self.__isAnimating),self.__isAnimating=!1,self.__interruptedAnimation=!0);var currentTouchLeft,currentTouchTop,isSingleTouch=1===touches.length;isSingleTouch?(currentTouchLeft=touches[0].pageX,currentTouchTop=touches[0].pageY):(currentTouchLeft=Math.abs(touches[0].pageX+touches[1].pageX)/2,currentTouchTop=Math.abs(touches[0].pageY+touches[1].pageY)/2),self.__initialTouchLeft=currentTouchLeft,self.__initialTouchTop=currentTouchTop,self.__zoomLevelStart=self.__zoomLevel,self.__lastTouchLeft=currentTouchLeft,self.__lastTouchTop=currentTouchTop,self.__lastTouchMove=timeStamp,self.__lastScale=1,self.__enableScrollX=!isSingleTouch&&self.options.scrollingX,self.__enableScrollY=!isSingleTouch&&self.options.scrollingY,self.__isTracking=!0,self.__didDecelerationComplete=!1,self.__isDragging=!isSingleTouch,self.__isSingleTouch=isSingleTouch,self.__positions=[]},doTouchMove:function(touches,timeStamp,scale){if(null==touches.length)throw new Error("Invalid touch list: "+touches);if(timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp)throw new Error("Invalid timestamp value: "+timeStamp);var self=this;if(self.__isTracking){var currentTouchLeft,currentTouchTop;2===touches.length?(currentTouchLeft=Math.abs(touches[0].pageX+touches[1].pageX)/2,currentTouchTop=Math.abs(touches[0].pageY+touches[1].pageY)/2):(currentTouchLeft=touches[0].pageX,currentTouchTop=touches[0].pageY);var positions=self.__positions;if(self.__isDragging){var moveX=currentTouchLeft-self.__lastTouchLeft,moveY=currentTouchTop-self.__lastTouchTop,scrollLeft=self.__scrollLeft,scrollTop=self.__scrollTop,level=self.__zoomLevel;if(null!=scale&&self.options.zooming){var oldLevel=level;if(level=level/self.__lastScale*scale,level=Math.max(Math.min(level,self.options.maxZoom),self.options.minZoom),oldLevel!==level){var currentTouchLeftRel=currentTouchLeft-self.__clientLeft,currentTouchTopRel=currentTouchTop-self.__clientTop;scrollLeft=(currentTouchLeftRel+scrollLeft)*level/oldLevel-currentTouchLeftRel,scrollTop=(currentTouchTopRel+scrollTop)*level/oldLevel-currentTouchTopRel,self.__computeScrollMax(level)}}if(self.__enableScrollX){scrollLeft-=moveX*this.options.speedMultiplier;var maxScrollLeft=self.__maxScrollLeft;(scrollLeft>maxScrollLeft||0>scrollLeft)&&(self.options.bouncing?scrollLeft+=moveX/2*this.options.speedMultiplier:scrollLeft=scrollLeft>maxScrollLeft?maxScrollLeft:0)}if(self.__enableScrollY){scrollTop-=moveY*this.options.speedMultiplier;var maxScrollTop=self.__maxScrollTop;(scrollTop>maxScrollTop||0>scrollTop)&&(self.options.bouncing?(scrollTop+=moveY/2*this.options.speedMultiplier,self.__enableScrollX||null==self.__refreshHeight||(!self.__refreshActive&&scrollTop<=-self.__refreshHeight?(self.__refreshActive=!0,self.__refreshActivate&&self.__refreshActivate()):self.__refreshActive&&scrollTop>-self.__refreshHeight&&(self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate()))):scrollTop=scrollTop>maxScrollTop?maxScrollTop:0)}positions.length>60&&positions.splice(0,30),positions.push(scrollLeft,scrollTop,timeStamp),self.__publish(scrollLeft,scrollTop,level)}else{var minimumTrackingForScroll=self.options.locking?3:0,minimumTrackingForDrag=5,distanceX=Math.abs(currentTouchLeft-self.__initialTouchLeft),distanceY=Math.abs(currentTouchTop-self.__initialTouchTop);self.__enableScrollX=self.options.scrollingX&&distanceX>=minimumTrackingForScroll,self.__enableScrollY=self.options.scrollingY&&distanceY>=minimumTrackingForScroll,positions.push(self.__scrollLeft,self.__scrollTop,timeStamp),self.__isDragging=(self.__enableScrollX||self.__enableScrollY)&&(distanceX>=minimumTrackingForDrag||distanceY>=minimumTrackingForDrag),self.__isDragging&&(self.__interruptedAnimation=!1)}self.__lastTouchLeft=currentTouchLeft,self.__lastTouchTop=currentTouchTop,self.__lastTouchMove=timeStamp,self.__lastScale=scale}},doTouchEnd:function(timeStamp){if(timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp)throw new Error("Invalid timestamp value: "+timeStamp);var self=this;if(self.__isTracking){if(self.__isTracking=!1,self.__isDragging)if(self.__isDragging=!1,self.__isSingleTouch&&self.options.animating&&timeStamp-self.__lastTouchMove<=100){for(var positions=self.__positions,endPos=positions.length-1,startPos=endPos,i=endPos;i>0&&positions[i]>self.__lastTouchMove-100;i-=3)startPos=i;if(startPos!==endPos){var timeOffset=positions[endPos]-positions[startPos],movedLeft=self.__scrollLeft-positions[startPos-2],movedTop=self.__scrollTop-positions[startPos-1];self.__decelerationVelocityX=movedLeft/timeOffset*(1e3/60),self.__decelerationVelocityY=movedTop/timeOffset*(1e3/60);var minVelocityToStartDeceleration=self.options.paging||self.options.snapping?4:1;(Math.abs(self.__decelerationVelocityX)>minVelocityToStartDeceleration||Math.abs(self.__decelerationVelocityY)>minVelocityToStartDeceleration)&&(self.__refreshActive||self.__startDeceleration(timeStamp))}else self.options.scrollingComplete()}else timeStamp-self.__lastTouchMove>100&&self.options.scrollingComplete();self.__isDecelerating||(self.__refreshActive&&self.__refreshStart?(self.__publish(self.__scrollLeft,-self.__refreshHeight,self.__zoomLevel,!0),self.__refreshStart&&self.__refreshStart()):((self.__interruptedAnimation||self.__isDragging)&&self.options.scrollingComplete(),self.scrollTo(self.__scrollLeft,self.__scrollTop,!0,self.__zoomLevel),self.__refreshActive&&(self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate()))),self.__positions.length=0}},__publish:function(left,top,zoom,animate){var self=this,wasAnimating=self.__isAnimating;if(wasAnimating&&(core.effect.Animate.stop(wasAnimating),self.__isAnimating=!1),animate&&self.options.animating){self.__scheduledLeft=left,self.__scheduledTop=top,self.__scheduledZoom=zoom;var oldLeft=self.__scrollLeft,oldTop=self.__scrollTop,oldZoom=self.__zoomLevel,diffLeft=left-oldLeft,diffTop=top-oldTop,diffZoom=zoom-oldZoom,step=function(percent,now,render){render&&(self.__scrollLeft=oldLeft+diffLeft*percent,self.__scrollTop=oldTop+diffTop*percent,self.__zoomLevel=oldZoom+diffZoom*percent,self.__callback&&self.__callback(self.__scrollLeft,self.__scrollTop,self.__zoomLevel))},verify=function(id){return self.__isAnimating===id},completed=function(renderedFramesPerSecond,animationId,wasFinished){animationId===self.__isAnimating&&(self.__isAnimating=!1),(self.__didDecelerationComplete||wasFinished)&&self.options.scrollingComplete(),self.options.zooming&&self.__computeScrollMax()};self.__isAnimating=core.effect.Animate.start(step,verify,completed,self.options.animationDuration,wasAnimating?easeOutCubic:easeInOutCubic)}else self.__scheduledLeft=self.__scrollLeft=left,self.__scheduledTop=self.__scrollTop=top,self.__scheduledZoom=self.__zoomLevel=zoom,self.__callback&&self.__callback(left,top,zoom),self.options.zooming&&self.__computeScrollMax()},__computeScrollMax:function(zoomLevel){var self=this;null==zoomLevel&&(zoomLevel=self.__zoomLevel),self.__maxScrollLeft=Math.max(self.__contentWidth*zoomLevel-self.__clientWidth,0),self.__maxScrollTop=Math.max(self.__contentHeight*zoomLevel-self.__clientHeight,0)},__startDeceleration:function(){var self=this;if(self.options.paging){var scrollLeft=Math.max(Math.min(self.__scrollLeft,self.__maxScrollLeft),0),scrollTop=Math.max(Math.min(self.__scrollTop,self.__maxScrollTop),0),clientWidth=self.__clientWidth,clientHeight=self.__clientHeight;self.__minDecelerationScrollLeft=Math.floor(scrollLeft/clientWidth)*clientWidth,self.__minDecelerationScrollTop=Math.floor(scrollTop/clientHeight)*clientHeight,self.__maxDecelerationScrollLeft=Math.ceil(scrollLeft/clientWidth)*clientWidth,self.__maxDecelerationScrollTop=Math.ceil(scrollTop/clientHeight)*clientHeight}else self.__minDecelerationScrollLeft=0,self.__minDecelerationScrollTop=0,self.__maxDecelerationScrollLeft=self.__maxScrollLeft,self.__maxDecelerationScrollTop=self.__maxScrollTop;var step=function(percent,now,render){self.__stepThroughDeceleration(render)},minVelocityToKeepDecelerating=self.options.snapping?4:.1,verify=function(){var shouldContinue=Math.abs(self.__decelerationVelocityX)>=minVelocityToKeepDecelerating||Math.abs(self.__decelerationVelocityY)>=minVelocityToKeepDecelerating;return shouldContinue||(self.__didDecelerationComplete=!0),shouldContinue},completed=function(){self.__isDecelerating=!1,self.__didDecelerationComplete&&self.options.scrollingComplete(),self.scrollTo(self.__scrollLeft,self.__scrollTop,self.options.snapping)};self.__isDecelerating=core.effect.Animate.start(step,verify,completed)},__stepThroughDeceleration:function(render){var self=this,scrollLeft=self.__scrollLeft+self.__decelerationVelocityX,scrollTop=self.__scrollTop+self.__decelerationVelocityY;if(!self.options.bouncing){var scrollLeftFixed=Math.max(Math.min(self.__maxDecelerationScrollLeft,scrollLeft),self.__minDecelerationScrollLeft);scrollLeftFixed!==scrollLeft&&(scrollLeft=scrollLeftFixed,self.__decelerationVelocityX=0);var scrollTopFixed=Math.max(Math.min(self.__maxDecelerationScrollTop,scrollTop),self.__minDecelerationScrollTop);scrollTopFixed!==scrollTop&&(scrollTop=scrollTopFixed,self.__decelerationVelocityY=0)}if(render?self.__publish(scrollLeft,scrollTop,self.__zoomLevel):(self.__scrollLeft=scrollLeft,self.__scrollTop=scrollTop),!self.options.paging){var frictionFactor=.95;self.__decelerationVelocityX*=frictionFactor,self.__decelerationVelocityY*=frictionFactor}if(self.options.bouncing){var scrollOutsideX=0,scrollOutsideY=0,penetrationDeceleration=self.options.penetrationDeceleration,penetrationAcceleration=self.options.penetrationAcceleration;scrollLeft<self.__minDecelerationScrollLeft?scrollOutsideX=self.__minDecelerationScrollLeft-scrollLeft:scrollLeft>self.__maxDecelerationScrollLeft&&(scrollOutsideX=self.__maxDecelerationScrollLeft-scrollLeft),scrollTop<self.__minDecelerationScrollTop?scrollOutsideY=self.__minDecelerationScrollTop-scrollTop:scrollTop>self.__maxDecelerationScrollTop&&(scrollOutsideY=self.__maxDecelerationScrollTop-scrollTop),0!==scrollOutsideX&&(scrollOutsideX*self.__decelerationVelocityX<=0?self.__decelerationVelocityX+=scrollOutsideX*penetrationDeceleration:self.__decelerationVelocityX=scrollOutsideX*penetrationAcceleration),0!==scrollOutsideY&&(scrollOutsideY*self.__decelerationVelocityY<=0?self.__decelerationVelocityY+=scrollOutsideY*penetrationDeceleration:self.__decelerationVelocityY=scrollOutsideY*penetrationAcceleration)}}})}(ionic),function(ionic){"use strict";ionic.views.ActionSheet=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el},show:function(){this.el.offsetWidth,this.el.classList.add("active")},hide:function(){this.el.offsetWidth,this.el.classList.remove("active")}})}(ionic),function(ionic){"use strict";ionic.views.HeaderBar=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,ionic.extend(this,{alignTitle:"center"},opts),this.align()},align:function(){window.rAF(ionic.proxy(function(){var i,c,childSize,childNodes=this.el.childNodes,title=this.el.querySelector(".title");if(title){var leftWidth=0,rightWidth=0,titlePos=Array.prototype.indexOf.call(childNodes,title);for(i=0;titlePos>i;i++)childSize=null,c=childNodes[i],3==c.nodeType?childSize=ionic.DomUtil.getTextBounds(c):1==c.nodeType&&(childSize=c.getBoundingClientRect()),childSize&&(leftWidth+=childSize.width);for(i=titlePos+1;i<childNodes.length;i++)childSize=null,c=childNodes[i],3==c.nodeType?childSize=ionic.DomUtil.getTextBounds(c):1==c.nodeType&&(childSize=c.getBoundingClientRect()),childSize&&(rightWidth+=childSize.width);var margin=Math.max(leftWidth,rightWidth)+10;"center"==this.alignTitle?(margin>10&&(title.style.left=margin+"px",title.style.right=margin+"px"),title.offsetWidth<title.scrollWidth&&rightWidth>0&&(title.style.right=rightWidth+5+"px")):"left"==this.alignTitle?(title.classList.add("title-left"),leftWidth>0&&(title.style.left=leftWidth+15+"px")):"right"==this.alignTitle&&(title.classList.add("title-right"),rightWidth>0&&(title.style.right=rightWidth+15+"px"))}},this))}})}(ionic),function(ionic){"use strict";var ITEM_CLASS="item",ITEM_CONTENT_CLASS="item-content",ITEM_SLIDING_CLASS="item-sliding",ITEM_OPTIONS_CLASS="item-options",ITEM_PLACEHOLDER_CLASS="item-placeholder",ITEM_REORDERING_CLASS="item-reordering",ITEM_DRAG_CLASS="item-drag",DragOp=function(){};DragOp.prototype={start:function(){},drag:function(){},end:function(){}};var SlideDrag=function(opts){this.dragThresholdX=opts.dragThresholdX||10,this.el=opts.el};SlideDrag.prototype=new DragOp,SlideDrag.prototype.start=function(e){var content,buttons,offsetX,buttonsWidth;e.target.classList.contains(ITEM_CONTENT_CLASS)?content=e.target:e.target.classList.contains(ITEM_CLASS)&&(content=e.target.querySelector("."+ITEM_CONTENT_CLASS)),content&&(content.classList.remove(ITEM_SLIDING_CLASS),offsetX=parseFloat(content.style.webkitTransform.replace("translate3d(","").split(",")[0])||0,buttons=content.parentNode.querySelector("."+ITEM_OPTIONS_CLASS),buttons&&(buttonsWidth=buttons.offsetWidth,this._currentDrag={buttonsWidth:buttonsWidth,content:content,startOffsetX:offsetX}))},SlideDrag.prototype.drag=function(e){var buttonsWidth,_this=this;window.rAF(function(){if(_this._currentDrag&&(!_this._isDragging&&(Math.abs(e.gesture.deltaX)>_this.dragThresholdX||Math.abs(_this._currentDrag.startOffsetX)>0)&&(_this._isDragging=!0),_this._isDragging)){buttonsWidth=_this._currentDrag.buttonsWidth;var newX=Math.min(0,_this._currentDrag.startOffsetX+e.gesture.deltaX);-buttonsWidth>newX&&(newX=Math.min(-buttonsWidth,-buttonsWidth+.4*(e.gesture.deltaX+buttonsWidth))),_this._currentDrag.content.style.webkitTransform="translate3d("+newX+"px, 0, 0)"}})},SlideDrag.prototype.end=function(e,doneCallback){var _this=this;if(!this._currentDrag)return void(doneCallback&&doneCallback());var restingPoint=-this._currentDrag.buttonsWidth;e.gesture.deltaX>-(this._currentDrag.buttonsWidth/2)&&("left"==e.gesture.direction&&Math.abs(e.gesture.velocityX)<.3?restingPoint=0:"right"==e.gesture.direction&&(restingPoint=0));var content=this._currentDrag.content,onRestingAnimationEnd=function(e){"-webkit-transform"==e.propertyName&&content.classList.remove(ITEM_SLIDING_CLASS),e.target.removeEventListener("webkitTransitionEnd",onRestingAnimationEnd)};window.rAF(function(){var currentX=parseFloat(_this._currentDrag.content.style.webkitTransform.replace("translate3d(","").split(",")[0])||0;currentX!==restingPoint&&(_this._currentDrag.content.classList.add(ITEM_SLIDING_CLASS),_this._currentDrag.content.addEventListener("webkitTransitionEnd",onRestingAnimationEnd)),_this._currentDrag.content.style.webkitTransform="translate3d("+restingPoint+"px, 0, 0)",_this._currentDrag=null,doneCallback&&doneCallback()})};var ReorderDrag=function(opts){this.dragThresholdY=opts.dragThresholdY||0,this.onReorder=opts.onReorder,this.el=opts.el};ReorderDrag.prototype=new DragOp,ReorderDrag.prototype.start=function(){var offsetY=this.el.offsetTop,startIndex=ionic.DomUtil.getChildIndex(this.el,this.el.nodeName.toLowerCase()),placeholder=this.el.cloneNode(!0);placeholder.classList.add(ITEM_PLACEHOLDER_CLASS),this.el.parentNode.insertBefore(placeholder,this.el),this.el.classList.add(ITEM_REORDERING_CLASS),this._currentDrag={startOffsetTop:offsetY,startIndex:startIndex,placeholder:placeholder}},ReorderDrag.prototype.drag=function(e){var _this=this;window.rAF(function(){if(_this._currentDrag&&(!_this._isDragging&&Math.abs(e.gesture.deltaY)>_this.dragThresholdY&&(_this._isDragging=!0),_this._isDragging)){var newY=_this._currentDrag.startOffsetTop+e.gesture.deltaY;_this.el.style.top=newY+"px",_this._currentDrag.currentY=newY,_this._reorderItems()}})},ReorderDrag.prototype._reorderItems=function(){var siblings=(this._currentDrag.placeholder,Array.prototype.slice.call(this._currentDrag.placeholder.parentNode.children));siblings.splice(siblings.indexOf(this.el),1);var index=siblings.indexOf(this._currentDrag.placeholder),topSibling=siblings[Math.max(0,index-1)],bottomSibling=siblings[Math.min(siblings.length,index+1)],thisOffsetTop=this._currentDrag.currentY;return topSibling&&thisOffsetTop<topSibling.offsetTop+topSibling.offsetHeight/2?(ionic.DomUtil.swapNodes(this._currentDrag.placeholder,topSibling),index-1):bottomSibling&&thisOffsetTop>bottomSibling.offsetTop+bottomSibling.offsetHeight/2?(ionic.DomUtil.swapNodes(bottomSibling,this._currentDrag.placeholder),index+1):void 0},ReorderDrag.prototype.end=function(e,doneCallback){if(!this._currentDrag)return void(doneCallback&&doneCallback());var placeholder=this._currentDrag.placeholder;this.el.classList.remove(ITEM_REORDERING_CLASS),this.el.style.top=0;var finalPosition=ionic.DomUtil.getChildIndex(placeholder,placeholder.nodeName.toLowerCase());placeholder.parentNode.insertBefore(this.el,placeholder),placeholder.parentNode.removeChild(placeholder),this.onReorder&&this.onReorder(this.el,this._currentDrag.startIndex,finalPosition),this._currentDrag=null,doneCallback&&doneCallback()},ionic.views.ListView=ionic.views.View.inherit({initialize:function(opts){var _this=this;opts=ionic.extend({onReorder:function(){},virtualRemoveThreshold:-200,virtualAddThreshold:200},opts),ionic.extend(this,opts),!this.itemHeight&&this.listEl&&(this.itemHeight=this.listEl.children[0]&&parseInt(this.listEl.children[0].style.height,10)),this.onRefresh=opts.onRefresh||function(){},this.onRefreshOpening=opts.onRefreshOpening||function(){},this.onRefreshHolding=opts.onRefreshHolding||function(){},window.ionic.onGesture("touch",function(e){_this._handleTouch(e)},this.el),window.ionic.onGesture("release",function(e){_this._handleTouchRelease(e)},this.el),this._initDrag()},stopRefreshing:function(){var refresher=this.el.querySelector(".list-refresher");refresher.style.height="0px"},didScroll:function(e){if(this.isVirtual){var itemHeight=this.itemHeight,scrollHeight=(this.listEl.children.length,e.target.scrollHeight),viewportHeight=this.el.parentNode.offsetHeight,highWater=(e.scrollTop,Math.max(0,e.scrollTop+this.virtualRemoveThreshold)),lowWater=Math.min(scrollHeight,Math.abs(e.scrollTop)+viewportHeight+this.virtualAddThreshold),itemsPerViewport=Math.floor((lowWater-highWater)/itemHeight),first=parseInt(Math.abs(highWater/itemHeight),10),last=parseInt(Math.abs(lowWater/itemHeight),10);this._virtualItemsToRemove=Array.prototype.slice.call(this.listEl.children,0,first);{Array.prototype.slice.call(this.listEl.children,first,first+itemsPerViewport)}this.renderViewport&&this.renderViewport(highWater,lowWater,first,last)}},didStopScrolling:function(){if(this.isVirtual)for(var i=0;i<this._virtualItemsToRemove.length;i++){{this._virtualItemsToRemove[i]}this.didHideItem&&this.didHideItem(i)}},_initDrag:function(){this._dragOp=null},_getItem:function(target){for(;target;){if(target.classList.contains(ITEM_CLASS))return target;target=target.parentNode}return null},_startDrag:function(e){var _this=this;if(this._isDragging=!1,!ionic.DomUtil.getParentOrSelfWithClass(e.target,ITEM_DRAG_CLASS)||"up"!=e.gesture.direction&&"down"!=e.gesture.direction){if(("left"==e.gesture.direction||"right"==e.gesture.direction)&&Math.abs(e.gesture.deltaX)>5)return this._dragOp=new SlideDrag({el:this.el}),this._dragOp.start(e),void e.preventDefault()}else{var item=this._getItem(e.target);if(item)return this._dragOp=new ReorderDrag({el:item,onReorder:function(el,start,end){_this.onReorder&&_this.onReorder(el,start,end)}}),this._dragOp.start(e),void e.preventDefault()}},_handleEndDrag:function(e){var _this=this;this._dragOp&&this._dragOp.end(e,function(){_this._initDrag()})},_handleDrag:function(e){(Math.abs(e.gesture.deltaX)>10||Math.abs(e.gesture.deltaY)>10)&&clearTimeout(this._touchTimeout),clearTimeout(this._touchTimeout),this.isDragging||this._dragOp||this._startDrag(e),this._dragOp&&(e.preventDefault(),this._dragOp.drag(e))},_handleTouch:function(e){var _this=this,item=ionic.DomUtil.getParentOrSelfWithClass(e.target,ITEM_CLASS);item&&(this._touchTimeout=setTimeout(function(){for(var items=_this.el.querySelectorAll(".item"),i=0,l=items.length;l>i;i++)items[i].classList.remove("active");item.classList.add("active")},250))},_handleTouchRelease:function(){var _this=this;clearTimeout(this._touchTimeout);for(var items=_this.el.querySelectorAll(".item"),i=0,l=items.length;l>i;i++)items[i].classList.remove("active")}})}(ionic),function(ionic){"use strict";ionic.views.Loading=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,this.maxWidth=opts.maxWidth||200,this._loadingBox=this.el.querySelector(".loading")},show:function(){var _this=this;if(this._loadingBox){var lb=_this._loadingBox,width=Math.min(_this.maxWidth,Math.max(window.outerWidth-40,lb.offsetWidth));lb.style.width=width,lb.style.marginLeft=-lb.offsetWidth/2+"px",lb.style.marginTop=-lb.offsetHeight/2+"px",_this.el.classList.add("active")}},hide:function(){this.el.offsetWidth,this.el.classList.remove("active")}})}(ionic),function(ionic){"use strict";ionic.views.Modal=ionic.views.View.inherit({initialize:function(opts){opts=ionic.extend({focusFirstInput:!1,unfocusOnHide:!0},opts),ionic.extend(this,opts),this.el=opts.el},show:function(){if(this.el.classList.add("active"),this.focusFirstInput){var input=this.el.querySelector("input, textarea");input&&input.focus&&input.focus()}},hide:function(){if(this.el.classList.remove("active"),this.unfocusOnHide)for(var inputs=this.el.querySelectorAll("input, textarea"),i=0;i<inputs.length;i++)inputs[i].blur&&inputs[i].blur()}})}(ionic),function(ionic){"use strict";ionic.views.NavBar=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,this._titleEl=this.el.querySelector(".title"),opts.hidden&&this.hide()},hide:function(){this.el.classList.add("hidden")},show:function(){this.el.classList.remove("hidden")},shouldGoBack:function(){},setTitle:function(title){this._titleEl&&(this._titleEl.innerHTML=title)},showBackButton:function(shouldShow){var _this=this;if(!this._currentBackButton){var back=document.createElement("a");back.className="button back",back.innerHTML="Back",this._currentBackButton=back,this._currentBackButton.onclick=function(){_this.shouldGoBack&&_this.shouldGoBack()}}shouldShow&&!this._currentBackButton.parentNode?this.el.insertBefore(this._currentBackButton,this.el.firstChild):!shouldShow&&this._currentBackButton.parentNode&&this._currentBackButton.parentNode.removeChild(this._currentBackButton)}})}(ionic),function(ionic){"use strict";ionic.views.Popup=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el},setTitle:function(title){var titleEl=el.querySelector(".popup-title");titleEl&&(titleEl.innerHTML=title)},alert:function(message){var _this=this;window.rAF(function(){_this.setTitle(message),_this.el.classList.add("active")})},hide:function(){this.el.offsetWidth,this.el.classList.remove("active")}})}(ionic),function(ionic){"use strict";ionic.views.SideMenu=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,this.width=opts.width,this.isEnabled=opts.isEnabled||!0},getFullWidth:function(){return this.width},setIsEnabled:function(isEnabled){this.isEnabled=isEnabled},bringUp:function(){this.el.style.zIndex=0},pushDown:function(){this.el.style.zIndex=-1}}),ionic.views.SideMenuContent=ionic.views.View.inherit({initialize:function(opts){ionic.extend(this,{animationClass:"menu-animated",onDrag:function(){},onEndDrag:function(){}},opts),ionic.onGesture("drag",ionic.proxy(this._onDrag,this),this.el),ionic.onGesture("release",ionic.proxy(this._onEndDrag,this),this.el)},_onDrag:function(e){this.onDrag&&this.onDrag(e)},_onEndDrag:function(e){this.onEndDrag&&this.onEndDrag(e)},disableAnimation:function(){this.el.classList.remove(this.animationClass)},enableAnimation:function(){this.el.classList.add(this.animationClass)},getTranslateX:function(){return parseFloat(this.el.style.webkitTransform.replace("translate3d(","").split(",")[0])},setTranslateX:function(x){this.el.style.webkitTransform="translate3d("+x+"px, 0, 0)"}})}(ionic),function(ionic){"use strict";ionic.views.SlideBox=ionic.views.View.inherit({initialize:function(opts){var _this=this;this.slideChanged=opts.slideChanged||function(){},this.el=opts.el,this.pager=this.el.querySelector(".slide-box-pager"),this.dragThresholdX=opts.dragThresholdX||10,this.velocityXThreshold=opts.velocityXThreshold||.3,this.slideIndex=0,this._updatePager(),window.ionic.onGesture("drag",function(e){_this._handleDrag(e),e.gesture.srcEvent.preventDefault()},this.el),window.ionic.onGesture("release",function(e){_this._handleEndDrag(e)},this.el)},update:function(){this._updatePager()},prependSlide:function(el){var content=this.el.firstElementChild;if(content){var slideWidth=content.offsetWidth,offsetX=parseFloat(content.style.webkitTransform.replace("translate3d(","").split(",")[0])||0,newOffsetX=Math.min(0,offsetX-slideWidth);content.insertBefore(el,content.firstChild),content.classList.remove("slide-box-animating"),content.style.webkitTransform="translate3d("+newOffsetX+"px, 0, 0)",this._prependPagerIcon(),this.slideIndex=(this.slideIndex+1)%content.children.length,this._updatePager()}},appendSlide:function(el){var content=this.el.firstElementChild;content&&(content.classList.remove("slide-box-animating"),content.appendChild(el),this._appendPagerIcon(),this._updatePager())},removeSlide:function(){var content=this.el.firstElementChild;if(content){var items=this.el.firstElementChild;items.removeChild(items.firstElementChild);var slideWidth=content.offsetWidth,offsetX=parseFloat(content.style.webkitTransform.replace("translate3d(","").split(",")[0])||0,newOffsetX=Math.min(0,offsetX+slideWidth);content.classList.remove("slide-box-animating"),content.style.webkitTransform="translate3d("+newOffsetX+"px, 0, 0)",this._removePagerIcon(),this.slideIndex=Math.max(0,(this.slideIndex-1)%content.children.length),this._updatePager()}},slideToSlide:function(index){var content=this.el.firstElementChild;if(content){var slideWidth=content.offsetWidth,offsetX=index*slideWidth,maxX=Math.max(0,content.children.length-1)*slideWidth;offsetX=0>offsetX?0:offsetX>maxX?maxX:offsetX,content.classList.add("slide-box-animating"),content.style.webkitTransform="translate3d("+-offsetX+"px, 0, 0)";var lastSlide=this.slideIndex;this.slideIndex=Math.ceil(offsetX/slideWidth),lastSlide!==this.slideIndex&&this.slideChanged&&this.slideChanged(this.slideIndex),this._updatePager()}},getSlideIndex:function(){return this.slideIndex},_appendPagerIcon:function(){if(this.pager&&this.pager.children.length){var newPagerChild=this.pager.children[0].cloneNode();this.pager.appendChild(newPagerChild)}},_prependPagerIcon:function(){if(this.pager&&this.pager.children.length){var newPagerChild=this.pager.children[0].cloneNode();
this.pager.insertBefore(newPagerChild,this.pager.firstChild)}},_removePagerIcon:function(){this.pager&&this.pager.children.length&&this.pager.removeChild(this.pager.firstElementChild)},_updatePager:function(){if(this.pager){var numPagerChildren=this.pager.children.length;if(numPagerChildren)for(var i=0,j=this.pager.children.length;j>i;i++)i==this.slideIndex?this.pager.children[i].classList.add("active"):this.pager.children[i].classList.remove("active")}},_initDrag:function(){this._isDragging=!1,this._drag=null},_handleEndDrag:function(e){var finalOffsetX,content,ratio,slideWidth,totalWidth,offsetX,_this=this;window.rAF(function(){return _this._drag?(content=_this._drag.content,content.classList.add("slide-box-animating"),offsetX=parseFloat(content.style.webkitTransform.replace("translate3d(","").split(",")[0])||0,slideWidth=content.offsetWidth,totalWidth=content.offsetWidth*content.children.length,ratio=offsetX%slideWidth/slideWidth,finalOffsetX=ratio>=0?0:ratio>=-.5?Math.max(0,Math.floor(Math.abs(offsetX)/slideWidth)*slideWidth):Math.min(totalWidth-slideWidth,Math.ceil(Math.abs(offsetX)/slideWidth)*slideWidth),e.gesture.velocityX>_this.velocityXThreshold?"left"==e.gesture.direction?_this.slideToSlide(_this.slideIndex+1):"right"==e.gesture.direction&&_this.slideToSlide(_this.slideIndex-1):(_this.slideIndex=Math.ceil(finalOffsetX/slideWidth),content.style.webkitTransform="translate3d("+-finalOffsetX+"px, 0, 0)"),void _this._initDrag()):void _this._initDrag()})},_startDrag:function(e){var offsetX,content;this._initDrag(),content=ionic.DomUtil.getParentOrSelfWithClass(e.target,"slide-box-slides"),content&&(content.classList.remove("slide-box-animating"),offsetX=parseFloat(content.style.webkitTransform.replace("translate3d(","").split(",")[0])||0,this._drag={content:content,startOffsetX:offsetX,resist:1})},_handleDrag:function(e){var _this=this;window.rAF(function(){var content;if(_this._drag||_this._startDrag(e),_this._drag&&(e.preventDefault(),!_this._isDragging&&Math.abs(e.gesture.deltaX)>_this.dragThresholdX&&(_this._isDragging=!0),_this._isDragging)){content=_this._drag.content;var newX=_this._drag.startOffsetX+e.gesture.deltaX/_this._drag.resist,rightMostX=-(content.offsetWidth*Math.max(0,content.children.length-1));newX>0?_this._drag.resist=newX/content.offsetWidth+1.4:rightMostX>newX&&(_this._drag.resist=Math.abs(newX)/content.offsetWidth-.6),_this._drag.content.style.webkitTransform="translate3d("+newX+"px, 0, 0)"}})}})}(window.ionic),function(ionic){"use strict";ionic.views.TabBarItem=ionic.views.View.inherit({initialize:function(el){this.el=el,this._buildItem()},create:function(itemData){var item=document.createElement("a");if(item.className="tab-item",itemData.icon){var icon=document.createElement("i");icon.className=itemData.icon,item.appendChild(icon)}return item.appendChild(document.createTextNode(itemData.title)),new ionic.views.TabBarItem(item)},_buildItem:function(){for(var child,_this=this,children=Array.prototype.slice.call(this.el.children),i=0,j=children.length;j>i;i++)if(child=children[i],"i"==child.tagName.toLowerCase()&&/icon/.test(child.className)){this.icon=child.className;break}this.title=this.el.textContent.trim(),this._tapHandler=function(e){_this.onTap&&_this.onTap(e)},ionic.on("tap",this._tapHandler,this.el)},onTap:function(){},destroy:function(){ionic.off("tap",this._tapHandler,this.el)},getIcon:function(){return this.icon},getTitle:function(){return this.title},setSelected:function(isSelected){this.isSelected=isSelected,isSelected?this.el.classList.add("active"):this.el.classList.remove("active")}}),ionic.views.TabBar=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,this.items=[],this._buildItems()},getItems:function(){return this.items},addItem:function(item){var tabItem=ionic.views.TabBarItem.prototype.create(item);this.appendItemElement(tabItem),this.items.push(tabItem),this._bindEventsOnItem(tabItem)},appendItemElement:function(item){this.el&&this.el.appendChild(item.el)},removeItem:function(index){var item=this.items[index];item&&(item.onTap=void 0,item.destroy())},_bindEventsOnItem:function(item){var _this=this;this._itemTapHandler||(this._itemTapHandler=function(){_this.trySelectItem(this)}),item.onTap=this._itemTapHandler},getSelectedItem:function(){return this.selectedItem},setSelectedItem:function(index){this.selectedItem=this.items[index];for(var i=0,j=this.items.length;j>i;i+=1)this.items[i].setSelected(!1);this.selectedItem&&this.selectedItem.setSelected(!0)},selectItem:function(item){for(var i=0,j=this.items.length;j>i;i+=1)if(this.items[i]==item)return void this.setSelectedItem(i)},trySelectItem:function(item){for(var i=0,j=this.items.length;j>i;i+=1)if(this.items[i]==item)return void(this.tryTabSelect&&this.tryTabSelect(i))},_buildItems:function(){for(var item,items=Array.prototype.slice.call(this.el.children),i=0,j=items.length;j>i;i+=1)item=new ionic.views.TabBarItem(items[i]),this.items[i]=item,this._bindEventsOnItem(item);this.items.length>0&&(this.selectedItem=this.items[0])},destroy:function(){for(var i=0,j=this.items.length;j>i;i+=1)this.items[i].destroy();this.items.length=0}})}(window.ionic),function(ionic){"use strict";ionic.views.Toggle=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,this.checkbox=opts.checkbox,this.handle=opts.handle,this.openPercent=-1},tap:function(){this.val(!this.checkbox.checked)},drag:function(e){var slidePageLeft=this.checkbox.offsetLeft+this.handle.offsetWidth/2,slidePageRight=this.checkbox.offsetLeft+this.checkbox.offsetWidth-this.handle.offsetWidth/2;e.pageX>=slidePageRight-4?this.val(!0):e.pageX<=slidePageLeft?this.val(!1):this.setOpenPercent(Math.round(100*(1-(slidePageRight-e.pageX)/(slidePageRight-slidePageLeft))))},setOpenPercent:function(openPercent){if(this.openPercent<0||openPercent<this.openPercent-3||openPercent>this.openPercent+3)if(this.openPercent=openPercent,0===openPercent)this.val(!1);else if(100===openPercent)this.val(!0);else{var openPixel=Math.round(openPercent/100*this.checkbox.offsetWidth-this.handle.offsetWidth);openPixel=1>openPixel?0:openPixel,this.handle.style.webkitTransform="translate3d("+openPixel+"px,0,0)"}},release:function(){this.val(this.openPercent>=50)},val:function(value){return(value===!0||value===!1)&&(""!==this.handle.style.webkitTransform&&(this.handle.style.webkitTransform=""),this.checkbox.checked=value,this.openPercent=value?100:0),this.checkbox.checked}})}(ionic),function(ionic){"use strict";ionic.controllers.ViewController=function(){this.initialize.apply(this,arguments)},ionic.controllers.ViewController.inherit=ionic.inherit,ionic.extend(ionic.controllers.ViewController.prototype,{initialize:function(){},destroy:function(){}})}(window.ionic),function(ionic){"use strict";ionic.controllers.NavController=ionic.controllers.ViewController.inherit({initialize:function(opts){var _this=this;this.navBar=opts.navBar,this.content=opts.content,this.controllers=opts.controllers||[],this._updateNavBar(),this.navBar.shouldGoBack=function(){_this.pop()}},getControllers:function(){return this.controllers},getTopController:function(){return this.controllers[this.controllers.length-1]},push:function(controller){var last=this.controllers[this.controllers.length-1];this.controllers.push(controller);var shouldSwitch=this.switchingController&&this.switchingController(controller)||!0;if(shouldSwitch!==!1){last&&(last.isVisible=!1,last.visibilityChanged&&last.visibilityChanged("push"));var next=this.controllers[this.controllers.length-1];return next.isVisible=!0,next.visibilityChanged&&next.visibilityChanged(last?"push":"first"),this._updateNavBar(),controller}},pop:function(){var next,last;if(!(this.controllers.length<2))return last=this.controllers.pop(),last&&(last.isVisible=!1,last.visibilityChanged&&last.visibilityChanged("pop")),next=this.controllers[this.controllers.length-1],next.isVisible=!0,next.visibilityChanged&&next.visibilityChanged("pop"),this._updateNavBar(),last},showNavBar:function(){this.navBar&&this.navBar.show()},hideNavBar:function(){this.navBar&&this.navBar.hide()},_updateNavBar:function(){this.getTopController()&&this.navBar&&(this.navBar.setTitle(this.getTopController().title),this.navBar.showBackButton(this.controllers.length>1?!0:!1))}})}(window.ionic),function(ionic){"use strict";ionic.controllers.SideMenuController=ionic.controllers.ViewController.inherit({initialize:function(options){var self=this;this.left=options.left,this.right=options.right,this.content=options.content,this.dragThresholdX=options.dragThresholdX||10,this._rightShowing=!1,this._leftShowing=!1,this._isDragging=!1,this.content&&(this.content.onDrag=function(e){self._handleDrag(e)},this.content.onEndDrag=function(e){self._endDrag(e)})},setContent:function(content){var self=this;this.content=content,this.content.onDrag=function(e){self._handleDrag(e)},this.content.endDrag=function(e){self._endDrag(e)}},toggleLeft:function(){var openAmount=this.getOpenAmount();this.openPercentage(openAmount>0?0:100)},toggleRight:function(){var openAmount=this.getOpenAmount();this.openPercentage(0>openAmount?0:-100)},close:function(){this.openPercentage(0)},getOpenAmount:function(){return this.content.getTranslateX()||0},getOpenRatio:function(){var amount=this.getOpenAmount();return amount>=0?amount/this.left.width:amount/this.right.width},isOpen:function(){return 1==this.getOpenRatio()},getOpenPercentage:function(){return 100*this.getOpenRatio()},openPercentage:function(percentage){var p=percentage/100;if(this.left&&percentage>=0)this.openAmount(this.left.width*p);else if(this.right&&0>percentage){{this.right.width}this.openAmount(this.right.width*p)}},openAmount:function(amount){var maxLeft=this.left&&this.left.width||0,maxRight=this.right&&this.right.width||0;(!this.left||!this.left.isEnabled)&&amount>0||(!this.right||!this.right.isEnabled)&&0>amount||this._leftShowing&&amount>maxLeft||this._rightShowing&&-maxRight>amount||(this.content.setTranslateX(amount),amount>=0?(this._leftShowing=!0,this._rightShowing=!1,this.right&&this.right.pushDown&&this.right.pushDown(),this.left&&this.left.bringUp&&this.left.bringUp()):(this._rightShowing=!0,this._leftShowing=!1,this.right&&this.right.bringUp(),this.left&&this.left.pushDown()))},snapToRest:function(e){this.content.enableAnimation(),this._isDragging=!1;var ratio=this.getOpenRatio();if(0!==ratio){var velocityThreshold=.3,velocityX=e.gesture.velocityX,direction=e.gesture.direction;this.openPercentage(ratio>0&&.5>ratio&&"right"==direction&&velocityThreshold>velocityX?0:ratio>.5&&"left"==direction&&velocityThreshold>velocityX?100:0>ratio&&ratio>-.5&&"left"==direction&&velocityThreshold>velocityX?0:.5>ratio&&"right"==direction&&velocityThreshold>velocityX?-100:"right"==direction&&ratio>=0&&(ratio>=.5||velocityX>velocityThreshold)?100:"left"==direction&&0>=ratio&&(-.5>=ratio||velocityX>velocityThreshold)?-100:0)}},_endDrag:function(e){this.snapToRest(e),this._startX=null,this._lastX=null,this._offsetX=null},_handleDrag:function(e){this._startX?this._lastX=e.gesture.touches[0].pageX:(this._startX=e.gesture.touches[0].pageX,this._lastX=this._startX),!this._isDragging&&Math.abs(this._lastX-this._startX)>this.dragThresholdX&&(this._startX=this._lastX,this._isDragging=!0,this.content.disableAnimation(),this._offsetX=this.getOpenAmount()),this._isDragging&&this.openAmount(this._offsetX+(this._lastX-this._startX))}})}(ionic),function(ionic){"use strict";ionic.controllers.TabBarController=ionic.controllers.ViewController.inherit({initialize:function(options){this.tabBar=options.tabBar,this._bindEvents(),this.controllers=[];for(var controllers=options.controllers||[],i=0;i<controllers.length;i++)this.addController(controllers[i]);this.controllerWillChange=options.controllerWillChange||function(){},this.controllerChanged=options.controllerChanged||function(){},this.setSelectedController(0)},_bindEvents:function(){var _this=this;this.tabBar.tryTabSelect=function(index){_this.setSelectedController(index)}},selectController:function(index){var shouldChange=!0;this.controllerWillChange&&this.controllerWillChange(this.controllers[index],index)===!1&&(shouldChange=!1),shouldChange&&this.setSelectedController(index)},setSelectedController:function(index){if(!(index>=this.controllers.length)){var lastController=this.selectedController,lastIndex=this.selectedIndex;this.selectedController=this.controllers[index],this.selectedIndex=index,this._showController(index),this.tabBar.setSelectedItem(index),this.controllerChanged&&this.controllerChanged(lastController,lastIndex,this.selectedController,this.selectedIndex)}},_showController:function(index){for(var c,i=0,j=this.controllers.length;j>i;i++)c=this.controllers[i],c.isVisible=!1,c.visibilityChanged&&c.visibilityChanged();c=this.controllers[index],c.isVisible=!0,c.visibilityChanged&&c.visibilityChanged()},_clearSelected:function(){this.selectedController=null,this.selectedIndex=-1},getController:function(index){return this.controllers[index]},getControllers:function(){return this.controllers},getSelectedController:function(){return this.selectedController},getSelectedControllerIndex:function(){return this.selectedIndex},addController:function(controller){this.controllers.push(controller),this.tabBar.addItem({title:controller.title,icon:controller.icon}),this.selectedController||this.setSelectedController(0)},setControllers:function(controllers){this.controllers=controllers,this._clearSelected(),this.selectController(0)}})}(window.ionic),function(window,document,undefined){"use strict";function minErr(module){return function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments,stringify=function(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?JSON.stringify(obj):obj};for(message=prefix+template.replace(/\{\d+\}/g,function(match){var arg,index=+match.slice(1,-1);return index+2<templateArgs.length?(arg=templateArgs[index+2],"function"==typeof arg?arg.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof arg?"undefined":"string"!=typeof arg?toJson(arg):arg):match}),message=message+"\nhttp://errors.angularjs.org/1.2.3/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(stringify(arguments[i]));return new Error(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key;if(obj)if(isFunction(obj))for(key in obj)"prototype"!=key&&"length"!=key&&"name"!=key&&obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context);else if(isArrayLike(obj))for(key=0;key<obj.length;key++)iterator.call(context,obj[key],key);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);return obj}function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57==digit)return uid[index]="A",uid.join("");if(90!=digit)return uid[index]=String.fromCharCode(digit+1),uid.join("");uid[index]="0"}return uid.unshift("0"),uid.join("")}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){var h=dst.$$hashKey;return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst[key]=value})}),setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!=value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"==toString.apply(value)}function isArray(value){return"[object Array]"==toString.apply(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"==toString.apply(value)}function isWindow(obj){return obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.apply(obj)}function isElement(node){return node&&(node.nodeName||node.on&&node.find)}function map(obj,iterator,context){var results=[];return forEach(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results}function includes(array,obj){return-1!=indexOf(array,obj)}function indexOf(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1}function arrayRemove(array,value){var index=indexOf(array,value);return index>=0&&array.splice(index,1),value}function copy(source,destination){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)destination.push(copy(source[i]))}else{var h=destination.$$hashKey;forEach(destination,function(value,key){delete destination[key]});for(var key in source)destination[key]=copy(source[key]);setHashKey(destination,h)}}else destination=source,source&&(isArray(source)?destination=copy(source,[]):isDate(source)?destination=new Date(source.getTime()):isRegExp(source)?destination=new RegExp(source.source):isObject(source)&&(destination=copy(source,{})));return destination}function shallowCopy(src,dst){dst=dst||{};for(var key in src)src.hasOwnProperty(key)&&"$$"!==key.substr(0,2)&&(dst[key]=src[key]);return dst}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)&&o1.getTime()==o2.getTime();if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function csp(){return document.securityPolicy&&document.securityPolicy.isActive||document.querySelector&&!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"))}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,curryArgs.concat(slice.call(arguments,0))):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:JSON.stringify(obj,toJsonReplacer,pretty?"  ":null)}function fromJson(json){return isString(json)?JSON.parse(json):json}function toBoolean(value){if(value&&0!==value.length){var v=lowercase(""+value);value=!("f"==v||"0"==v||"false"==v||"no"==v||"n"==v||"[]"==v)}else value=!1;return value}function startingTag(element){element=jqLite(element).clone();try{element.html("")}catch(e){}var TEXT_NODE=3,elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===TEXT_NODE?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;obj[key]?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function angularInit(element,bootstrap){function append(element){element&&elements.push(element)}var appElement,module,elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;forEach(names,function(name){names[name]=!0,append(document.getElementById(name)),name=name.replace(":","\\:"),element.querySelectorAll&&(forEach(element.querySelectorAll("."+name),append),forEach(element.querySelectorAll("."+name+"\\:"),append),forEach(element.querySelectorAll("["+name+"]"),append))}),forEach(elements,function(element){if(!appElement){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);match?(appElement=element,module=(match[2]||"").replace(/\s+/g,",")):forEach(element.attributes,function(attr){!appElement&&names[attr.name]&&(appElement=element,module=attr.value)})}}),appElement&&bootstrap(appElement,module?[module]:[])}function bootstrap(element,modules){var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag)}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),modules.unshift("ng");var injector=createInjector(modules);return injector.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),void(angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)}),doBootstrap()}))}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){jQuery=window.jQuery,jQuery?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),jqLitePatchJQueryRemove("remove",!0,!0,!1),jqLitePatchJQueryRemove("empty",!1,!1,!1),jqLitePatchJQueryRemove("html",!1,!1,!0)):jqLite=JQLite,angular.element=jqLite}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockElements(block){if(block.startNode===block.endNode)return jqLite(block.startNode);var element=block.startNode,elements=[element];do{if(element=element.nextSibling,!element)break;elements.push(element)}while(element!==block.endNode);return jqLite(elements)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod){return function(){return invokeQueue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],runBlocks=[],config=invokeLater("$injector","invoke"),moduleInstance={_invokeQueue:invokeQueue,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},$$minErr:minErr,$$csp:csp}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,required:requiredDirective,ngRequired:requiredDirective,ngValue:ngValueDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$timeout:$TimeoutProvider,$window:$WindowProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLitePatchJQueryRemove(name,dispatchThis,filterElems,getterIfNoArguments){function removePatch(param){var set,setIndex,setLength,element,childIndex,childLength,children,list=filterElems&&param?[this.filter(param)]:[this],fireEvent=dispatchThis;if(!getterIfNoArguments||null!=param)for(;list.length;)for(set=list.shift(),setIndex=0,setLength=set.length;setLength>setIndex;setIndex++)for(element=jqLite(set[setIndex]),fireEvent?element.triggerHandler("$destroy"):fireEvent=!fireEvent,childIndex=0,childLength=(children=element.children()).length;childLength>childIndex;childIndex++)list.push(jQuery(children[childIndex]));return originalJqFn.apply(this,arguments)}var originalJqFn=jQuery.fn[name];originalJqFn=originalJqFn.$original||originalJqFn,removePatch.$original=originalJqFn,jQuery.fn[name]=removePatch}function JQLite(element){if(element instanceof JQLite)return element;if(!(this instanceof JQLite)){if(isString(element)&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}if(isString(element)){var div=document.createElement("div");div.innerHTML="<div>&#160;</div>"+element,div.removeChild(div.firstChild),jqLiteAddNodes(this,div.childNodes);var fragment=jqLite(document.createDocumentFragment());fragment.append(this)}else jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element){jqLiteRemoveData(element);for(var i=0,children=element.childNodes||[];i<children.length;i++)jqLiteDealoc(children[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");handle&&(isUndefined(type)?forEach(events,function(eventHandler,type){removeEventListenerFn(element,type,eventHandler),delete events[type]
}):forEach(type.split(" "),function(type){isUndefined(fn)?(removeEventListenerFn(element,type,events[type]),delete events[type]):arrayRemove(events[type]||[],fn)}))}function jqLiteRemoveData(element,name){var expandoId=element[jqName],expandoStore=jqCache[expandoId];if(expandoStore){if(name)return void delete jqCache[expandoId].data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element[jqName]=undefined}}function jqLiteExpandoStore(element,key,value){var expandoId=element[jqName],expandoStore=jqCache[expandoId||-1];return isDefined(value)?(expandoStore||(element[jqName]=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={}),void(expandoStore[key]=value)):expandoStore&&expandoStore[key]}function jqLiteData(element,key,value){var data=jqLiteExpandoStore(element,"data"),isSetter=isDefined(value),keyDefined=!isSetter&&isDefined(key),isSimpleGetter=keyDefined&&!isObject(key);if(data||isSimpleGetter||jqLiteExpandoStore(element,"data",data={}),isSetter)data[key]=value;else{if(!keyDefined)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements){elements=elements.nodeName||!isDefined(elements.length)||isWindow(elements)?[elements]:elements;for(var i=0;i<elements.length;i++)root.push(elements[i])}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element=jqLite(element),9==element[0].nodeType&&(element=element.find("html"));for(var names=isArray(name)?name:[name];element.length;){for(var i=0,ii=names.length;ii>i;i++)if((value=element.data(names[i]))!==undefined)return value;element=element.parent()}}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[element.nodeName]&&booleanAttr}function createEventHandler(element,events){var eventHandler=function(event,type){if(event.preventDefault||(event.preventDefault=function(){event.returnValue=!1}),event.stopPropagation||(event.stopPropagation=function(){event.cancelBubble=!0}),event.target||(event.target=event.srcElement||document),isUndefined(event.defaultPrevented)){var prevent=event.preventDefault;event.preventDefault=function(){event.defaultPrevented=!0,prevent.call(event)},event.defaultPrevented=!1}event.isDefaultPrevented=function(){return event.defaultPrevented||event.returnValue===!1},forEach(events[type||event.type],function(fn){fn.call(element,event)}),8>=msie?(event.preventDefault=null,event.stopPropagation=null,event.isDefaultPrevented=null):(delete event.preventDefault,delete event.stopPropagation,delete event.isDefaultPrevented)};return eventHandler.elem=element,eventHandler}function hashKey(obj){var key,objType=typeof obj;return"object"==objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():key===undefined&&(key=obj.$$hashKey=nextUid()):key=obj,objType+":"+key}function HashMap(array){forEach(array,this.put,this)}function annotate(fn){var $inject,fnText,argDecl,last;return"function"==typeof fn?($inject=fn.$inject)||($inject=[],fn.length&&(fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})),fn.$inject=$inject):isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0),$inject}function createInjector(modulesToLoad){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn){return provider(name,{$get:factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val))}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,invokeQueue,i,ii,runBlocks=[];return forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{if(isString(module))for(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),invokeQueue=moduleFn._invokeQueue,i=0,ii=invokeQueue.length;ii>i;i++){var invokeArgs=invokeQueue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}else isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName)}finally{path.shift()}}function invoke(fn,self,locals){var length,i,key,args=[],$inject=annotate(fn);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key))}switch(fn.$inject||(fn=fn[length]),self?-1:args.length){case 0:return fn();case 1:return fn(args[0]);case 2:return fn(args[0],args[1]);case 3:return fn(args[0],args[1],args[2]);case 4:return fn(args[0],args[1],args[2],args[3]);case 5:return fn(args[0],args[1],args[2],args[3],args[4]);case 6:return fn(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);case 8:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);case 9:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8]);case 10:return fn(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9]);default:return fn.apply(self,args)}}function instantiate(Type,locals){var instance,returnedValue,Constructor=function(){};return Constructor.prototype=(isArray(Type)?Type[Type.length-1]:Type).prototype,instance=new Constructor,returnedValue=invoke(Type,instance,locals),isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(){throw $injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(servicename){var provider=providerInjector.get(servicename+providerSuffix);return instanceInjector.invoke(provider.$get,provider)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return forEach(list,function(element){result||"a"!==lowercase(element.nodeName)||(result=element)}),result}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?elm.scrollIntoView():(elm=getFirstAnchor(document.getElementsByName(hash)))?elm.scrollIntoView():"top"===hash&&$window.scrollTo(0,0):$window.scrollTo(0,0)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(){$rootScope.$evalAsync(scroll)}),scroll}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function fireUrlChange(){newLocation=null,lastBrowserUrl!=self.url()&&(lastBrowserUrl=self.url(),forEach(urlChangeListeners,function(listener){listener(self.url())}))}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var lastBrowserUrl=location.href,baseElement=document.find("base"),newLocation=null;self.url=function(url,replace){if(location!==window.location&&(location=window.location),url){if(lastBrowserUrl==url)return;return lastBrowserUrl=url,$sniffer.history?replace?history.replaceState(null,"",url):(history.pushState(null,"",url),baseElement.attr("href",baseElement.attr("href"))):(newLocation=url,replace?location.replace(url):location.href=url),self}return newLocation||location.href.replace(/%27/g,"'")};var urlChangeListeners=[],urlChangeInit=!1;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",fireUrlChange),$sniffer.hashchange?jqLite(window).on("hashchange",fireUrlChange):self.addPollFn(fireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^https?\:\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=unescape(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=unescape(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=escape(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=escape(name)+"="+escape(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){var lruEntry=lruHash[key]||(lruHash[key]={key:key});return refresh(lruEntry),isUndefined(value)?void 0:(key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value)},get:function(key){var lruEntry=lruHash[key];if(lruEntry)return refresh(lruEntry),data[key]},remove:function(key){var lruEntry=lruHash[key];lruEntry&&(lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key],delete data[key],size--)},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"A",directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$http,$templateCache,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){3==node.nodeType&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=node=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);return function(scope,cloneConnectFn,transcludeControllers){assertArg(scope,"scope");var $linkNode=cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes;forEach(transcludeControllers,function(instance,name){$linkNode.data("$"+name+"Controller",instance)});for(var i=0,ii=$linkNode.length;ii>i;i++){var node=$linkNode[i];(1==node.nodeType||9==node.nodeType)&&$linkNode.eq(i).data("$scope",scope)}return safeAddClass($linkNode,"ng-scope"),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode),$linkNode}}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,boundTranscludeFn){var nodeLinkFn,childLinkFn,node,$node,childScope,childTranscludeFn,i,ii,n,stableNodeList=[];for(i=0,ii=nodeList.length;ii>i;i++)stableNodeList.push(nodeList[i]);for(i=0,n=0,ii=linkFns.length;ii>i;n++)node=stableNodeList[n],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],$node=jqLite(node),nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),$node.data("$scope",childScope),safeAddClass($node,"ng-scope")):childScope=scope,childTranscludeFn=nodeLinkFn.transclude,childTranscludeFn||!boundTranscludeFn&&transcludeFn?nodeLinkFn(childLinkFn,childScope,node,$rootElement,createBoundTranscludeFn(scope,childTranscludeFn||transcludeFn)):nodeLinkFn(childLinkFn,childScope,node,undefined,boundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,boundTranscludeFn)}for(var nodeLinkFn,childLinkFn,directives,attrs,linkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!nodeList[i].childNodes||!nodeList[i].childNodes.length?null:compileNodes(nodeList[i].childNodes,nodeLinkFn?nodeLinkFn.transclude:transcludeFn),linkFns.push(nodeLinkFn),linkFns.push(childLinkFn),linkFnFound=linkFnFound||nodeLinkFn||childLinkFn,previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn){return function(transcludedScope,cloneFn,controllers){var scopeCreated=!1;transcludedScope||(transcludedScope=scope.$new(),transcludedScope.$$transcluded=!0,scopeCreated=!0);var clone=transcludeFn(transcludedScope,cloneFn,controllers);return scopeCreated&&clone.on("$destroy",bind(transcludedScope,transcludedScope.$destroy)),clone}}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case 1:addDirective(directives,directiveNormalize(nodeName_(node).toLowerCase()),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;if(attr=nAttrs[j],!msie||msie>=8||attr.specified){name=attr.name,ngAttrName=directiveNormalize(name),NG_ATTR_BINDING.test(ngAttrName)&&(name=snake_case(ngAttrName.substr(6),"-"));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,attrs[nName]=value=trim(msie&&"href"==name?decodeURIComponent(node.getAttribute(name,2)):attr.value),getBooleanAttrName(node,nName)&&(attrs[nName]=!0),addAttrInterpolateDirective(node,directives,value,nName),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}}if(className=node.className,isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case 3:addTextInterpolateDirective(directives,node.nodeValue);break;case 8:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);1==node.nodeType&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(require,$element,elementControllers){var value,retrievalMethod="data",optional=!1;if(isString(require)){for(;"^"==(value=require.charAt(0))||"?"==value;)require=require.substr(1),"^"==value&&(retrievalMethod="inheritedData"),optional=optional||"?"==value;if(value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require]),value=value||$element[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn){var transcludeControllers;return arguments.length<2&&(cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers)}var attrs,$element,i,ii,linkFn,controller,isolateScope,transcludeFn,elementControllers={};if(attrs=compileNode===linkNode?templateAttrs:shallowCopy(templateAttrs,new Attributes(jqLite(linkNode),templateAttrs.$attr)),$element=attrs.$$element,newIsolateScopeDirective){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/,$linkNode=jqLite(linkNode);isolateScope=scope.$new(!0),templateDirective&&templateDirective===newIsolateScopeDirective.$$originalDirective?$linkNode.data("$isolateScope",isolateScope):$linkNode.data("$isolateScopeNoTemplate",isolateScope),safeAddClass($linkNode,"ng-isolate-scope"),forEach(newIsolateScopeDirective.scope,function(definition,scopeName){var lastValue,parentGet,parentSet,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName,optional="?"==match[2],mode=match[1];switch(isolateScope.$$isolateBindings[scopeName]=mode+attrName,mode){case"@":attrs.$observe(attrName,function(value){isolateScope[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateScope[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),parentSet=parentGet.assign||function(){throw lastValue=isolateScope[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateScope[scopeName]=parentGet(scope),isolateScope.$watch(function(){var parentValue=parentGet(scope);return parentValue!==isolateScope[scopeName]&&(parentValue!==lastValue?lastValue=isolateScope[scopeName]=parentValue:parentSet(scope,parentValue=lastValue=isolateScope[scopeName])),parentValue});break;case"&":parentGet=$parse(attrs[attrName]),isolateScope[scopeName]=function(locals){return parentGet(scope,locals)};break;default:throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",newIsolateScopeDirective.name,scopeName,definition)}})}for(transcludeFn=boundTranscludeFn&&controllersBoundTransclude,controllerDirectives&&forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance),directive.controllerAs&&(locals.$scope[directive.controllerAs]=controllerInstance)}),i=0,ii=preLinkFns.length;ii>i;i++)try{linkFn=preLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)try{linkFn=postLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasElementTranscludeDirective=!1,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(newScopeDirective=newScopeDirective||directive,directive.templateUrl||(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode),isObject(directiveValue)&&(newIsolateScopeDirective=directive))),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=groupScan(compileNode,attrStart,attrEnd),$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,jqLite(sliceArgs($template)),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.html(""),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLite("<div>"+trim(directiveValue)+"</div>").contents(),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;
else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transclude=hasTranscludeDirective&&childTranscludeFn,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=extend({},origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl;return $compileNode.html(""),$http.get($sce.getTrustedResourceUrl(templateUrl),{cache:$templateCache}).success(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLite("<div>"+trim(content)+"</div>").contents(),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];beforeTemplateLinkNode!==beforeTemplateCompileNode&&(linkNode=jqLiteClone(compileNode),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode)),childBoundTranscludeFn=afterTemplateNodeLinkFn.transclude?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}linkQueue=null}).error(function(response,code,headers,config){throw $compileMinErr("tpload","Failed to load template: {0}",config.url)}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){linkQueue?(linkQueue.push(scope),linkQueue.push(node),linkQueue.push(rootElement),linkQueue.push(boundTranscludeFn)):afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,boundTranscludeFn)}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:valueFn(function(scope,node){var parent=node.parent(),bindings=parent.data("$binding")||[];bindings.push(interpolateFn),safeAddClass(parent.data("$binding",bindings),"ng-binding"),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})})})}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"FORM"==tag&&"action"==attrNormalizedName||"IMG"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name){var interpolateFn=$interpolate(value,!0);if(interpolateFn){if("multiple"===name&&"SELECT"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");interpolateFn=$interpolate(attr[name],!0,getTrustedContext(node,name)),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1;break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),newNode[jqLite.expando]=firstElementToRemove[jqLite.expando];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}var Attributes=function(element,attr){this.$$element=element,this.$attr=attr||{}};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){this.$removeClass(tokenDifference(oldClasses,newClasses)),this.$addClass(tokenDifference(newClasses,oldClasses))},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key);booleanKey&&(this.$$element.prop(key,value),attrName=booleanKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),("A"===nodeName&&"href"===key||"IMG"===nodeName&&"src"===key)&&(this[key]=value=$$sanitizeUri(value,"src"===key)),writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[key],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers={}),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||fn(attrs[key])}),fn}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function $ControllerProvider(){var controllers={},CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.$get=["$injector","$window",function($injector,$window){return function(expression,locals){var instance,match,constructor,identifier;if(isString(expression)&&(match=expression.match(CNTRL_REG),constructor=match[1],identifier=match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||getter($window,constructor,!0),assertArgFn(expression,constructor,!0)),instance=$injector.instantiate(expression,locals),identifier){if(!locals||"object"!=typeof locals.$scope)throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",constructor||expression.name,identifier);locals.$scope[identifier]=instance}return instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(){$log.error.apply($log,arguments)}}]}function parseHeaders(headers){var key,val,i,parsed={};return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]?parsed[key]+=", "+val:parsed[key]=val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){return headersObj||(headersObj=parseHeaders(headers)),name?headersObj[lowercase(name)]||null:headersObj}}function transformData(data,headers,fns){return isFunction(fns)?fns(data,headers):(forEach(fns,function(fn){data=fn(data,headers)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var JSON_START=/^\s*(\[|\{[^\{])/,JSON_END=/[\}\]]\s*$/,PROTECTION_PREFIX=/^\)\]\}',?\n/,CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},defaults=this.defaults={transformResponse:[function(data){return isString(data)&&(data=data.replace(PROTECTION_PREFIX,""),JSON_START.test(data)&&JSON_END.test(data)&&(data=fromJson(data))),data}],transformRequest:[function(d){return isObject(d)&&!isFile(d)?toJson(d):d}],headers:{common:{Accept:"application/json, text/plain, */*"},post:CONTENT_TYPE_APPLICATION_JSON,put:CONTENT_TYPE_APPLICATION_JSON,patch:CONTENT_TYPE_APPLICATION_JSON},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},interceptorFactories=this.interceptors=[],responseInterceptorFactories=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response,{data:transformData(response.data,response.headers,config.transformResponse)});return isSuccess(response.status)?resp:$q.reject(resp)}function mergeHeaders(config){function execHeaders(headers){var headerContent;forEach(headers,function(headerFn,header){isFunction(headerFn)&&(headerContent=headerFn(),null!=headerContent?headers[header]=headerContent:delete headers[header])})}var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]),execHeaders(defHeaders),execHeaders(reqHeaders);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return reqHeaders}var config={transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},headers=mergeHeaders(requestConfig);extend(config,requestConfig),config.headers=headers,config.method=uppercase(config.method);var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(headers[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue);var serverRequest=function(config){headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),config.transformRequest);return isUndefined(config.data)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData,headers).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData,reqHeaders){function done(status,response,headersString){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString)]):cache.remove(url)),resolvePromise(response,status,headersString),$rootScope.$$phase||$rootScope.$apply()}function resolvePromise(response,status,headers){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config})}function removePendingReq(){var idx=indexOf($http.pendingRequests,config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),(config.cache||defaults.cache)&&config.cache!==!1&&"GET"==config.method&&(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache)if(cachedResp=cache.get(url),isDefined(cachedResp)){if(cachedResp.then)return cachedResp.then(removePendingReq,removePendingReq),cachedResp;isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],copy(cachedResp[2])):resolvePromise(cachedResp,200,{})}else cache.put(url,promise);return isUndefined(cachedResp)&&$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType),promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(v=toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),url+(-1==url.indexOf("?")?"?":"&")+parts.join("&")}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),forEach(responseInterceptorFactories,function(interceptorFactory,index){var responseFn=isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory);reversedInterceptors.splice(index,0,{response:function(response){return responseFn($q.when(response))},responseError:function(response){return responseFn($q.reject(response))}})}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put"),$http.defaults=defaults,$http}]}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,XHR,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,XHR,$browserDefer,callbacks,rawDocument){function jsonpReq(url,done){var script=rawDocument.createElement("script"),doneWrapper=function(){script.onreadystatechange=script.onload=script.onerror=null,rawDocument.body.removeChild(script),done&&done()};return script.type="text/javascript",script.src=url,msie&&8>=msie?script.onreadystatechange=function(){/loaded|complete/.test(script.readyState)&&doneWrapper()}:script.onload=script.onerror=function(){doneWrapper()},rawDocument.body.appendChild(script),doneWrapper}var ABORTED=-1;return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){status=ABORTED,jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString){var protocol=urlResolve(url).protocol;timeoutId&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,status="file"==protocol&&0===status?response?200:404:status,status=1223==status?204:status,callback(status,response,headersString),$browser.$$completeOutstandingRequest(noop)}var status;if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),function(){callbacks[callbackId].data?completeRequest(callback,200,callbacks[callbackId].data):completeRequest(callback,status||-2),delete callbacks[callbackId]})}else{var xhr=new XHR;xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onreadystatechange=function(){if(4==xhr.readyState){var responseHeaders=null,response=null;status!==ABORTED&&(responseHeaders=xhr.getAllResponseHeaders(),response=xhr.responseType?xhr.response:xhr.responseText),completeRequest(callback,status||xhr.status,response,responseHeaders)}},withCredentials&&(xhr.withCredentials=!0),responseType&&(xhr.responseType=responseType),xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else timeout&&timeout.then&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function $interpolate(text,mustHaveExpression,trustedContext){for(var startIndex,endIndex,fn,exp,index=0,parts=[],length=text.length,hasInterpolation=!1,concat=[];length>index;)-1!=(startIndex=text.indexOf(startSymbol,index))&&-1!=(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))?(index!=startIndex&&parts.push(text.substring(index,startIndex)),parts.push(fn=$parse(exp=text.substring(startIndex+startSymbolLength,endIndex))),fn.exp=exp,index=endIndex+endSymbolLength,hasInterpolation=!0):(index!=length&&parts.push(text.substring(index)),index=length);if((length=parts.length)||(parts.push(""),length=1),trustedContext&&parts.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);return!mustHaveExpression||hasInterpolation?(concat.length=length,fn=function(context){try{for(var part,i=0,ii=length;ii>i;i++)"function"==typeof(part=parts[i])&&(part=part(context),part=trustedContext?$sce.getTrusted(trustedContext,part):$sce.valueOf(part),null===part||isUndefined(part)?part="":"string"!=typeof part&&(part=toJson(part))),concat[i]=part;return concat.join("")}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},fn.exp=text,fn.parts=parts,fn):void 0}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length;return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q",function($rootScope,$window,$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,deferred=$q.defer(),promise=deferred.promise,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj,appBase){var parsedUrl=urlResolve(absoluteUrl,appBase);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj,appBase){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl,appBase);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this,appBase),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$rewrite=function(url){var appUrl,prevAppUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?appBaseNoFile+appUrl:appBaseNoFile==url+"/"?appBaseNoFile:void 0}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/?.*?:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url),withoutHashUrl="#"==withoutBaseUrl.charAt(0)?beginsWith(hashPrefix,withoutBaseUrl):this.$$html5?withoutBaseUrl:"";if(!isString(withoutHashUrl))throw $locationMinErr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',url,hashPrefix);parseAppUrl(withoutHashUrl,this,appBase),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$rewrite=function(url){return stripHash(appBase)==stripHash(url)?url:void 0}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$rewrite=function(url){var appUrl;return appBase==stripHash(url)?url:(appUrl=beginsWith(appBaseNoFile,url))?appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"?appBaseNoFile:void 0}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode=!1;this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isDefined(mode)?(html5Mode=mode,this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function($rootScope,$browser,$sniffer,$rootElement){function afterLocationChange(oldUrl){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();html5Mode?(appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url):(appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl),$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parse($location.$$rewrite(initialUrl)),$rootElement.on("click",function(event){if(!event.ctrlKey&&!event.metaKey&&2!=event.which){for(var elm=jqLite(event.target);"a"!==lowercase(elm[0].nodeName);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),rewrittenUrl=$location.$$rewrite(absHref);absHref&&!elm.attr("target")&&rewrittenUrl&&!event.isDefaultPrevented()&&(event.preventDefault(),rewrittenUrl!=$browser.url()&&($location.$$parse(rewrittenUrl),$rootScope.$apply(),window.angular["ff-684208-preventDefault"]=!0))}}),$location.absUrl()!=initialUrl&&$browser.url($location.absUrl(),!0),$browser.onUrlChange(function(newUrl){if($location.absUrl()!=newUrl){if($rootScope.$broadcast("$locationChangeStart",newUrl,$location.absUrl()).defaultPrevented)return void $browser.url($location.absUrl());$rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();$location.$$parse(newUrl),afterLocationChange(oldUrl)}),$rootScope.$$phase||$rootScope.$digest()}});var changeCounter=0;return $rootScope.$watch(function(){var oldUrl=$browser.url(),currentReplace=$location.$$replace;return changeCounter&&oldUrl==$location.absUrl()||(changeCounter++,$rootScope.$evalAsync(function(){$rootScope.$broadcast("$locationChangeStart",$location.absUrl(),oldUrl).defaultPrevented?$location.$$parse(oldUrl):($browser.url($location.absUrl(),currentReplace),afterLocationChange(oldUrl))})),$location.$$replace=!1,changeCounter}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop;return logFn.apply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("constructor"===name)throw $parseMinErr("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',fullExpression);return name
}function ensureSafeObject(obj,fullExpression){if(obj&&obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj&&(obj.nodeName||obj.on&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);return obj}function setter(obj,path,setValue,fullExp,options){options=options||{};for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=obj[key];propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj,obj.then&&options.unwrapPromises&&(promiseWarning(fullExp),"$$v"in obj||!function(promise){promise.then(function(val){promise.$$v=val})}(obj),obj.$$v===undefined&&(obj.$$v={}),obj=obj.$$v)}return key=ensureSafeMemberName(element.shift(),fullExp),obj[key]=setValue,setValue}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,options){return ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp),options.unwrapPromises?function(scope,locals){var promise,pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null===pathVal||pathVal===undefined?pathVal:(pathVal=pathVal[key0],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key1&&null!==pathVal&&pathVal!==undefined?(pathVal=pathVal[key1],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key2&&null!==pathVal&&pathVal!==undefined?(pathVal=pathVal[key2],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key3&&null!==pathVal&&pathVal!==undefined?(pathVal=pathVal[key3],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key4&&null!==pathVal&&pathVal!==undefined?(pathVal=pathVal[key4],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),pathVal):pathVal):pathVal):pathVal):pathVal)}:function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null===pathVal||pathVal===undefined?pathVal:(pathVal=pathVal[key0],key1&&null!==pathVal&&pathVal!==undefined?(pathVal=pathVal[key1],key2&&null!==pathVal&&pathVal!==undefined?(pathVal=pathVal[key2],key3&&null!==pathVal&&pathVal!==undefined?(pathVal=pathVal[key3],key4&&null!==pathVal&&pathVal!==undefined?pathVal=pathVal[key4]:pathVal):pathVal):pathVal):pathVal)}}function getterFn(path,options,fullExp){if(getterFnCache.hasOwnProperty(path))return getterFnCache[path];var fn,pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,options):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,options)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="var l, fn, p;\n";forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp),code+="if(s === null || s === undefined) return s;\nl=s;\ns="+(index?"s":'((k&&k.hasOwnProperty("'+key+'"))?k:s)')+'["'+key+'"];\n'+(options.unwrapPromises?'if (s && s.then) {\n pw("'+fullExp.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),code+="return s;";var evaledFnGetter=new Function("s","k","pw",code);evaledFnGetter.toString=function(){return code},fn=function(scope,locals){return evaledFnGetter(scope,locals,promiseWarning)}}return"hasOwnProperty"!==path&&(getterFnCache[path]=fn),fn}function $ParseProvider(){var cache={},$parseOptions={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(value){return isDefined(value)?($parseOptions.unwrapPromises=!!value,this):$parseOptions.unwrapPromises},this.logPromiseWarnings=function(value){return isDefined(value)?($parseOptions.logPromiseWarnings=value,this):$parseOptions.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function($filter,$sniffer,$log){return $parseOptions.csp=$sniffer.csp,promiseWarning=function(fullExp){$parseOptions.logPromiseWarnings&&!promiseWarningCache.hasOwnProperty(fullExp)&&(promiseWarningCache[fullExp]=!0,$log.warn("[$parse] Promise found in the expression `"+fullExp+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(exp){var parsedExpression;switch(typeof exp){case"string":if(cache.hasOwnProperty(exp))return cache[exp];var lexer=new Lexer($parseOptions),parser=new Parser(lexer,$filter,$parseOptions);return parsedExpression=parser.parse(exp,!1),"hasOwnProperty"!==exp&&(cache[exp]=parsedExpression),parsedExpression;case"function":return exp;default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function defaultCallback(value){return value}function defaultErrback(reason){return reject(reason)}function all(promises){var deferred=defer(),counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,ref(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var defer=function(){var value,deferred,pending=[];return deferred={resolve:function(val){if(pending){var callbacks=pending;pending=undefined,value=ref(val),callbacks.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],value.then(callback[0],callback[1],callback[2])})}},reject:function(reason){deferred.resolve(reject(reason))},notify:function(progress){if(pending){var callbacks=pending;pending.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],callback[2](progress)})}},promise:{then:function(callback,errback,progressback){var result=defer(),wrappedCallback=function(value){try{result.resolve((isFunction(callback)?callback:defaultCallback)(value))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedErrback=function(reason){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedProgressback=function(progress){try{result.notify((isFunction(progressback)?progressback:defaultCallback)(progress))}catch(e){exceptionHandler(e)}};return pending?pending.push([wrappedCallback,wrappedErrback,wrappedProgressback]):value.then(wrappedCallback,wrappedErrback,wrappedProgressback),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback){function makePromise(value,resolved){var result=defer();return resolved?result.resolve(value):result.reject(value),result.promise}function handleCallback(value,isResolved){var callbackOutput=null;try{callbackOutput=(callback||defaultCallback)()}catch(e){return makePromise(e,!1)}return callbackOutput&&isFunction(callbackOutput.then)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)}return this.then(function(value){return handleCallback(value,!0)},function(error){return handleCallback(error,!1)})}}}},ref=function(value){return value&&isFunction(value.then)?value:{then:function(callback){var result=defer();return nextTick(function(){result.resolve(callback(value))}),result.promise}}},reject=function(reason){return{then:function(callback,errback){var result=defer();return nextTick(function(){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}}),result.promise}}},when=function(value,callback,errback,progressback){var done,result=defer(),wrappedCallback=function(value){try{return(isFunction(callback)?callback:defaultCallback)(value)}catch(e){return exceptionHandler(e),reject(e)}},wrappedErrback=function(reason){try{return(isFunction(errback)?errback:defaultErrback)(reason)}catch(e){return exceptionHandler(e),reject(e)}},wrappedProgressback=function(progress){try{return(isFunction(progressback)?progressback:defaultCallback)(progress)}catch(e){exceptionHandler(e)}};return nextTick(function(){ref(value).then(function(value){done||(done=!0,result.resolve(ref(value).then(wrappedCallback,wrappedErrback,wrappedProgressback)))},function(reason){done||(done=!0,result.resolve(wrappedErrback(reason)))},function(progress){done||result.notify(wrappedProgressback(progress))})}),result.promise};return{defer:defer,reject:reject,when:when,all:all}}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope");this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$isolateBindings={}}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function compileToFn(exp,name){var fn=$parse(exp);return assertArgFn(fn,name),fn}function initWatchVal(){}Scope.prototype={constructor:Scope,$new:function(isolate){var Child,child;return isolate?(child=new Scope,child.$root=this.$root,child.$$asyncQueue=this.$$asyncQueue,child.$$postDigestQueue=this.$$postDigestQueue):(Child=function(){},Child.prototype=this,child=new Child,child.$id=nextUid()),child["this"]=child,child.$$listeners={},child.$parent=this,child.$$watchers=child.$$nextSibling=child.$$childHead=child.$$childTail=null,child.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=child,this.$$childTail=child):this.$$childHead=this.$$childTail=child,child},$watch:function(watchExp,listener,objectEquality){var scope=this,get=compileToFn(watchExp,"watch"),array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};if(!isFunction(listener)){var listenFn=compileToFn(listener||noop,"listener");watcher.fn=function(newVal,oldVal,scope){listenFn(scope)}}if("string"==typeof watchExp&&get.constant){var originalFn=watcher.fn;watcher.fn=function(newVal,oldVal,scope){originalFn.call(this,newVal,oldVal,scope),arrayRemove(array,watcher)}}return array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher)}},$watchCollection:function(obj,listener){function $watchCollectionWatch(){newValue=objGetter(self);var newLength,key;if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)oldValue[i]!==newValue[i]&&(changeDetected++,oldValue[i]=newValue[i])}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,oldValue.hasOwnProperty(key)?oldValue[key]!==newValue[key]&&(changeDetected++,oldValue[key]=newValue[key]):(oldLength++,oldValue[key]=newValue[key],changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)oldValue.hasOwnProperty(key)&&!newValue.hasOwnProperty(key)&&(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}function $watchCollectionAction(){listener(newValue,oldValue,self)}var oldValue,newValue,self=this,changeDetected=0,objGetter=$parse(obj),internalArray=[],internalObject={},oldLength=0;return this.$watch($watchCollectionWatch,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,logMsg,asyncTask,asyncQueue=this.$$asyncQueue,postDigestQueue=this.$$postDigestQueue,ttl=TTL,target=this,watchLog=[];beginPhase("$digest");do{for(dirty=!1,current=target;asyncQueue.length;)try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression)}catch(e){$exceptionHandler(e)}do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{watch=watchers[length],watch&&(value=watch.get(current))!==(last=watch.last)&&!(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))&&(dirty=!0,watch.last=watch.eq?copy(value):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),logMsg=isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,logMsg+="; newVal: "+toJson(value)+"; oldVal: "+toJson(last),watchLog[logIdx].push(logMsg)))}catch(e){$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if(dirty&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,toJson(watchLog))}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if($rootScope!=this&&!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr){$rootScope.$$phase||$rootScope.$$asyncQueue.length||$browser.defer(function(){$rootScope.$$asyncQueue.length&&$rootScope.$digest()}),this.$$asyncQueue.push({scope:this,expression:expr})},$$postDigest:function(fn){this.$$postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$on:function(name,listener){var namedListeners=this.$$listeners[name];return namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener),function(){namedListeners[indexOf(namedListeners,listener)]=null}},$emit:function(name){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event;scope=scope.$parent}while(scope);return event},$broadcast:function(name){var listeners,i,length,target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(current=next,event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);return event}};var $rootScope=new Scope;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*(https?|ftp|file):|data:image\//;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return msie&&!(msie>=8)||(normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex))?uri:"unsafe:"+normalizedVal}}}function escapeForRegexp(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sniffer","$sceDelegate",function($parse,$sniffer,$sceDelegate){if(enabled&&$sniffer.msie&&$sniffer.msieDocumentMode<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=copy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:function(self,locals){return sce.getTrusted(type,parsed(self,locals))}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},documentMode=document.documentMode,vendorRegex=/^(Moz|webkit|O|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hashchange:"onhashchange"in $window&&(!documentMode||documentMode>7),hasEvent:function(event){if("input"==event&&9==msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,msie:msie,msieDocumentMode:documentMode}}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function($rootScope,$browser,$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,deferred=$q.defer(),promise=deferred.promise,skipApply=isDefined(invokeApply)&&!invokeApply;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var comparatorType=typeof comparator,predicates=[];predicates.check=function(value){for(var j=0;j<predicates.length;j++)if(!predicates[j](value))return!1;return!0},"function"!==comparatorType&&(comparator="boolean"===comparatorType&&comparator?function(obj,text){return angular.equals(obj,text)}:function(obj,text){return text=(""+text).toLowerCase(),(""+obj).toLowerCase().indexOf(text)>-1});var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comparator(obj,text);case"object":switch(typeof text){case"object":return comparator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)"$"==key?!function(){if(expression[key]){var path=key;predicates.push(function(value){return search(value,expression[path])})}}():!function(){if("undefined"!=typeof expression[key]){var path=key;predicates.push(function(value){return search(getter(value,path),expression[path])})}}();break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value)&&filtered.push(value)}return filtered}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,2).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(isNaN(number)||!isFinite(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?numStr="0":(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&number>-1&&1>number&&(formatedText=number.toFixed(fractionSize));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac));var pow=Math.pow(10,fractionSize);number=Math.round(number*pow)/pow;var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return parts.push(isNegative?pattern.negPre:pattern.posPre),parts.push(formatedText),parts.push(isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format){var fn,match,text="",parts=[];
if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object){return toJson(object,!0)}}function limitToFilter(){return function(input,limit){if(!isArray(input)&&!isString(input))return input;if(limit=int(limit),isString(input))return limit?limit>=0?input.slice(0,limit):input.slice(limit,input.length):"";var i,n,out=[];for(limit>input.length?limit=input.length:limit<-input.length&&(limit=-input.length),limit>0?(i=0,n=limit):(i=input.length+limit,n=input.length);n>i;i++)out.push(input[i]);return out}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return toBoolean(descending)?function(a,b){return comp(b,a)}:comp}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1==t2?("string"==t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}if(!isArray(array))return array;if(!sortPredicate)return array;sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],sortPredicate=map(sortPredicate,function(predicate){var descending=!1,get=predicate||identity;return isString(predicate)&&(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),get=$parse(predicate)),reverseComparator(function(a,b){return compare(get(a),get(b))},descending)});for(var arrayCopy=[],i=0;i<array.length;i++)arrayCopy.push(array[i]);return arrayCopy.sort(reverseComparator(comparator,reverseOrder))}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function FormController(element,attrs){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",element.removeClass((isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey).addClass((isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}var form=this,parentForm=element.parent().controller("form")||nullFormCtrl,invalidCount=0,errors=form.$error={},controls=[];form.$name=attrs.name||attrs.ngForm,form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,parentForm.$addControl(form),element.addClass(PRISTINE_CLASS),toggleValidCss(!0),form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(errors,function(queue,validationToken){form.$setValidity(validationToken,!0,control)}),arrayRemove(controls,control)},form.$setValidity=function(validationToken,isValid,control){var queue=errors[validationToken];if(isValid)queue&&(arrayRemove(queue,control),queue.length||(invalidCount--,invalidCount||(toggleValidCss(isValid),form.$valid=!0,form.$invalid=!1),errors[validationToken]=!1,toggleValidCss(!0,validationToken),parentForm.$setValidity(validationToken,!0,form)));else{if(invalidCount||toggleValidCss(isValid),queue){if(includes(queue,control))return}else errors[validationToken]=queue=[],invalidCount++,toggleValidCss(!1,validationToken),parentForm.$setValidity(validationToken,!1,form);queue.push(control),form.$valid=!1,form.$invalid=!0}},form.$setDirty=function(){element.removeClass(PRISTINE_CLASS).addClass(DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS),form.$dirty=!1,form.$pristine=!0,forEach(controls,function(control){control.$setPristine()})}}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1});var listener=function(){if(!composing){var value=element.val();toBoolean(attr.ngTrim||"T")&&(value=trim(value)),ctrl.$viewValue!==value&&scope.$apply(function(){ctrl.$setViewValue(value)})}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(){timeout||(timeout=$browser.defer(function(){listener(),timeout=null}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener()}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)};var patternValidator,match,pattern=attr.ngPattern,validate=function(regexp,value){return ctrl.$isEmpty(value)||regexp.test(value)?(ctrl.$setValidity("pattern",!0),value):(ctrl.$setValidity("pattern",!1),undefined)};if(pattern&&(match=pattern.match(/^\/(.*)\/([gim]*)$/),match?(pattern=new RegExp(match[1],match[2]),patternValidator=function(value){return validate(pattern,value)}):patternValidator=function(value){var patternObj=scope.$eval(pattern);if(!patternObj||!patternObj.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",pattern,patternObj,startingTag(element));return validate(patternObj,value)},ctrl.$formatters.push(patternValidator),ctrl.$parsers.push(patternValidator)),attr.ngMinlength){var minlength=int(attr.ngMinlength),minLengthValidator=function(value){return!ctrl.$isEmpty(value)&&value.length<minlength?(ctrl.$setValidity("minlength",!1),undefined):(ctrl.$setValidity("minlength",!0),value)};ctrl.$parsers.push(minLengthValidator),ctrl.$formatters.push(minLengthValidator)}if(attr.ngMaxlength){var maxlength=int(attr.ngMaxlength),maxLengthValidator=function(value){return!ctrl.$isEmpty(value)&&value.length>maxlength?(ctrl.$setValidity("maxlength",!1),undefined):(ctrl.$setValidity("maxlength",!0),value)};ctrl.$parsers.push(maxLengthValidator),ctrl.$formatters.push(maxLengthValidator)}}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(textInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$parsers.push(function(value){var empty=ctrl.$isEmpty(value);return empty||NUMBER_REGEXP.test(value)?(ctrl.$setValidity("number",!0),""===value?null:empty?value:parseFloat(value)):(ctrl.$setValidity("number",!1),undefined)}),ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?"":""+value}),attr.min){var minValidator=function(value){var min=parseFloat(attr.min);return!ctrl.$isEmpty(value)&&min>value?(ctrl.$setValidity("min",!1),undefined):(ctrl.$setValidity("min",!0),value)};ctrl.$parsers.push(minValidator),ctrl.$formatters.push(minValidator)}if(attr.max){var maxValidator=function(value){var max=parseFloat(attr.max);return!ctrl.$isEmpty(value)&&value>max?(ctrl.$setValidity("max",!1),undefined):(ctrl.$setValidity("max",!0),value)};ctrl.$parsers.push(maxValidator),ctrl.$formatters.push(maxValidator)}ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)||isNumber(value)?(ctrl.$setValidity("number",!0),value):(ctrl.$setValidity("number",!1),undefined)})}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var urlValidator=function(value){return ctrl.$isEmpty(value)||URL_REGEXP.test(value)?(ctrl.$setValidity("url",!0),value):(ctrl.$setValidity("url",!1),undefined)};ctrl.$formatters.push(urlValidator),ctrl.$parsers.push(urlValidator)}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var emailValidator=function(value){return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)?(ctrl.$setValidity("email",!0),value):(ctrl.$setValidity("email",!1),undefined)};ctrl.$formatters.push(emailValidator),ctrl.$parsers.push(emailValidator)}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid()),element.on("click",function(){element[0].checked&&scope.$apply(function(){ctrl.$setViewValue(attr.value)})}),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function checkboxInputType(scope,element,attr,ctrl){var trueValue=attr.ngTrueValue,falseValue=attr.ngFalseValue;isString(trueValue)||(trueValue=!0),isString(falseValue)||(falseValue=!1),element.on("click",function(){scope.$apply(function(){ctrl.$setViewValue(element[0].checked)})}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value!==trueValue},ctrl.$formatters.push(function(value){return value===trueValue}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,function(){return{restrict:"AC",link:function(scope,element,attr){function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=flattenClasses(newVal||"");oldVal?equals(newVal,oldVal)||attr.$updateClass(newClasses,flattenClasses(oldVal)):attr.$addClass(newClasses)}oldVal=copy(newVal)}function flattenClasses(classVal){if(isArray(classVal))return classVal.join(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&classes.push(k)}),classes.join(" ")}return classVal}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==old$index&1){var classes=flattenClasses(scope.$eval(attr[name]));mod===selector?attr.$addClass(classes):attr.$removeClass(classes)}})}}}}var lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,nodeName_,slice=[].slice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=(window.angular,window.angular||(window.angular={})),uid=["0","0","0"];msie=int((/msie (\d+)/.exec(lowercase(navigator.userAgent))||[])[1]),isNaN(msie)&&(msie=int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent))||[])[1])),noop.$inject=[],identity.$inject=[];var trim=function(){return String.prototype.trim?function(value){return isString(value)?value.trim():value}:function(value){return isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();nodeName_=9>msie?function(element){return element=element.nodeName?element:element[0],element.scopeName&&"HTML"!=element.scopeName?uppercase(element.scopeName+":"+element.nodeName):element.nodeName}:function(element){return element.nodeName?element.nodeName:element[0].nodeName};var SNAKE_CASE_REGEXP=/[A-Z]/g,version={full:"1.2.3",major:1,minor:2,dot:3,codeName:"unicorn-zapper"},jqCache=JQLite.cache={},jqName=JQLite.expando="ng-"+(new Date).getTime(),jqId=1,addEventListenerFn=window.document.addEventListener?function(element,type,fn){element.addEventListener(type,fn,!1)}:function(element,type,fn){element.attachEvent("on"+type,fn)},removeEventListenerFn=window.document.removeEventListener?function(element,type,fn){element.removeEventListener(type,fn,!1)}:function(element,type,fn){element.detachEvent("on"+type,fn)},SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,jqLiteMinErr=minErr("jqLite"),JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[uppercase(value)]=!0}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite(element).data("$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite(element).data("$isolateScope")||jqLite(element).data("$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value)){var val;return 8>=msie&&(val=element.currentStyle&&element.currentStyle[name],""===val&&(val="auto")),val=val||element.style[name],8>=msie&&(val=""===val?undefined:val),val}element.style[name]=value},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){var textProp=NODE_TYPE_TEXT_PROPERTY[element.nodeType];return isUndefined(value)?textProp?element[textProp]:"":void(element[textProp]=value)}var NODE_TYPE_TEXT_PROPERTY=[];return 9>msie?(NODE_TYPE_TEXT_PROPERTY[1]="innerText",NODE_TYPE_TEXT_PROPERTY[3]="nodeValue"):NODE_TYPE_TEXT_PROPERTY[1]=NODE_TYPE_TEXT_PROPERTY[3]="textContent",getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if("SELECT"===nodeName_(element)&&element.multiple){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);element.innerHTML=value}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key;if((2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;i<this.length;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(this.length,1):this.length,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<this.length;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,dealoc:jqLiteDealoc,on:function onFn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");events||jqLiteExpandoStore(element,"events",events={}),handle||jqLiteExpandoStore(element,"handle",handle=createEventHandler(element,events)),forEach(type.split(" "),function(type){var eventFns=events[type];if(!eventFns){if("mouseenter"==type||"mouseleave"==type){var contains=document.body.contains||document.body.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};events[type]=[];var eventmap={mouseleave:"mouseout",mouseenter:"mouseover"};onFn(element,eventmap[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!contains(target,related))&&handle(event,type)})}else addEventListenerFn(element,type,handle),events[type]=[];eventFns=events[type]}eventFns.push(fn)})},off:jqLiteOff,replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){1===element.nodeType&&children.push(element)}),children},contents:function(element){return element.childNodes||[]},append:function(element,node){forEach(new JQLite(node),function(child){(1===element.nodeType||11===element.nodeType)&&element.appendChild(child)})},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode)[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:function(element){jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)},after:function(element,newElement){var index=element,parent=element.parentNode;forEach(new JQLite(newElement),function(node){parent.insertBefore(node,index.nextSibling),index=node})},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){isUndefined(condition)&&(condition=!jqLiteHasClass(element,selector)),(condition?jqLiteAddClass:jqLiteRemoveClass)(element,selector)},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){if(element.nextElementSibling)return element.nextElementSibling;for(var elm=element.nextSibling;null!=elm&&1!==elm.nodeType;)elm=elm.nextSibling;return elm},find:function(element,selector){return element.getElementsByTagName(selector)},clone:jqLiteClone,triggerHandler:function(element,eventName,eventData){var eventFns=(jqLiteExpandoStore(element,"events")||{})[eventName];eventData=eventData||[];var event=[{preventDefault:noop,stopPropagation:noop}];forEach(eventFns,function(fn){fn.apply(element,event.concat(eventData))})}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0;i<this.length;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key)]=value},get:function(key){return this[hashKey(key)]},remove:function(key){var value=this[key=hashKey(key)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector"),$animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.$get=["$timeout",function($timeout){return{enter:function(element,parent,after,done){after?after.after(element):(parent&&parent[0]||(parent=after.parent()),parent.append(element)),done&&$timeout(done,0,!1)},leave:function(element,done){element.remove(),done&&$timeout(done,0,!1)},move:function(element,parent,after,done){this.enter(element,parent,after,done)},addClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),done&&$timeout(done,0,!1)},removeClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),done&&$timeout(done,0,!1)},enabled:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^(x[\:\-_]|data[\:\-_])/i,XHR=window.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e1){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e2){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e3){}throw minErr("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")},$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");LocationHashbangInHtml5Url.prototype=LocationHashbangUrl.prototype=LocationHtml5Url.prototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url,replace){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return match[1]&&this.path(decodeURIComponent(match[1])),(match[2]||match[1])&&this.search(match[3]||""),this.hash(match[5]||"",replace),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search))this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",identity),replace:function(){return this.$$replace=!0,this}};var promiseWarning,$parseMinErr=minErr("$parse"),promiseWarningCache={},OPERATORS={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:noop,"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"^":function(self,locals,a,b){return a(self,locals)^b(self,locals)},"=":noop,"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"&":function(self,locals,a,b){return a(self,locals)&b(self,locals)},"|":function(self,locals,a,b){return b(self,locals)(self,locals,a(self,locals))},"!":function(self,locals,a){return!a(self,locals)}},ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){this.text=text,this.index=0,this.ch=undefined,this.lastCh=":",this.tokens=[];for(var token,json=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===json[0]&&(token=this.tokens[this.tokens.length-1])&&(token.json=-1===token.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&json.unshift(this.ch),this.is("}]")&&json.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var ch2=this.ch+this.peek(),ch3=ch2+this.peek(2),fn=OPERATORS[this.ch],fn2=OPERATORS[ch2],fn3=OPERATORS[ch3];fn3?(this.tokens.push({index:this.index,text:ch3,fn:fn3}),this.index+=3):fn2?(this.tokens.push({index:this.index,text:ch2,fn:fn2}),this.index+=2):fn?(this.tokens.push({index:this.index,text:this.ch,fn:fn,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(chars){return-1!==chars.indexOf(this.ch)},was:function(chars){return-1!==chars.indexOf(this.lastCh)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||" "===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}number=1*number,this.tokens.push({index:start,text:number,json:!0,fn:function(){return number}})},readIdent:function(){for(var lastDot,peekIndex,methodName,ch,parser=this,ident="",start=this.index;this.index<this.text.length&&(ch=this.text.charAt(this.index),"."===ch||this.isIdent(ch)||this.isNumber(ch));)"."===ch&&(lastDot=this.index),ident+=ch,this.index++;if(lastDot)for(peekIndex=this.index;peekIndex<this.text.length;){if(ch=this.text.charAt(peekIndex),"("===ch){methodName=ident.substr(lastDot-start+1),ident=ident.substr(0,lastDot-start),this.index=peekIndex;break}if(!this.isWhitespace(ch))break;peekIndex++}var token={index:start,text:ident};if(OPERATORS.hasOwnProperty(ident))token.fn=OPERATORS[ident],token.json=OPERATORS[ident];else{var getter=getterFn(ident,this.options,this.text);token.fn=extend(function(self,locals){return getter(self,locals)},{assign:function(self,value){return setter(self,ident,value,parser.text,parser.options)}})}this.tokens.push(token),methodName&&(this.tokens.push({index:lastDot,text:".",json:!1}),this.tokens.push({index:lastDot+1,text:methodName,json:!1}))},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep?rep:ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,string:string,json:!0,fn:function(){return string}});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=function(){return 0},Parser.prototype={constructor:Parser,parse:function(text,json){this.text=text,this.json=json,this.tokens=this.lexer.lex(text),json&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:text,index:0})});var value=json?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;if(this.expect("("))primary=this.filterChain(),this.consume(")");else if(this.expect("["))primary=this.arrayDeclaration();else if(this.expect("{"))primary=this.object();else{var token=this.expect();primary=token.fn,primary||this.throwError("not a primary expression",token),token.json&&(primary.constant=!0,primary.literal=!0)}for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){if(this.tokens.length>0){var token=this.tokens[0],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.json&&!token.json&&this.throwError("is not valid json",token),this.tokens.shift(),token):!1},consume:function(e1){this.expect(e1)||this.throwError("is unexpected, expecting ["+e1+"]",this.peek())},unaryFn:function(fn,right){return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant})},ternaryFn:function(left,middle,right){return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})},binaryFn:function(left,fn,right){return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0;i<statements.length;i++){var statement=statements[i];statement&&(value=statement(self,locals))}return value}},filterChain:function(){for(var token,left=this.expression();;){if(!(token=this.expect("|")))return left;
left=this.binaryFn(left,token.fn,this.filter())}},filter:function(){for(var token=this.expect(),fn=this.$filter(token.text),argsFn=[];;){if(!(token=this.expect(":"))){var fnInvoke=function(self,locals,input){for(var args=[input],i=0;i<argsFn.length;i++)args.push(argsFn[i](self,locals));return fn.apply(self,args)};return function(){return fnInvoke}}argsFn.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),function(scope,locals){return left.assign(scope,right(scope,locals),locals)}):left},ternary:function(){var middle,token,left=this.logicalOR();return(token=this.expect("?"))?(middle=this.ternary(),(token=this.expect(":"))?this.ternaryFn(left,middle,this.ternary()):void this.throwError("expected :",token)):left},logicalOR:function(){for(var token,left=this.logicalAND();;){if(!(token=this.expect("||")))return left;left=this.binaryFn(left,token.fn,this.logicalAND())}},logicalAND:function(){var token,left=this.equality();return(token=this.expect("&&"))&&(left=this.binaryFn(left,token.fn,this.logicalAND())),left},equality:function(){var token,left=this.relational();return(token=this.expect("==","!=","===","!=="))&&(left=this.binaryFn(left,token.fn,this.equality())),left},relational:function(){var token,left=this.additive();return(token=this.expect("<",">","<=",">="))&&(left=this.binaryFn(left,token.fn,this.relational())),left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.fn,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.fn,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.fn,this.unary()):(token=this.expect("!"))?this.unaryFn(token.fn,this.unary()):this.primary()},fieldAccess:function(object){var parser=this,field=this.expect().text,getter=getterFn(field,this.options,this.text);return extend(function(scope,locals,self){return getter(self||object(scope,locals),locals)},{assign:function(scope,value,locals){return setter(object(scope,locals),field,value,parser.text,parser.options)}})},objectIndex:function(obj){var parser=this,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,p,o=obj(self,locals),i=indexFn(self,locals);return o?(v=ensureSafeObject(o[i],parser.text),v&&v.then&&parser.options.unwrapPromises&&(p=v,"$$v"in v||(p.$$v=undefined,p.then(function(val){p.$$v=val})),v=v.$$v),v):undefined},{assign:function(self,value,locals){var key=indexFn(self,locals),safe=ensureSafeObject(obj(self,locals),parser.text);return safe[key]=value}})},functionCall:function(fn,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var parser=this;return function(scope,locals){for(var args=[],context=contextGetter?contextGetter(scope,locals):scope,i=0;i<argsFn.length;i++)args.push(argsFn[i](scope,locals));var fnPtr=fn(scope,locals,context)||noop;ensureSafeObject(context,parser.text),ensureSafeObject(fnPtr,parser.text);var v=fnPtr.apply?fnPtr.apply(context,args):fnPtr(args[0],args[1],args[2],args[3],args[4]);return ensureSafeObject(v,parser.text)}},arrayDeclaration:function(){var elementFns=[],allConstant=!0;if("]"!==this.peekToken().text)do{var elementFn=this.expression();elementFns.push(elementFn),elementFn.constant||(allConstant=!1)}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0;i<elementFns.length;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:allConstant})},object:function(){var keyValues=[],allConstant=!0;if("}"!==this.peekToken().text)do{var token=this.expect(),key=token.string||token.text;this.consume(":");var value=this.expression();keyValues.push({key:key,value:value}),value.constant||(allConstant=!1)}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0;i<keyValues.length;i++){var keyValue=keyValues[i];object[keyValue.key]=keyValue.value(self,locals)}return object},{literal:!0,constant:allConstant})}};var getterFnCache={},$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href,!0);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return 8>=msie&&(attr.href||attr.name||attr.$set("href",""),element.append(document.createComment("IE fix"))),function(scope,element){element.on("click",function(event){element.attr("href")||event.preventDefault()})}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:100,compile:function(){return function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){attr.$observe(normalized,function(value){value&&(attr.$set(attrName,value),msie&&element.prop(attrName,attr[attrName]))})}}}});var nullFormCtrl={$addControl:noop,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop};FormController.$inject=["$element","$attrs","$scope"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var preventDefaultListener=function(event){event.preventDefault?event.preventDefault():event.returnValue=!1};addEventListenerFn(formElement[0],"submit",preventDefaultListener),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",preventDefaultListener)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias),parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,alias,undefined,alias),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,inputType={text:textInputType,number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop},inputDirective=["$browser","$sniffer",function($browser,$sniffer){return{restrict:"E",require:"?ngModel",link:function(scope,element,attr,ctrl){ctrl&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrl,$sniffer,$browser)}}}],VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse",function($scope,$exceptionHandler,$attr,$element,$parse){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$element.removeClass((isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey).addClass((isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=$attr.name;var ngModelGet=$parse($attr.ngModel),ngModelSet=ngModelGet.assign;if(!ngModelSet)throw minErr("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element));this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,invalidCount=0,$error=this.$error={};$element.addClass(PRISTINE_CLASS),toggleValidCss(!0),this.$setValidity=function(validationErrorKey,isValid){$error[validationErrorKey]!==!isValid&&(isValid?($error[validationErrorKey]&&invalidCount--,invalidCount||(toggleValidCss(!0),this.$valid=!0,this.$invalid=!1)):(toggleValidCss(!1),this.$invalid=!0,this.$valid=!1,invalidCount++),$error[validationErrorKey]=!isValid,toggleValidCss(isValid,validationErrorKey),parentForm.$setValidity(validationErrorKey,isValid,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,$element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS)},this.$setViewValue=function(value){this.$viewValue=value,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,$element.removeClass(PRISTINE_CLASS).addClass(DIRTY_CLASS),parentForm.$setDirty()),forEach(this.$parsers,function(fn){value=fn(value)}),this.$modelValue!==value&&(this.$modelValue=value,ngModelSet($scope,value),forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}}))};var ctrl=this;$scope.$watch(function(){var value=ngModelGet($scope);if(ctrl.$modelValue!==value){var formatters=ctrl.$formatters,idx=formatters.length;for(ctrl.$modelValue=value;idx--;)value=formatters[idx](value);ctrl.$viewValue!==value&&(ctrl.$viewValue=value,ctrl.$render())}})}],ngModelDirective=function(){return{require:["ngModel","^?form"],controller:NgModelController,link:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;formCtrl.$addControl(modelCtrl),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})}}},ngChangeDirective=valueFn({require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),requiredDirective=function(){return{require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){attr.required=!0;var validator=function(value){return attr.required&&ctrl.$isEmpty(value)?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),value)};ctrl.$formatters.push(validator),ctrl.$parsers.unshift(validator),attr.$observe("required",function(){validator(ctrl.$viewValue)})}}}},ngListDirective=function(){return{require:"ngModel",link:function(scope,element,attr,ctrl){var match=/\/(.*)\//.exec(attr.ngList),separator=match&&new RegExp(match[1])||attr.ngList||",",parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trim(value))}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(", "):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=ngDirective(function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.ngBind),scope.$watch(attr.ngBind,function(value){element.text(value==undefined?"":value)})}),ngBindTemplateDirective=["$interpolate",function($interpolate){return function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));element.addClass("ng-binding").data("$binding",interpolateFn),attr.$observe("ngBindTemplate",function(value){element.text(value)})}}],ngBindHtmlDirective=["$sce","$parse",function($sce,$parse){return function(scope,element,attr){function getStringValue(){return(parsed(scope)||"").toString()}element.addClass("ng-binding").data("$binding",attr.ngBindHtml);var parsed=$parse(attr.ngBindHtml);scope.$watch(getStringValue,function(){element.html($sce.getTrustedHtml(parsed(scope))||"")})}}],ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{scope:!0,controller:"@",priority:500}}],ngEventDirectives={};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(name){var directiveName=directiveNormalize("ng-"+name);ngEventDirectives[directiveName]=["$parse",function($parse){return{compile:function($element,attr){var fn=$parse(attr[directiveName]);return function(scope,element){element.on(lowercase(name),function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}}]});var ngIfDirective=["$animate",function($animate){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope;$scope.$watch($attr.ngIf,function(value){toBoolean(value)?childScope||(childScope=$scope.$new(),$transclude(childScope,function(clone){block={startNode:clone[0],endNode:clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" ")},$animate.enter(clone,$element.parent(),$element)})):(childScope&&(childScope.$destroy(),childScope=null),block&&($animate.leave(getBlockElements(block)),block=null))})}}}],ngIncludeDirective=["$http","$templateCache","$anchorScroll","$compile","$animate","$sce",function($http,$templateCache,$anchorScroll,$compile,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement),currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($http.get(src,{cache:$templateCache}).success(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new(),clone=$transclude(newScope,noop);cleanupLastIncludeContent(),currentScope=newScope,currentElement=clone,currentElement.html(response),$animate.enter(currentElement,null,$element,afterAnimation),$compile(currentElement.contents())(currentScope),currentScope.$emit("$includeContentLoaded"),scope.$eval(onloadExp)}}).error(function(){thisChangeId===changeCounter&&cleanupLastIncludeContent()}),scope.$emit("$includeContentRequested")):cleanupLastIncludeContent()})}}}}],ngInitDirective=ngDirective({compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g;return{restrict:"EA",link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),isWhen=/^when(Minus)?(.+)$/;forEach(attr,function(expression,attributeName){isWhen.test(attributeName)&&(whens[lowercase(attributeName.replace("when","").replace("Minus","-"))]=element.attr(attr.$attr[attributeName]))}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,startSymbol+numberExp+"-"+offset+endSymbol))}),scope.$watch(function(){var value=parseFloat(scope.$eval(numberExp));return isNaN(value)?"":(value in whens||(value=$locale.pluralCat(value-offset)),whensExpFns[value](scope,element,!0))},function(newVal){element.text(newVal)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var trackByExp,trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,lhs,rhs,valueIdentifier,keyIdentifier,expression=$attr.ngRepeat,match=expression.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),hashFnLocals={$id:hashKey};if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);if(lhs=match[1],rhs=match[2],trackByExp=match[4],trackByExp?(trackByExpGetter=$parse(trackByExp),trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)}):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);valueIdentifier=match[3]||match[1],keyIdentifier=match[2];var lastBlockMap={};$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,arrayLength,childScope,key,value,trackById,trackByIdFn,collectionKeys,block,elementsToRemove,previousNode=$element[0],nextBlockMap={},nextBlockOrder=[];if(isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(key in collection)collection.hasOwnProperty(key)&&"$"!=key.charAt(0)&&collectionKeys.push(key);collectionKeys.sort()}for(arrayLength=collectionKeys.length,length=nextBlockOrder.length=collectionKeys.length,index=0;length>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),assertNotHasOwnProperty(trackById,"`track by` id"),lastBlockMap.hasOwnProperty(trackById))block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap.hasOwnProperty(trackById))throw forEach(nextBlockOrder,function(block){block&&block.startNode&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",expression,trackById);nextBlockOrder[index]={id:trackById},nextBlockMap[trackById]=!1}for(key in lastBlockMap)lastBlockMap.hasOwnProperty(key)&&(block=lastBlockMap[key],elementsToRemove=getBlockElements(block),$animate.leave(elementsToRemove),forEach(elementsToRemove,function(element){element[NG_REMOVED]=!0}),block.scope.$destroy());for(index=0,length=collectionKeys.length;length>index;index++){if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],nextBlockOrder[index-1]&&(previousNode=nextBlockOrder[index-1].endNode),block.startNode){childScope=block.scope,nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);block.startNode!=nextNode&&$animate.move(getBlockElements(block),null,jqLite(previousNode)),previousNode=block.endNode}else childScope=$scope.$new();childScope[valueIdentifier]=value,keyIdentifier&&(childScope[keyIdentifier]=key),childScope.$index=index,childScope.$first=0===index,childScope.$last=index===arrayLength-1,childScope.$middle=!(childScope.$first||childScope.$last),childScope.$odd=!(childScope.$even=0===(1&index)),block.startNode||$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngRepeat: "+expression+" "),$animate.enter(clone,null,jqLite(previousNode)),previousNode=clone,block.scope=childScope,block.startNode=previousNode&&previousNode.endNode?previousNode.endNode:clone[0],block.endNode=clone[clone.length-1],nextBlockMap[block.id]=block})}lastBlockMap=nextBlockMap})}}}],ngShowDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[toBoolean(value)?"removeClass":"addClass"](element,"ng-hide")})}}],ngHideDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[toBoolean(value)?"addClass":"removeClass"](element,"ng-hide")})}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var selectedTranscludes,selectedElements,watchExpr=attr.ngSwitch||attr.on,selectedScopes=[];scope.$watch(watchExpr,function(value){for(var i=0,ii=selectedScopes.length;ii>i;i++)selectedScopes[i].$destroy(),$animate.leave(selectedElements[i]);selectedElements=[],selectedScopes=[],(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&(scope.$eval(attr.change),forEach(selectedTranscludes,function(selectedTransclude){var selectedScope=scope.$new();selectedScopes.push(selectedScope),selectedTransclude.transclude(selectedScope,function(caseElement){var anchor=selectedTransclude.element;selectedElements.push(caseElement),$animate.enter(caseElement,anchor.parent(),anchor)})}))})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",compile:function(element,attrs){return function(scope,element,attr,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({controller:["$element","$transclude",function($element,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));this.$transclude=$transclude}],link:function($scope,$element,$attrs,controller){controller.$transclude(function(clone){$element.html(""),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove())},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue==value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=copy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function render(){var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionGroups={"":[]},optionGroupNames=[""],modelValue=ctrl.$modelValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,locals={},selectedSet=!1;if(multiple)if(trackFn&&isArray(modelValue)){selectedSet=new HashMap([]);for(var trackIndex=0;trackIndex<modelValue.length;trackIndex++)locals[valueName]=modelValue[trackIndex],selectedSet.put(trackFn(scope,locals),modelValue[trackIndex])}else selectedSet=new HashMap(modelValue);for(index=0;length=keys.length,length>index;index++){if(key=index,keyName){if(key=keys[index],"$"===key.charAt(0))continue;locals[keyName]=key}if(locals[valueName]=values[key],optionGroupName=groupByFn(scope,locals)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),multiple)selected=isDefined(selectedSet.remove(trackFn?trackFn(scope,locals):valueFn(scope,locals)));else{if(trackFn){var modelCast={};modelCast[valueName]=modelValue,selected=trackFn(scope,modelCast)===trackFn(scope,locals)}else selected=modelValue===valueFn(scope,locals);selectedSet=selectedSet||selected}label=displayFn(scope,locals),label=isDefined(label)?label:"",optionGroup.push({id:trackFn?trackFn(scope,locals):keyName?keys[index]:index,label:label,selected:selected})}for(multiple||(nullOption||null===modelValue?optionGroups[""].unshift({id:"",label:"",selected:!selectedSet}):selectedSet||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&lastElement.text(existingOption.label=option.label),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),lastElement[0].selected!==option.selected&&lastElement.prop("selected",existingOption.selected=option.selected)):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).attr("selected",option.selected).text(option.label),existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected}),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)existingOptions.pop().element.remove()}for(;optionGroupsCache.length>groupIndex;)optionGroupsCache.pop()[0].element.remove()}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,optionGroupsCache=[[{element:selectElement,label:""}]];nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.html(""),selectElement.on("change",function(){scope.$apply(function(){var optionGroup,key,value,optionElement,index,groupIndex,length,groupLength,trackIndex,collection=valuesFn(scope)||[],locals={};if(multiple){for(value=[],groupIndex=0,groupLength=optionGroupsCache.length;groupLength>groupIndex;groupIndex++)for(optionGroup=optionGroupsCache[groupIndex],index=1,length=optionGroup.length;length>index;index++)if((optionElement=optionGroup[index].element)[0].selected){if(key=optionElement.val(),keyName&&(locals[keyName]=key),trackFn)for(trackIndex=0;trackIndex<collection.length&&(locals[valueName]=collection[trackIndex],trackFn(scope,locals)!=key);trackIndex++);else locals[valueName]=collection[key];value.push(valueFn(scope,locals))}}else if(key=selectElement.val(),"?"==key)value=undefined;else if(""===key)value=null;else if(trackFn){for(trackIndex=0;trackIndex<collection.length;trackIndex++)if(locals[valueName]=collection[trackIndex],trackFn(scope,locals)==key){value=valueFn(scope,locals);break
}}else locals[valueName]=collection[key],keyName&&(locals[keyName]=key),value=valueFn(scope,locals);ctrl.$setViewValue(value)})}),ctrl.$render=render,scope.$watch(render)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}if(selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(attr.required||attr.ngRequired)){var requiredValidator=function(value){return ngModelCtrl.$setValidity("required",!attr.required||value&&value.length),value};ngModelCtrl.$parsers.push(requiredValidator),ngModelCtrl.$formatters.unshift(requiredValidator),attr.$observe("required",function(){requiredValidator(ngModelCtrl.$viewValue)})}optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound?element.prop("selected",!1):selectCtrl=nullSelectCtrl,interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),newVal!==oldVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal)}):selectCtrl.addOption(attr.value),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!0});bindJQuery(),publishExternalAPI(angular),jqLite(document).ready(function(){angularInit(document,bootstrap)})}(window,document),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-start{border-spacing:1px 1px;-ms-zoom:1.0001;}.ng-animate-active{border-spacing:0px 0px;-ms-zoom:1;}</style>'),function(window,angular,undefined){"use strict";angular.module("ngAnimate",["ng"]).config(["$provide","$animateProvider",function($provide,$animateProvider){var noop=angular.noop,forEach=angular.forEach,selectors=$animateProvider.$$selectors,ELEMENT_NODE=1,NG_ANIMATE_STATE="$$ngAnimateState",NG_ANIMATE_CLASS_NAME="ng-animate",rootAnimateState={running:!0};$provide.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$timeout","$rootScope","$document",function($delegate,$injector,$sniffer,$rootElement,$timeout,$rootScope){function lookup(name){if(name){var matches=[],flagMap={},classes=name.substr(1).split(".");($sniffer.transitions||$sniffer.animations)&&classes.push("");for(var i=0;i<classes.length;i++){var klass=classes[i],selectorFactoryName=selectors[klass];selectorFactoryName&&!flagMap[klass]&&(matches.push($injector.get(selectorFactoryName)),flagMap[klass]=!0)}return matches}}function performAnimation(animationEvent,className,element,parentElement,afterElement,domOperation,doneCallback){function onBeforeAnimationsComplete(cancelled){if(fireDOMOperation(),cancelled===!0)return void closeAnimation();var data=element.data(NG_ANIMATE_STATE);data&&(data.done=closeAnimation,element.data(NG_ANIMATE_STATE,data)),invokeRegisteredAnimationFns(animations,"after",closeAnimation)}function invokeRegisteredAnimationFns(animations,phase,allAnimationFnsComplete){function progress(index,phase){var phaseCompletionFlag=phase+"Complete",currentAnimation=animations[index];currentAnimation[phaseCompletionFlag]=!0,(currentAnimation[endFnName]||noop)();for(var i=0;i<animations.length;i++)if(!animations[i][phaseCompletionFlag])return;allAnimationFnsComplete()}var endFnName=phase+"End";forEach(animations,function(animation,index){var animationPhaseCompleted=function(){progress(index,phase)};return"before"!=phase||"enter"!=animationEvent&&"move"!=animationEvent?void(animation[phase]?animation[endFnName]=isClassBased?animation[phase](element,className,animationPhaseCompleted):animation[phase](element,animationPhaseCompleted):animationPhaseCompleted()):void animationPhaseCompleted()})}function fireDoneCallbackAsync(){doneCallback&&$timeout(doneCallback,0,!1)}function fireDOMOperation(){fireDOMOperation.hasBeenRun||(fireDOMOperation.hasBeenRun=!0,domOperation())}function closeAnimation(){if(!closeAnimation.hasBeenRun){closeAnimation.hasBeenRun=!0;var data=element.data(NG_ANIMATE_STATE);data&&(isClassBased?cleanup(element):(data.closeAnimationTimeout=$timeout(function(){cleanup(element)},0,!1),element.data(NG_ANIMATE_STATE,data))),fireDoneCallbackAsync()}}var currentClassName=element.attr("class")||"",classes=currentClassName+" "+className,animationLookup=(" "+classes).replace(/\s+/g,".");parentElement||(parentElement=afterElement?afterElement.parent():element.parent());var matches=lookup(animationLookup),isClassBased="addClass"==animationEvent||"removeClass"==animationEvent,ngAnimateState=element.data(NG_ANIMATE_STATE)||{};if(animationsDisabled(element,parentElement)||0===matches.length)return fireDOMOperation(),void closeAnimation();var animations=[];if(ngAnimateState.running&&isClassBased&&ngAnimateState.structural||forEach(matches,function(animation){if(!animation.allowCancel||animation.allowCancel(element,animationEvent,className)){var beforeFn,afterFn=animation[animationEvent];"leave"==animationEvent?(beforeFn=afterFn,afterFn=null):beforeFn=animation["before"+animationEvent.charAt(0).toUpperCase()+animationEvent.substr(1)],animations.push({before:beforeFn,after:afterFn})}}),0===animations.length)return fireDOMOperation(),void fireDoneCallbackAsync();var futureClassName=" "+currentClassName+" ";ngAnimateState.running&&($timeout.cancel(ngAnimateState.closeAnimationTimeout),cleanup(element),cancelAnimations(ngAnimateState.animations),ngAnimateState.beforeComplete?(ngAnimateState.done||noop)(!0):isClassBased&&!ngAnimateState.structural&&(futureClassName="removeClass"==ngAnimateState.event?futureClassName.replace(ngAnimateState.className,""):futureClassName+ngAnimateState.className+" "));var classNameToken=" "+className+" ";return"addClass"==animationEvent&&futureClassName.indexOf(classNameToken)>=0||"removeClass"==animationEvent&&-1==futureClassName.indexOf(classNameToken)?(fireDOMOperation(),void fireDoneCallbackAsync()):(element.addClass(NG_ANIMATE_CLASS_NAME),element.data(NG_ANIMATE_STATE,{running:!0,event:animationEvent,className:className,structural:!isClassBased,animations:animations,done:onBeforeAnimationsComplete}),void invokeRegisteredAnimationFns(animations,"before",onBeforeAnimationsComplete))}function cancelChildAnimations(element){var node=element[0];node.nodeType==ELEMENT_NODE&&forEach(node.querySelectorAll("."+NG_ANIMATE_CLASS_NAME),function(element){element=angular.element(element);var data=element.data(NG_ANIMATE_STATE);data&&(cancelAnimations(data.animations),cleanup(element))})}function cancelAnimations(animations){var isCancelledFlag=!0;forEach(animations,function(animation){animations.beforeComplete||(animation.beforeEnd||noop)(isCancelledFlag),animations.afterComplete||(animation.afterEnd||noop)(isCancelledFlag)})}function cleanup(element){element[0]==$rootElement[0]?rootAnimateState.disabled||(rootAnimateState.running=!1,rootAnimateState.structural=!1):(element.removeClass(NG_ANIMATE_CLASS_NAME),element.removeData(NG_ANIMATE_STATE))}function animationsDisabled(element,parentElement){if(rootAnimateState.disabled)return!0;if(element[0]==$rootElement[0])return rootAnimateState.disabled||rootAnimateState.running;do{if(0===parentElement.length)break;var isRoot=parentElement[0]==$rootElement[0],state=isRoot?rootAnimateState:parentElement.data(NG_ANIMATE_STATE),result=state&&(!!state.disabled||!!state.running);if(isRoot||result)return result;if(isRoot)return!0}while(parentElement=parentElement.parent());return!0}return $rootElement.data(NG_ANIMATE_STATE,rootAnimateState),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){rootAnimateState.running=!1})}),{enter:function(element,parentElement,afterElement,doneCallback){this.enabled(!1,element),$delegate.enter(element,parentElement,afterElement),$rootScope.$$postDigest(function(){performAnimation("enter","ng-enter",element,parentElement,afterElement,noop,doneCallback)})},leave:function(element,doneCallback){cancelChildAnimations(element),this.enabled(!1,element),$rootScope.$$postDigest(function(){performAnimation("leave","ng-leave",element,null,null,function(){$delegate.leave(element)},doneCallback)})},move:function(element,parentElement,afterElement,doneCallback){cancelChildAnimations(element),this.enabled(!1,element),$delegate.move(element,parentElement,afterElement),$rootScope.$$postDigest(function(){performAnimation("move","ng-move",element,parentElement,afterElement,noop,doneCallback)})},addClass:function(element,className,doneCallback){performAnimation("addClass",className,element,null,null,function(){$delegate.addClass(element,className)},doneCallback)},removeClass:function(element,className,doneCallback){performAnimation("removeClass",className,element,null,null,function(){$delegate.removeClass(element,className)},doneCallback)},enabled:function(value,element){switch(arguments.length){case 2:if(value)cleanup(element);else{var data=element.data(NG_ANIMATE_STATE)||{};data.disabled=!0,element.data(NG_ANIMATE_STATE,data)}break;case 1:rootAnimateState.disabled=!value;break;default:value=!rootAnimateState.disabled}return!!value}}}]),$animateProvider.register("",["$window","$sniffer","$timeout",function($window,$sniffer,$timeout){function afterReflow(callback){animationReflowQueue.push(callback),$timeout.cancel(animationTimer),animationTimer=$timeout(function(){forEach(animationReflowQueue,function(fn){fn()}),animationReflowQueue=[],animationTimer=null,lookupCache={}},10,!1)}function getElementAnimationDetails(element,cacheKey){var data=cacheKey?lookupCache[cacheKey]:null;if(!data){var transitionDelayStyle,animationDelayStyle,transitionDurationStyle,transitionPropertyStyle,transitionDuration=0,transitionDelay=0,animationDuration=0,animationDelay=0;forEach(element,function(element){if(element.nodeType==ELEMENT_NODE){var elementStyles=$window.getComputedStyle(element)||{};transitionDurationStyle=elementStyles[TRANSITION_PROP+DURATION_KEY],transitionDuration=Math.max(parseMaxTime(transitionDurationStyle),transitionDuration),transitionPropertyStyle=elementStyles[TRANSITION_PROP+PROPERTY_KEY],transitionDelayStyle=elementStyles[TRANSITION_PROP+DELAY_KEY],transitionDelay=Math.max(parseMaxTime(transitionDelayStyle),transitionDelay),animationDelayStyle=elementStyles[ANIMATION_PROP+DELAY_KEY],animationDelay=Math.max(parseMaxTime(animationDelayStyle),animationDelay);var aDuration=parseMaxTime(elementStyles[ANIMATION_PROP+DURATION_KEY]);aDuration>0&&(aDuration*=parseInt(elementStyles[ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY],10)||1),animationDuration=Math.max(aDuration,animationDuration)}}),data={total:0,transitionPropertyStyle:transitionPropertyStyle,transitionDurationStyle:transitionDurationStyle,transitionDelayStyle:transitionDelayStyle,transitionDelay:transitionDelay,transitionDuration:transitionDuration,animationDelayStyle:animationDelayStyle,animationDelay:animationDelay,animationDuration:animationDuration},cacheKey&&(lookupCache[cacheKey]=data)}return data}function parseMaxTime(str){var maxValue=0,values=angular.isString(str)?str.split(/\s*,\s*/):[];return forEach(values,function(value){maxValue=Math.max(parseFloat(value)||0,maxValue)}),maxValue}function getCacheKey(element){var parentElement=element.parent(),parentID=parentElement.data(NG_ANIMATE_PARENT_KEY);return parentID||(parentElement.data(NG_ANIMATE_PARENT_KEY,++parentCounter),parentID=parentCounter),parentID+"-"+element[0].className}function animateSetup(element,className){var cacheKey=getCacheKey(element),eventCacheKey=cacheKey+" "+className,stagger={},ii=lookupCache[eventCacheKey]?++lookupCache[eventCacheKey].total:0;if(ii>0){var staggerClassName=className+"-stagger",staggerCacheKey=cacheKey+" "+staggerClassName,applyClasses=!lookupCache[staggerCacheKey];applyClasses&&element.addClass(staggerClassName),stagger=getElementAnimationDetails(element,staggerCacheKey),applyClasses&&element.removeClass(staggerClassName)}element.addClass(className);var timings=getElementAnimationDetails(element,eventCacheKey),maxDuration=Math.max(timings.transitionDuration,timings.animationDuration);if(0===maxDuration)return element.removeClass(className),!1;var activeClassName=(element[0],"");return timings.transitionDuration>0?(element.addClass(NG_ANIMATE_FALLBACK_CLASS_NAME),activeClassName+=NG_ANIMATE_FALLBACK_ACTIVE_CLASS_NAME+" ",blockTransitions(element)):blockKeyframeAnimations(element),forEach(className.split(" "),function(klass,i){activeClassName+=(i>0?" ":"")+klass+"-active"}),element.data(NG_ANIMATE_CSS_DATA_KEY,{className:className,activeClassName:activeClassName,maxDuration:maxDuration,classes:className+" "+activeClassName,timings:timings,stagger:stagger,ii:ii}),!0}function blockTransitions(element){element[0].style[TRANSITION_PROP+PROPERTY_KEY]="none"}function blockKeyframeAnimations(element){element[0].style[ANIMATION_PROP]="none 0s"}function unblockTransitions(element){var node=element[0],prop=TRANSITION_PROP+PROPERTY_KEY;node.style[prop]&&node.style[prop].length>0&&(node.style[prop]="")}function unblockKeyframeAnimations(element){var node=element[0],prop=ANIMATION_PROP;node.style[prop]&&node.style[prop].length>0&&(element[0].style[prop]="")}function animateRun(element,className,activeAnimationComplete){function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||ev.timeStamp||Date.now();Math.max(timeStamp-startTime,0)>=maxDelayTime&&ev.elapsedTime>=maxDuration&&activeAnimationComplete()}var data=element.data(NG_ANIMATE_CSS_DATA_KEY);if(!element.hasClass(className)||!data)return void activeAnimationComplete();var applyFallbackStyle,node=element[0],timings=data.timings,stagger=data.stagger,maxDuration=data.maxDuration,activeClassName=data.activeClassName,maxDelayTime=1e3*Math.max(timings.transitionDelay,timings.animationDelay),startTime=Date.now(),css3AnimationEvents=ANIMATIONEND_EVENT+" "+TRANSITIONEND_EVENT,ii=data.ii,style="",appliedStyles=[];if(timings.transitionDuration>0){var propertyStyle=timings.transitionPropertyStyle;if(-1==propertyStyle.indexOf("all")){applyFallbackStyle=!0;var fallbackProperty=$sniffer.msie?"-ms-zoom":"border-spacing";style+=CSS_PREFIX+"transition-property: "+propertyStyle+", "+fallbackProperty+"; ",style+=CSS_PREFIX+"transition-duration: "+timings.transitionDurationStyle+", "+timings.transitionDuration+"s; ",appliedStyles.push(CSS_PREFIX+"transition-property"),appliedStyles.push(CSS_PREFIX+"transition-duration")}}if(ii>0){if(stagger.transitionDelay>0&&0===stagger.transitionDuration){var delayStyle=timings.transitionDelayStyle;applyFallbackStyle&&(delayStyle+=", "+timings.transitionDelay+"s"),style+=CSS_PREFIX+"transition-delay: "+prepareStaggerDelay(delayStyle,stagger.transitionDelay,ii)+"; ",appliedStyles.push(CSS_PREFIX+"transition-delay")}stagger.animationDelay>0&&0===stagger.animationDuration&&(style+=CSS_PREFIX+"animation-delay: "+prepareStaggerDelay(timings.animationDelayStyle,stagger.animationDelay,ii)+"; ",appliedStyles.push(CSS_PREFIX+"animation-delay"))}if(appliedStyles.length>0){var oldStyle=node.getAttribute("style")||"";node.setAttribute("style",oldStyle+" "+style)}return element.on(css3AnimationEvents,onAnimationProgress),element.addClass(activeClassName),function(){element.off(css3AnimationEvents,onAnimationProgress),element.removeClass(activeClassName),animateClose(element,className);for(var i in appliedStyles)node.style.removeProperty(appliedStyles[i])}}function prepareStaggerDelay(delayStyle,staggerDelay,index){var style="";return forEach(delayStyle.split(","),function(val,i){style+=(i>0?",":"")+(index*staggerDelay+parseInt(val,10))+"s"}),style}function animateBefore(element,className){return animateSetup(element,className)?function(cancelled){cancelled&&animateClose(element,className)}:void 0}function animateAfter(element,className,afterAnimationComplete){return element.data(NG_ANIMATE_CSS_DATA_KEY)?animateRun(element,className,afterAnimationComplete):(animateClose(element,className),void afterAnimationComplete())}function animate(element,className,animationComplete){var preReflowCancellation=animateBefore(element,className);if(!preReflowCancellation)return void animationComplete();var cancel=preReflowCancellation;return afterReflow(function(){unblockTransitions(element),unblockKeyframeAnimations(element),cancel=animateAfter(element,className,animationComplete)}),function(cancelled){(cancel||noop)(cancelled)}}function animateClose(element,className){element.removeClass(className),element.removeClass(NG_ANIMATE_FALLBACK_CLASS_NAME),element.removeData(NG_ANIMATE_CSS_DATA_KEY)}function suffixClasses(classes,suffix){var className="";return classes=angular.isArray(classes)?classes:classes.split(/\s+/),forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=(i>0?" ":"")+klass+suffix)}),className}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,CSS_PREFIX="";window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),window.onanimationend===undefined&&window.onwebkitanimationend!==undefined?(CSS_PREFIX="-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var animationTimer,DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",ANIMATION_ITERATION_COUNT_KEY="IterationCount",NG_ANIMATE_PARENT_KEY="$$ngAnimateKey",NG_ANIMATE_CSS_DATA_KEY="$$ngAnimateCSS3Data",NG_ANIMATE_FALLBACK_CLASS_NAME="ng-animate-start",NG_ANIMATE_FALLBACK_ACTIVE_CLASS_NAME="ng-animate-active",lookupCache={},parentCounter=0,animationReflowQueue=[];return{allowCancel:function(element,animationEvent,className){var oldClasses=(element.data(NG_ANIMATE_CSS_DATA_KEY)||{}).classes;if(!oldClasses||["enter","leave","move"].indexOf(animationEvent)>=0)return!0;var parentElement=element.parent(),clone=angular.element(element[0].cloneNode());clone.attr("style","position:absolute; top:-9999px; left:-9999px"),clone.removeAttr("id"),clone.html(""),forEach(oldClasses.split(" "),function(klass){clone.removeClass(klass)});var suffix="addClass"==animationEvent?"-add":"-remove";clone.addClass(suffixClasses(className,suffix)),parentElement.append(clone);var timings=getElementAnimationDetails(clone);return clone.remove(),Math.max(timings.transitionDuration,timings.animationDuration)>0},enter:function(element,animationCompleted){return animate(element,"ng-enter",animationCompleted)},leave:function(element,animationCompleted){return animate(element,"ng-leave",animationCompleted)},move:function(element,animationCompleted){return animate(element,"ng-move",animationCompleted)},beforeAddClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore(element,suffixClasses(className,"-add"));return cancellationMethod?(afterReflow(function(){unblockTransitions(element),unblockKeyframeAnimations(element),animationCompleted()}),cancellationMethod):void animationCompleted()},addClass:function(element,className,animationCompleted){return animateAfter(element,suffixClasses(className,"-add"),animationCompleted)},beforeRemoveClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore(element,suffixClasses(className,"-remove"));return cancellationMethod?(afterReflow(function(){unblockTransitions(element),unblockKeyframeAnimations(element),animationCompleted()}),cancellationMethod):void animationCompleted()},removeClass:function(element,className,animationCompleted){return animateAfter(element,suffixClasses(className,"-remove"),animationCompleted)}}}])}])}(window,window.angular),function(window,angular){"use strict";function $RouteProvider(){function inherit(parent,extra){return angular.extend(new(angular.extend(function(){},{prototype:parent})),extra)}function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];return path=path.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(_,slash,key,option){var optional="?"===option?option:null,star="*"===option?option:null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+path+"$",insensitive?"i":""),ret}var routes={};this.when=function(path,route){if(routes[path]=angular.extend({reloadOnSearch:!0},route,path&&pathRegExp(path,route)),path){var redirectPath="/"==path[path.length-1]?path.substr(0,path.length-1):path+"/";routes[redirectPath]=angular.extend({redirectTo:path},pathRegExp(redirectPath,route))}return this},this.otherwise=function(params){return this.when(null,params),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function($rootScope,$location,$routeParams,$q,$injector,$http,$templateCache,$sce){function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;len>i;++i){var key=keys[i-1],val="string"==typeof m[i]?decodeURIComponent(m[i]):m[i];key&&val&&(params[key.name]=val)}return params}function updateRoute(){var next=parseRoute(),last=$route.current;next&&last&&next.$$route===last.$$route&&angular.equals(next.pathParams,last.pathParams)&&!next.reloadOnSearch&&!forceReload?(last.params=next.params,angular.copy(last.params,$routeParams),$rootScope.$broadcast("$routeUpdate",last)):(next||last)&&(forceReload=!1,$rootScope.$broadcast("$routeChangeStart",next,last),$route.current=next,next&&next.redirectTo&&(angular.isString(next.redirectTo)?$location.path(interpolate(next.redirectTo,next.params)).search(next.params).replace():$location.url(next.redirectTo(next.pathParams,$location.path(),$location.search())).replace()),$q.when(next).then(function(){if(next){var template,templateUrl,locals=angular.extend({},next.resolve);return angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value)}),angular.isDefined(template=next.template)?angular.isFunction(template)&&(template=template(next.params)):angular.isDefined(templateUrl=next.templateUrl)&&(angular.isFunction(templateUrl)&&(templateUrl=templateUrl(next.params)),templateUrl=$sce.getTrustedResourceUrl(templateUrl),angular.isDefined(templateUrl)&&(next.loadedTemplateUrl=templateUrl,template=$http.get(templateUrl,{cache:$templateCache}).then(function(response){return response.data}))),angular.isDefined(template)&&(locals.$template=template),$q.all(locals)}}).then(function(locals){next==$route.current&&(next&&(next.locals=locals,angular.copy(next.params,$routeParams)),$rootScope.$broadcast("$routeChangeSuccess",next,last))},function(error){next==$route.current&&$rootScope.$broadcast("$routeChangeError",next,last,error)}))}function parseRoute(){var params,match;return angular.forEach(routes,function(route){!match&&(params=switchRouteMatcher($location.path(),route))&&(match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params}),match.$$route=route)}),match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}})}function interpolate(string,params){var result=[];return angular.forEach((string||"").split(":"),function(segment,i){if(0===i)result.push(segment);else{var segmentMatch=segment.match(/(\w+)(.*)/),key=segmentMatch[1];result.push(params[key]),result.push(segmentMatch[2]||""),delete params[key]}}),result.join("")}var forceReload=!1,$route={routes:routes,reload:function(){forceReload=!0,$rootScope.$evalAsync(updateRoute)}};return $rootScope.$on("$locationChangeSuccess",updateRoute),$route}]}function $RouteParamsProvider(){this.$get=function(){return{}}}function ngViewFactory($route,$anchorScroll,$compile,$controller,$animate){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(scope,$element,attr,ctrl,$transclude){function cleanupLastView(){currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement),currentElement=null)}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(template){var newScope=scope.$new(),clone=$transclude(newScope,angular.noop);clone.html(template),$animate.enter(clone,null,currentElement||$element,function(){!angular.isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()}),cleanupLastView();var link=$compile(clone.contents()),current=$route.current;if(currentScope=current.scope=newScope,currentElement=clone,current.controller){locals.$scope=currentScope;var controller=$controller(current.controller,locals);current.controllerAs&&(currentScope[current.controllerAs]=controller),clone.data("$ngControllerController",controller),clone.children().data("$ngControllerController",controller)}link(currentScope),currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}else cleanupLastView()}var currentScope,currentElement,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||"";scope.$on("$routeChangeSuccess",update),update()}}}var ngRouteModule=angular.module("ngRoute",["ng"]).provider("$route",$RouteProvider);ngRouteModule.provider("$routeParams",$RouteParamsProvider),ngRouteModule.directive("ngView",ngViewFactory),ngViewFactory.$inject=["$route","$anchorScroll","$compile","$controller","$animate"]}(window,window.angular),function(window,angular){"use strict";function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){var MAX_VERTICAL_DISTANCE=75,MAX_VERTICAL_RATIO=.3,MIN_HORIZONTAL_DISTANCE=30;return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&MAX_VERTICAL_DISTANCE>deltaY&&deltaX>0&&deltaX>MIN_HORIZONTAL_DISTANCE&&MAX_VERTICAL_RATIO>deltaY/deltaX}var startCoords,valid,swipeHandler=$parse(attr[directiveName]);$swipe.bind(element,{start:function(coords){startCoords=coords,valid=!0},cancel:function(){valid=!1},end:function(coords,event){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}})}}])}var ngTouch=angular.module("ngTouch",[]);ngTouch.factory("$swipe",[function(){function getCoordinates(event){var touches=event.touches&&event.touches.length?event.touches:[event],e=event.changedTouches&&event.changedTouches[0]||event.originalEvent&&event.originalEvent.changedTouches&&event.originalEvent.changedTouches[0]||touches[0].originalEvent||touches[0];return{x:e.clientX,y:e.clientY}}var MOVE_BUFFER_RADIUS=10;return{bind:function(element,eventHandlers){var totalX,totalY,startCoords,lastPos,active=!1;element.on("touchstart mousedown",function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)}),element.on("touchcancel",function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on("touchmove mousemove",function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(MOVE_BUFFER_RADIUS>totalX&&MOVE_BUFFER_RADIUS>totalY))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on("touchend mouseup",function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]),ngTouch.config(["$provide",function($provide){$provide.decorator("ngClickDirective",["$delegate",function($delegate){return $delegate.shift(),$delegate}])}]),ngTouch.directive("ngClick",["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y))return touchCoordinates.splice(i,i+2),!0;return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;1>x&&1>y||checkAllowableRegions(touchCoordinates,x,y)||(event.stopPropagation(),event.preventDefault(),event.target&&event.target.blur())}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y),$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]==x&&touchCoordinates[i+1]==y)return void touchCoordinates.splice(i,i+2)},PREVENT_DURATION,!1)}function preventGhostClick(x,y){touchCoordinates||($rootElement[0].addEventListener("click",onClick,!0),$rootElement[0].addEventListener("touchstart",onTouchStart,!0),touchCoordinates=[]),lastPreventedTime=Date.now(),checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,TAP_DURATION=750,MOVE_TOLERANCE=12,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1,element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart",function(event){tapping=!0,tapElement=event.target?event.target:event.srcElement,3==tapElement.nodeType&&(tapElement=tapElement.parentNode),element.addClass(ACTIVE_CLASS_NAME),startTime=Date.now();var touches=event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0];touchStartX=e.clientX,touchStartY=e.clientY}),element.on("touchmove",function(){resetState()}),element.on("touchcancel",function(){resetState()}),element.on("touchend",function(event){var diff=Date.now()-startTime,touches=event.changedTouches&&event.changedTouches.length?event.changedTouches:event.touches&&event.touches.length?event.touches:[event],e=touches[0].originalEvent||touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));tapping&&TAP_DURATION>diff&&MOVE_TOLERANCE>dist&&(preventGhostClick(x,y),tapElement&&tapElement.blur(),angular.isDefined(attr.disabled)&&attr.disabled!==!1||element.triggerHandler("click",[event])),resetState()}),element.onclick=function(){},element.on("click",function(event,touchend){scope.$apply(function(){clickHandler(scope,{$event:touchend||event})})}),element.on("mousedown",function(){element.addClass(ACTIVE_CLASS_NAME)}),element.on("mousemove mouseup",function(){element.removeClass(ACTIVE_CLASS_NAME)})}}]),makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")
}(window,window.angular),function(window,angular){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}var index,chars,match,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(chars=!0,stack.last()&&specialElements[stack.last()])html=html.replace(new RegExp("(.*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last());else if(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag),chars=!1)),chars){index=html.indexOf("<");var text=0>index?html:html.substring(0,index);html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text))}if(html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var spaceRe=/^(\s*)([\s\S]*?)(\s*)$/,parts=spaceRe.exec(value);return parts[0]="",parts[2]&&(hiddenPre.innerHTML=parts[2].replace(/</g,"&lt;"),parts[2]=hiddenPre.innerText||hiddenPre.textContent),parts.join("")}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,END_TAG_REGEXP=/^<\s*\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\s*\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap"),validAttrs=angular.extend({},uriAttrs,makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),hiddenPre=document.createElement("pre");angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&(html.push('target="'),html.push(target),html.push('" ')),html.push('href="'),html.push(url),html.push('">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]==match[3]&&(url="mailto:"+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(window,angular,undefined){"use strict";function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;ii>i&&obj!==undefined;i++){var key=keys[i];obj=null!==obj?obj[key]:undefined}return obj}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;angular.module("ngResource",["ng"]).factory("$resource",["$http","$q",function($http,$q){function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template,this.defaults=defaults||{},this.urlParams={}}function resourceFactory(url,paramDefaults,actions){function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value()),ids[key]=value&&value.charAt&&"@"==value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){copy(value||{},this)}var route=new Route(url);return actions=extend({},DEFAULT_ACTIONS,actions),forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method);Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||undefined;forEach(action,function(value,key){"params"!=key&&"isArray"!=key&&"interceptor"!=key&&(httpConfig[key]=copy(value))}),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data,promise=value.$promise;if(data){if(angular.isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",action.isArray?"array":"object",angular.isArray(data)?"array":"object");action.isArray?(value.length=0,forEach(data,function(item){value.push(new Resource(item))})):(copy(data,value),value.$promise=promise)}return value.$resolved=!0,response.resource=value,response},function(response){return value.$resolved=!0,(error||noop)(response),$q.reject(response)});return promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers),value},responseErrorInterceptor),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){return resourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)},Resource}var DEFAULT_ACTIONS={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction;return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]=!0)}),url=url.replace(/\\:/g,":"),params=params||{},forEach(self.urlParams,function(_,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],angular.isDefined(val)&&null!==val?(encodedVal=encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),encodedVal+"$1")):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"==tail.charAt(0)?tail:leadingSlashes+tail})}),url=url.replace(/\/+$/,""),url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=url.replace(/\/\\\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},resourceFactory}])}(window,window.angular),angular.module("primus",[]).provider("primus",primusProvider),angular.module("ionic.service",["ionic.service.platform","ionic.service.actionSheet","ionic.service.gesture","ionic.service.loading","ionic.service.modal","ionic.service.popup","ionic.service.templateLoad"]),angular.module("ionic.ui",["ionic.ui.content","ionic.ui.tabs","ionic.ui.navRouter","ionic.ui.header","ionic.ui.sideMenu","ionic.ui.slideBox","ionic.ui.list","ionic.ui.checkbox","ionic.ui.toggle","ionic.ui.radio"]),angular.module("ionic",["ionic.service","ionic.ui","ngAnimate","ngRoute","ngTouch","ngSanitize"]),angular.module("ionic.service.actionSheet",["ionic.service.templateLoad","ionic.ui.actionSheet","ngAnimate"]).factory("ActionSheet",["$rootScope","$document","$compile","$animate","$timeout","TemplateLoader",function($rootScope,$document,$compile,$animate){return{show:function(opts){var scope=$rootScope.$new(!0);angular.extend(scope,opts);var element=$compile('<action-sheet buttons="buttons"></action-sheet>')(scope),sheetEl=angular.element(element[0].querySelector(".action-sheet")),hideSheet=function(didCancel){$animate.leave(sheetEl,function(){didCancel&&opts.cancel()}),$animate.removeClass(element,"active",function(){scope.$destroy()})};scope.cancel=function(){hideSheet(!0)},scope.buttonClicked=function(index){(opts.buttonClicked&&opts.buttonClicked(index))===!0&&hideSheet(!1)},scope.destructiveButtonClicked=function(){(opts.destructiveButtonClicked&&opts.destructiveButtonClicked())===!0&&hideSheet(!1)},$document[0].body.appendChild(element[0]);var sheet=new ionic.views.ActionSheet({el:element[0]});return scope.sheet=sheet,$animate.addClass(element,"active"),$animate.enter(sheetEl,element,null,function(){}),sheet}}}]),angular.module("ionic.service.gesture",[]).factory("Gesture",[function(){return{on:function(eventType,cb,$element){return window.ionic.onGesture(eventType,cb,$element[0])},off:function(gesture,eventType,cb){return window.ionic.offGesture(gesture,eventType,cb)}}}]),angular.module("ionic.service.loading",["ionic.ui.loading"]).factory("Loading",["$rootScope","$document","$compile",function($rootScope,$document,$compile){return{show:function(opts){var defaults={content:"",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:2e3};opts=angular.extend(defaults,opts);var scope=$rootScope.$new(!0);angular.extend(scope,opts);var existing=angular.element($document[0].querySelector(".loading-backdrop"));if(existing.length){var scope=existing.scope();if(scope.loading)return scope.loading.show(),scope.loading}var element=$compile("<loading>"+opts.content+"</loading>")(scope);$document[0].body.appendChild(element[0]);var loading=new ionic.views.Loading({el:element[0],maxWidth:opts.maxWidth,showDelay:opts.showDelay});return loading.show(),scope.loading=loading,loading}}}]),angular.module("ionic.service.modal",["ionic.service.templateLoad","ngAnimate"]).factory("Modal",["$rootScope","$document","$compile","$animate","$q","TemplateLoader",function($rootScope,$document,$compile,$animate,$q,TemplateLoader){var ModalView=ionic.views.Modal.inherit({initialize:function(opts){ionic.views.Modal.prototype.initialize.call(this,opts),this.animation=opts.animation||"slide-in-up"},show:function(){var _this=this,element=angular.element(this.el);element.parent().length||(angular.element($document[0].body).append(element),ionic.views.Modal.prototype.show.call(_this)),$animate.addClass(element,this.animation,function(){})},hide:function(){var element=angular.element(this.el);$animate.removeClass(element,this.animation),ionic.views.Modal.prototype.hide.call(this)},remove:function(){angular.element(this.el);$animate.leave(angular.element(this.el),function(){scope.$destroy()})}}),createModal=function(templateString,options){var scope=options.scope&&options.scope.$new()||$rootScope.$new(!0),element=$compile(templateString)(scope);options.el=element[0];var modal=new ModalView(options);return options.scope||(scope.modal=modal),modal};return{fromTemplate:function(templateString,options){var modal=createModal(templateString,options||{});return modal},fromTemplateUrl:function(url,cb,options){TemplateLoader.load(url).then(function(templateString){var modal=createModal(templateString,options||{});cb(modal)})}}}]),function(){"use strict";angular.module("ionic.service.platform",[]).provider("Platform",function(){var platform="web",isPlatformReady=!1;(window.cordova||window.PhoneGap||window.phonegap)&&(platform="cordova");var isReady=function(){return"cordova"==platform?window.device||window.Cordova:!0};return setTimeout(function afterReadyWait(){isReady()?ionic.Platform.detect():setTimeout(afterReadyWait,50)},10),{setPlatform:function(p){platform=p},$get:["$q","$timeout",function($q,$timeout){return{onHardwareBackButton:function(cb){this.ready(function(){document.addEventListener("backbutton",cb,!1)})},offHardwareBackButton:function(fn){this.ready(function(){document.removeEventListener("backbutton",fn)})},ready:function(cb){var q=$q.defer();return $timeout(function readyWait(){isReady()?(isPlatformReady=!0,q.resolve(),cb()):$timeout(readyWait,50)},50),q.promise}}}]}})}(ionic),angular.module("ionic.service.popup",["ionic.service.templateLoad"]).factory("Popup",["$rootScope","$document","$compile","TemplateLoader",function($rootScope,$document,$compile){var getPopup=function(){var existing=angular.element($document[0].querySelector(".popup"));if(existing.length){var scope=existing.scope();if(scope.popup)return scope}};return{alert:function(message,$scope){var existing=getPopup();if(existing)return existing.popup.alert(message);var defaults={title:message,animation:"fade-in"};opts=angular.extend(defaults,opts);var scope=$scope&&$scope.$new()||$rootScope.$new(!0);angular.extend(scope,opts);var element=$compile("<popup>"+opts.content+"</popup>")(scope);$document[0].body.appendChild(element[0]);var popup=new ionic.views.Popup({el:element[0]});return popup.alert(message),scope.popup=popup,popup},confirm:function(){},prompt:function(){},show:function(){}}}]),angular.module("ionic.service.templateLoad",[]).factory("TemplateLoader",["$q","$http","$templateCache",function($q,$http,$templateCache){return{load:function(url){var deferred=$q.defer();return $http({method:"GET",url:url,cache:$templateCache}).success(function(html){deferred.resolve(html&&html.trim())}).error(function(err){deferred.reject(err)}),deferred.promise}}}]),function(){"use strict";angular.module("ionic.ui.actionSheet",[]).directive("actionSheet",["$document",function($document){return{restrict:"E",scope:!0,replace:!0,link:function($scope,$element){var keyUp=function(e){27==e.which&&($scope.cancel(),$scope.$apply())},backdropClick=function(e){e.target==$element[0]&&($scope.cancel(),$scope.$apply())};$scope.$on("$destroy",function(){$element.remove(),$document.unbind("keyup",keyUp)}),$document.bind("keyup",keyUp),$element.bind("click",backdropClick)},template:'<div class="action-sheet-backdrop"><div class="action-sheet action-sheet-up"><div class="action-sheet-group"><div class="action-sheet-title" ng-if="titleText">{{titleText}}</div><button class="button" ng-click="buttonClicked($index)" ng-repeat="button in buttons">{{button.text}}</button></div><div class="action-sheet-group" ng-if="destructiveText"><button class="button destructive" ng-click="destructiveButtonClicked()">{{destructiveText}}</button></div><div class="action-sheet-group" ng-if="cancelText"><button class="button" ng-click="cancel()">{{cancelText}}</button></div></div></div>'}}])}(),function(ionic){"use strict";angular.module("ionic.ui.header",["ngAnimate"]).directive("headerBar",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<header class="bar bar-header">                <div class="buttons">                  <button ng-repeat="button in leftButtons" class="button" ng-class="button.type" ng-click="button.tap($event, $index)" ng-bind-html="button.content">                  </button>                </div>                <h1 class="title" ng-bind-html="title"></h1>                <div class="buttons">                  <button ng-repeat="button in rightButtons" class="button" ng-class="button.type" ng-click="button.tap($event, $index)" ng-bind-html="button.content">                  </button>                </div>              </header>',scope:{leftButtons:"=",rightButtons:"=",title:"=",type:"@",alignTitle:"@"},link:function($scope,$element){var hb=new ionic.views.HeaderBar({el:$element[0],alignTitle:$scope.alignTitle||"center"});$element.addClass($scope.type),$scope.headerBarView=hb,$scope.$watch("leftButtons",function(){hb.align()}),$scope.$watch("rightButtons",function(){hb.align()}),$scope.$watch("title",function(){console.log("Title changed"),hb.align()})}}}).directive("footerBar",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<footer class="bar bar-footer" ng-transclude>              </footer>',scope:{type:"@"},link:function($scope,$element){$element.addClass($scope.type)}}})}(ionic),function(){"use strict";angular.module("ionic.ui.checkbox",[]).directive("checkbox",function(){return{restrict:"E",replace:!0,require:"?ngModel",scope:{},transclude:!0,template:'<label ng-click="tapHandler($event)" class="checkbox"><input type="checkbox"><div ng-transclude></div></label>',link:function($scope,$element,$attr,ngModel){var checkbox;if(ngModel&&(checkbox=$element.children().eq(0),checkbox.length)){$scope.tapHandler=function(e){"click"!=e.type&&(checkbox[0].checked=!checkbox[0].checked),ngModel.$setViewValue(checkbox[0].checked),e.alreadyHandled=!0};ngModel&&(ngModel.$render=function(){checkbox[0].checked=ngModel.$viewValue})}}}})}(),function(){"use strict";angular.module("ionic.ui.content",[]).directive("pane",function(){return{restrict:"E",link:function(scope,element){element.addClass("pane")}}}).directive("content",["$parse","$timeout",function($parse,$timeout){return{restrict:"E",replace:!0,template:'<div class="scroll-content"></div>',transclude:!0,scope:{onRefresh:"&",onRefreshOpening:"&",refreshComplete:"=",scroll:"@",hasScrollX:"@",hasScrollY:"@"},compile:function(element,attr,transclude){return function($scope,$element){var clone,sc,sv,addedPadding=!1,c=$element.eq(0);if("true"==attr.hasHeader&&c.addClass("has-header"),"true"==attr.hasSubheader&&c.addClass("has-subheader"),"true"==attr.hasFooter&&c.addClass("has-footer"),"true"==attr.hasTabs&&c.addClass("has-tabs"),"false"===$scope.scroll)clone=transclude($scope.$parent),$element.append(clone);else if("true"===attr.overflowScroll)c.addClass("overflow-scroll"),clone=transclude($scope.$parent),$element.append(clone);else{sc=document.createElement("div"),sc.className="scroll","true"==attr.padding&&(sc.className+=" padding",addedPadding=!0),$element.append(sc),clone=transclude($scope.$parent),angular.element($element[0].firstElementChild).append(clone);var refresher=$element[0].querySelector(".scroll-refresher"),refresherHeight=refresher&&refresher.clientHeight||0;attr.refreshComplete&&($scope.refreshComplete=function(){$scope.scrollView&&(refresher&&refresher.classList.remove("active"),$scope.scrollView.finishPullToRefresh(),$scope.$parent.$broadcast("scroll.onRefreshComplete"))}),$timeout(function(){sv=new ionic.views.Scroll({el:$element[0]}),refresher&&sv.activatePullToRefresh(refresherHeight,function(){refresher.classList.add("active")},function(){refresher.classList.remove("refreshing"),refresher.classList.remove("active")},function(){refresher.classList.add("refreshing"),$scope.onRefresh(),$scope.$parent.$broadcast("scroll.onRefresh")}),$scope.$parent.$on("scroll.refreshComplete",function(){sv&&sv.finishPullToRefresh()}),$scope.$parent.scrollView=sv},500)}"true"!=attr.padding||addedPadding||c.addClass("padding")}}}}]).directive("refresher",function(){return{restrict:"E",replace:!0,require:["^?content","^?list"],template:'<div class="scroll-refresher"><div class="ionic-refresher-content"><i class="icon ion-arrow-down-c icon-pulling"></i><i class="icon ion-loading-d icon-refreshing"></i></div></div>',scope:!0}}).directive("scroll-refresher",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="scroll-refresher"><div class="scroll-refresher-content"></div></div>'}})}(),function(){"use strict";angular.module("ionic.ui.list",["ngAnimate"]).directive("linkItem",["$timeout",function($timeout){return{restrict:"E",require:["?^list"],replace:!0,transclude:!0,scope:{item:"=",onSelect:"&",onDelete:"&",canDelete:"@",canReorder:"@",canSwipe:"@",buttons:"=",type:"@",href:"@"},template:'<a href="{{href}}" class="item">            <div class="item-edit" ng-if="canDelete && isEditing">              <button class="button button-icon icon" ng-class="deleteIcon" ng-click="onDelete()"></button>            </div>            <div class="item-content slide-left" ng-transclude>            </div>             <div class="item-drag" ng-if="canReorder && isEditing">               <button data-ionic-action="reorder" class="button button-icon icon" ng-class="reorderIcon"></button>             </div>            <div class="item-options" ng-if="canSwipe && !isEditing && showOptions">             <button ng-click="buttonClicked(button)" class="button" ng-class="button.type" ng-repeat="button in buttons">{{button.text}}</button>           </div>          </a>',link:function($scope,$element,$attr,list){list[0]?list=list[0]:list[1]&&(list=list[1]),$attr.$observe("href",function(value){$scope.href=value}),$element.addClass($attr.type||"item-complex"),"item-complex"!==$attr.type&&($scope.canSwipe=!1),$scope.isEditing=!1,$scope.deleteIcon=list.scope.deleteIcon,$scope.reorderIcon=list.scope.reorderIcon,$scope.showOptions=!0,$scope.buttonClicked=function(button){button.onButtonClicked&&button.onButtonClicked($scope.item,button)};var deregisterListWatch=list.scope.$watch("isEditing",function(v){$scope.isEditing=v,v?$scope.showOptions=!1:$timeout(function(){$scope.showOptions=!0},200)});$scope.$on("$destroy",function(){deregisterListWatch()})}}}]).directive("item",["$timeout",function($timeout){return{restrict:"E",require:["?^list"],replace:!0,transclude:!0,scope:{item:"=",onSelect:"&",onDelete:"&",canDelete:"@",canReorder:"@",canSwipe:"@",buttons:"=",type:"@"},template:'<li class="item">            <div class="item-edit" ng-if="canDelete && isEditing">              <button class="button button-icon icon" ng-class="deleteIcon" ng-click="onDelete()"></button>            </div>            <div class="item-content slide-left" ng-transclude>            </div>             <div class="item-drag" ng-if="canReorder && isEditing">               <button data-ionic-action="reorder" class="button button-icon"><i ng-class="reorderIcon"></i></button>             </div>            <div class="item-options" ng-if="canSwipe && !isEditing && showOptions">             <button ng-click="buttonClicked(button)" class="button" ng-class="button.type" ng-repeat="button in buttons">{{button.text}}</button>           </div>          </li>',link:function($scope,$element,$attr,list){list[0]?list=list[0]:list[1]&&(list=list[1]),$element.addClass($attr.type||"item-complex"),"item-complex"!==$attr.type&&($scope.canSwipe=!1),$scope.isEditing=!1,$scope.deleteIcon=list.scope.deleteIcon,$scope.reorderIcon=list.scope.reorderIcon,$scope.showOptions=!0,$scope.buttonClicked=function(button){button.onButtonClicked&&button.onButtonClicked($scope.item,button)};var deregisterListWatch=list.scope.$watch("isEditing",function(v){$scope.isEditing=v,v?$scope.showOptions=!1:$timeout(function(){$scope.showOptions=!0},200)});$scope.$on("$destroy",function(){deregisterListWatch()})}}}]).directive("list",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{isEditing:"=",deleteIcon:"@",reorderIcon:"@",hasPullToRefresh:"@",onRefresh:"&",onRefreshOpening:"&",onReorder:"&",refreshComplete:"="},controller:function($scope){var _this=this;this.scope=$scope,$scope.$watch("isEditing",function(){_this.isEditing=!0})},template:'<ul class="list" ng-class="{\'list-editing\': isEditing}" ng-transclude>              </ul>',link:function($scope,$element,$attr){var lv=new ionic.views.ListView({el:$element[0],listEl:$element[0].children[0],hasPullToRefresh:"false"!==$scope.hasPullToRefresh,onRefresh:function(){$scope.onRefresh(),$scope.$parent.$broadcast("scroll.onRefresh")},onRefreshOpening:function(amt){$scope.onRefreshOpening({amount:amt}),$scope.$parent.$broadcast("scroll.onRefreshOpening",amt)},onReorder:function(el,oldIndex,newIndex){console.log("Moved",el,oldIndex,newIndex),$scope.$apply(function(){$scope.onReorder({el:el,start:oldIndex,end:newIndex})})}});$scope.listView=lv,$attr.refreshComplete&&($scope.refreshComplete=function(){lv.doneRefreshing(),$scope.$parent.$broadcast("scroll.onRefreshComplete")}),$attr.animation&&$element.addClass($attr.animation)}}})}(),function(){"use strict";angular.module("ionic.ui.loading",[]).directive("loading",function(){return{restrict:"E",replace:!0,transclude:!0,link:function($scope,$element){$element.addClass($scope.animation||"")},template:'<div class="loading-backdrop" ng-class="{enabled: showBackdrop}"><div class="loading" ng-transclude></div></div>'}})}(),function(){"use strict";angular.module("ionic.ui.navRouter",["ionic.service.gesture"]).run(["$rootScope",function($rootScope){$rootScope.stackCursorPosition=0}]).directive("navRouter",["$rootScope","$timeout","$location","$window","$route",function($rootScope,$timeout,$location,$window,$route){return{restrict:"AC",controller:["$scope","$element",function($scope){this.navBar={isVisible:!0},$scope.navController=this,this.goBack=function(){$scope.direction="back"}}],link:function($scope,$element,$attr){if($element.length){$scope.animation=$attr.animation,$element[0].classList.add("noop-animation");var isFirst=!0,didAnimate=!1,reverseTransition=function(){$element[0].classList.remove("noop-animation"),$element[0].classList.add($scope.animation),$element[0].classList.add("reverse")},forwardTransition=function(){$element[0].classList.remove("noop-animation"),$element[0].classList.remove("reverse"),$element[0].classList.add($scope.animation)};$scope.$on("$routeChangeSuccess",function(){}),$scope.$on("$routeChangeStart",function(e,next){var back,historyState=$window.history.state;return back="back"==$scope.direction||!!(historyState&&historyState.position<=$rootScope.stackCursorPosition),isFirst||next&&next.$$route&&""===next.$$route.originalPath?void(isFirst=!1):void((didAnimate||$rootScope.stackCursorPosition>0)&&(didAnimate=!0,back?reverseTransition():forwardTransition()))}),$scope.$on("$locationChangeSuccess",function(){$rootScope.actualLocation=$location.path(),isFirst&&"/"!==$location.path()&&(isFirst=!1)}),$scope.$watch(function(){return $location.path()},function(newLocation,oldLocation){if($rootScope.actualLocation===newLocation){if(""===oldLocation)return;var back,historyState=$window.history.state;back="back"==$scope.direction||!!(historyState&&historyState.position<=$rootScope.stackCursorPosition),back?$rootScope.stackCursorPosition--:$rootScope.stackCursorPosition++,$scope.direction="forwards"}else{var currentRouteBeforeChange=$route.current;currentRouteBeforeChange&&($window.history.replaceState({position:$rootScope.stackCursorPosition}),$rootScope.stackCursorPosition++)}})}}}}]).directive("navBar",["$rootScope","$animate","$compile",function($rootScope,$animate,$compile){var animate=function($scope,$element,oldTitle,data,cb){var title,nTitle,oTitle,titles=$element[0].querySelectorAll(".title"),newTitle=data.title;if(!oldTitle||oldTitle===newTitle)return void cb();title=angular.element(titles[0]),oTitle=$compile('<h1 class="title ng-leave" ng-bind="oldTitle"></h1>')($scope),title.replaceWith(oTitle),nTitle=$compile('<h1 class="title ng-enter" ng-bind="currentTitle"></h1>')($scope);var insert=$element[0].firstElementChild||null;$animate.enter(nTitle,$element,insert&&angular.element(insert),function(){cb()}),$animate.leave(angular.element(oTitle),function(){})};return{restrict:"E",require:"^navRouter",replace:!0,scope:{type:"@",backButtonType:"@",backButtonLabel:"@",backButtonIcon:"@",alignTitle:"@"},template:'<header class="bar bar-header nav-bar" ng-class="{invisible: !navController.navBar.isVisible}"><div class="buttons"> <button nav-back class="button" ng-if="enableBackButton && showBackButton" ng-class="backButtonClass" ng-bind-html="backButtonLabel"></button><button ng-click="button.tap($event)" ng-repeat="button in leftButtons" class="button {{button.type}}" ng-bind-html="button.content"></button></div><h1 class="title" ng-bind="currentTitle"></h1><div class="buttons" ng-if="rightButtons.length"> <button ng-click="button.tap($event)" ng-repeat="button in rightButtons" class="button {{button.type}}" ng-bind-html="button.content"></button></div></header>',link:function($scope,$element,$attr,navCtrl){$element.addClass($attr.animation),$scope.enableBackButton=!0,$scope.backButtonClass=$attr.backButtonType,$attr.backButtonIcon&&($scope.backButtonClass+=" icon "+$attr.backButtonIcon),$rootScope.$watch("stackCursorPosition",function(value){$scope.showBackButton=value>0?!0:!1
}),$scope.navController=navCtrl;var hb=new ionic.views.HeaderBar({el:$element[0],alignTitle:$scope.alignTitle||"center"});$scope.headerBarView=hb,$element.addClass($scope.type);var updateHeaderData=function(data){var oldTitle=$scope.currentTitle;$scope.oldTitle=oldTitle,"undefined"!=typeof data.title&&($scope.currentTitle=data.title),$scope.leftButtons=data.leftButtons,$scope.rightButtons=data.rightButtons,"undefined"!=typeof data.hideBackButton&&($scope.enableBackButton=data.hideBackButton!==!0),data.animate!==!1&&"undefined"!=typeof data.title?animate($scope,$element,oldTitle,data,function(){hb.align()}):hb.align()};$scope.$parent.$on("navRouter.pageChanged",function(e,data){updateHeaderData(data)}),$scope.$parent.$on("navRouter.pageShown",function(e,data){updateHeaderData(data)}),$scope.$parent.$on("navRouter.titleChanged",function(e,data){var oldTitle=$scope.currentTitle;$scope.oldTitle=oldTitle,"undefined"!=typeof data.title&&($scope.currentTitle=data.title),data.animate!==!1&&"undefined"!=typeof data.title?animate($scope,$element,oldTitle,data,function(){hb.align()}):hb.align()}),$scope.$parent.$on("navRouter.leftButtonsChanged",function(e,data){$scope.leftButtons=data}),$scope.$parent.$on("navRouter.rightButtonsChanged",function(e,data){$scope.rightButtons=data}),$scope.$on("$destroy",function(){})}}}]).directive("navPage",["$parse",function($parse){return{restrict:"E",scope:!0,require:"^navRouter",link:function($scope,$element,$attr,navCtrl){$element.addClass("pane"),$scope.icon=$attr.icon,$scope.iconOn=$attr.iconOn,$scope.iconOff=$attr.iconOff,$scope.hideBackButton=$scope.$eval($attr.hideBackButton),$scope.hideNavBar=$scope.$eval($attr.hideNavBar),navCtrl.navBar.isVisible=!$scope.hideNavBar,$scope.animate=$scope.$eval($attr.animate),$scope.doesUpdateNavRouter=$scope.$eval($attr.doesUpdateNavRouter)||!0;var leftButtonsGet=$parse($attr.leftButtons);$scope.$watch(leftButtonsGet,function(value){$scope.leftButtons=value,$scope.doesUpdateNavRouter&&$scope.$emit("navRouter.leftButtonsChanged",$scope.leftButtons)});var rightButtonsGet=$parse($attr.rightButtons);$scope.$watch(rightButtonsGet,function(value){$scope.rightButtons=value,$scope.doesUpdateNavRouter&&$scope.$emit("navRouter.rightButtonsChanged",$scope.rightButtons)});var titleGet=$parse($attr.title);$scope.$watch(titleGet,function(value){$scope.title=value,$scope.$emit("navRouter.titleChanged",{title:value,animate:$scope.animate})})}}}]).directive("navBack",["$window","$rootScope","Gesture",function($window,$rootScope){return{restrict:"AC",require:"^?navRouter",link:function($scope,$element,$attr,navCtrl){var goBack=function(e){return $rootScope.stackCursorPosition>0&&($window.history.back(),navCtrl.goBack()),e.alreadyHandled=!0,!1};$element.bind("click",goBack)}}}])}(),function(){"use strict";angular.module("ionic.ui.radio",[]).directive("radio",function(){return{restrict:"E",replace:!0,require:"?ngModel",scope:{value:"@"},transclude:!0,template:'<label ng-click="tapHandler($event)" class="item item-radio">                <input type="radio" name="group">                <div class="item-content" ng-transclude>                </div>                <i class="radio-icon icon ion-checkmark"></i>              </label>',link:function($scope,$element,$attr,ngModel){var radio;if(ngModel&&(radio=$element.children().eq(0),radio.length)){$scope.tapHandler=function(e){radio[0].checked=!0,ngModel.$setViewValue($scope.$eval($attr.ngValue)),e.alreadyHandled=!0};var clickHandler=function(){ngModel.$setViewValue($scope.$eval($attr.ngValue))};ngModel&&($element.bind("click",clickHandler),ngModel.$render=function(){var val=$scope.$eval($attr.ngValue);val===ngModel.$viewValue?radio.attr("checked","checked"):radio.removeAttr("checked")})}}}})}(window.ionic),function(){"use strict";angular.module("ionic.ui.sideMenu",["ionic.service.gesture"]).directive("sideMenus",function(){return{restrict:"ECA",controller:["$scope",function($scope){angular.extend(this,ionic.controllers.SideMenuController.prototype),ionic.controllers.SideMenuController.call(this,{left:{width:270},right:{width:270}}),$scope.sideMenuContentTranslateX=0,$scope.sideMenuController=this}],replace:!0,transclude:!0,template:'<div class="pane" ng-transclude></div>'}}).directive("sideMenuContent",["Gesture",function(Gesture){return{restrict:"AC",require:"^sideMenus",scope:!0,compile:function(){return function($scope,$element,$attr,sideMenuCtrl){$element.addClass("menu-content");var defaultPrevented=!1,isDragging=!1;ionic.on("mousedown",function(e){defaultPrevented=e.defaultPrevented});var dragFn=function(e){defaultPrevented||(isDragging=!0,sideMenuCtrl._handleDrag(e),e.gesture.srcEvent.preventDefault())},dragVertFn=function(e){isDragging&&e.gesture.srcEvent.preventDefault()},dragRightGesture=Gesture.on("dragright",dragFn,$element),dragLeftGesture=Gesture.on("dragleft",dragFn,$element),dragUpGesture=Gesture.on("dragup",dragVertFn,$element),dragDownGesture=Gesture.on("dragdown",dragVertFn,$element),dragReleaseFn=function(e){isDragging=!1,defaultPrevented||sideMenuCtrl._endDrag(e),defaultPrevented=!1},releaseGesture=Gesture.on("release",dragReleaseFn,$element);sideMenuCtrl.setContent({onDrag:function(){},endDrag:function(){},getTranslateX:function(){return $scope.sideMenuContentTranslateX||0},setTranslateX:function(amount){$scope.sideMenuContentTranslateX=amount,$element[0].style.webkitTransform="translate3d("+amount+"px, 0, 0)"},enableAnimation:function(){$scope.animationEnabled=!0,$element[0].classList.add("menu-animated")},disableAnimation:function(){$scope.animationEnabled=!1,$element[0].classList.remove("menu-animated")}}),$scope.$on("$destroy",function(){Gesture.off(dragLeftGesture,"dragleft",dragFn),Gesture.off(dragRightGesture,"dragright",dragFn),Gesture.off(dragUpGesture,"dragup",dragFn),Gesture.off(dragDownGesture,"dragdown",dragFn),Gesture.off(releaseGesture,"release",dragReleaseFn)})}}}}]).directive("sideMenu",function(){return{restrict:"E",require:"^sideMenus",replace:!0,transclude:!0,scope:!0,template:'<div class="menu menu-{{side}}"></div>',compile:function(element,attr,transclude){return function($scope,$element,$attr,sideMenuCtrl){$scope.side=$attr.side,"left"==$scope.side?(sideMenuCtrl.left.isEnabled=!0,sideMenuCtrl.left.pushDown=function(){$element[0].style.zIndex=-1},sideMenuCtrl.left.bringUp=function(){$element[0].style.zIndex=0}):"right"==$scope.side&&(sideMenuCtrl.right.isEnabled=!0,sideMenuCtrl.right.pushDown=function(){$element[0].style.zIndex=-1},sideMenuCtrl.right.bringUp=function(){$element[0].style.zIndex=0}),$element.append(transclude($scope))}}}})}(),function(){"use strict";angular.module("ionic.ui.slideBox",[]).directive("slideBox",["$compile",function($compile){return{restrict:"E",replace:!0,transclude:!0,controller:["$scope","$element",function($scope){$scope.slides=[],this.slideAdded=function(){$scope.slides.push({})}}],scope:{},template:'<div class="slide-box">            <div class="slide-box-slides" ng-transclude>            </div>          </div>',link:function($scope,$element,$attr){if("false"!==$attr.showPager){var childScope=$scope.$new(),pager=$compile("<pager></pager>")(childScope);$element.append(pager),$scope.slideBox=new ionic.views.SlideBox({el:$element[0],slideChanged:function(slideIndex){$scope.$parent.$broadcast("slideBox.slideChanged",slideIndex)}})}}}}]).directive("slide",function(){return{restrict:"E",replace:!0,require:"^slideBox",transclude:!0,template:'<div class="slide-box-slide" ng-transclude></div>',compile:function(){return function($scope,$element,$attr,slideBoxCtrl){slideBoxCtrl.slideAdded()}}}}).directive("pager",function(){return{restrict:"E",replace:!0,require:"^slideBox",template:'<div class="slide-box-pager"><span ng-repeat="slide in slides"><i class="icon ion-record"></i></span></div>'}})}(),angular.module("ionic.ui.tabs",["ngAnimate"]).directive("tabs",function(){return{restrict:"E",replace:!0,scope:!0,transclude:!0,controller:["$scope","$element","$animate",function($scope){var _this=this;angular.extend(this,ionic.controllers.TabBarController.prototype),ionic.controllers.TabBarController.call(this,{controllerChanged:function(oldC,oldI,newC,newI){$scope.controllerChanged&&$scope.controllerChanged({oldController:oldC,oldIndex:oldI,newController:newC,newIndex:newI})},tabBar:{tryTabSelect:function(){},setSelectedItem:function(){},addItem:function(){}}}),this.add=function(controller){this.addController(controller),this.select(0)},this.select=function(controllerIndex){$scope.activeAnimation=$scope.animation,_this.selectController(controllerIndex)},$scope.controllers=this.controllers,$scope.tabsController=this}],template:'<div class="view"><tab-controller-bar></tab-controller-bar></div>',compile:function(element,attr,transclude){return function($scope,$element,$attr){var tabs=$element[0].querySelector(".tabs");$scope.tabsType=$attr.tabsType||"tabs-positive",$scope.tabsStyle=$attr.tabsStyle,$scope.animation=$attr.animation,$scope.animateNav=$scope.$eval($attr.animateNav),$scope.animateNav!==!1&&($scope.animateNav=!0),$attr.$observe("tabsStyle",function(){tabs&&angular.element(tabs).addClass($attr.tabsStyle)}),$attr.$observe("tabsType",function(){tabs&&angular.element(tabs).addClass($attr.tabsType)}),$scope.$watch("activeAnimation",function(){$element.addClass($scope.activeAnimation)}),transclude($scope,function(cloned){$element.prepend(cloned)})}}}}).directive("tab",["$animate","$parse",function($animate,$parse){return{restrict:"E",require:"^tabs",scope:!0,transclude:"element",compile:function(element,attr,transclude){return function($scope,$element,$attr,tabsCtrl){var childScope,childElement;$scope.title=$attr.title,$scope.icon=$attr.icon,$scope.iconOn=$attr.iconOn,$scope.iconOff=$attr.iconOff,$scope.hideBackButton=$scope.$eval($attr.hideBackButton),$scope.hideBackButton!==!0&&($scope.hideBackButton=!1),$scope.animate=$scope.$eval($attr.animate),$scope.doesUpdateNavRouter=$scope.$eval($attr.doesUpdateNavRouter),$scope.doesUpdateNavRouter!==!1&&($scope.doesUpdateNavRouter=!0);var leftButtonsGet=$parse($attr.leftButtons);$scope.$watch(leftButtonsGet,function(value){$scope.leftButtons=value,$scope.doesUpdateNavRouter&&$scope.$emit("navRouter.leftButtonsChanged",$scope.rightButtons)});var rightButtonsGet=$parse($attr.rightButtons);$scope.$watch(rightButtonsGet,function(value){$scope.rightButtons=value}),tabsCtrl.add($scope),$scope.$watch("isVisible",function(value){childElement&&($animate.leave(childElement),$scope.$broadcast("tab.hidden"),childElement=void 0),childScope&&(childScope.$destroy(),childScope=void 0),value&&(childScope=$scope.$new(),transclude(childScope,function(clone){childElement=clone,clone.addClass("pane"),$animate.enter(clone,$element.parent(),$element),$scope.title&&$scope.doesUpdateNavRouter&&$scope.$emit("navRouter.pageShown",{title:$scope.title,rightButtons:$scope.rightButtons,leftButtons:$scope.leftButtons,hideBackButton:$scope.hideBackButton,animate:$scope.animateNav}),$scope.$broadcast("tab.shown")}))})}}}}]).directive("tabControllerBar",function(){return{restrict:"E",require:"^tabs",transclude:!0,replace:!0,scope:!0,template:'<div class="tabs"><tab-controller-item title="{{controller.title}}" icon="{{controller.icon}}" icon-on="{{controller.iconOn}}" icon-off="{{controller.iconOff}}" active="controller.isVisible" index="$index" ng-repeat="controller in controllers"></tab-controller-item></div>',link:function($scope,$element){$element.addClass($scope.tabsType),$element.addClass($scope.tabsStyle)}}}).directive("tabControllerItem",function(){return{restrict:"E",replace:!0,require:"^tabs",scope:{title:"@",icon:"@",iconOn:"@",iconOff:"@",active:"=",tabSelected:"@",index:"="},link:function(scope,element,attrs,tabsCtrl){attrs.icon&&(scope.iconOn=scope.iconOff=attrs.icon),scope.selectTab=function(){tabsCtrl.select(scope.index)}},template:'<a ng-class="{active:active}" ng-click="selectTab()" class="tab-item"><i class="{{icon}}" ng-if="icon"></i><i class="{{iconOn}}" ng-if="active"></i><i class="{{iconOff}}" ng-if="!active"></i> {{title}}</a>'}}).directive("tabBar",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="tabs tabs-primary" ng-transclude></div>'}}),function(ionic){"use strict";angular.module("ionic.ui.toggle",[]).directive("toggle",function(){return{restrict:"E",replace:!0,require:"?ngModel",scope:{},template:'<div ng-click="toggleIt($event)" class="toggle"><input type="checkbox"><div class="track"><div class="handle"></div></div></div>',link:function($scope,$element,$attr,ngModel){var checkbox,handle;ngModel&&(checkbox=$element.children().eq(0),handle=$element.children().eq(1),checkbox.length&&handle.length&&($scope.toggle=new ionic.views.Toggle({el:$element[0],checkbox:checkbox[0],handle:handle[0]}),$scope.toggleIt=function(e){$scope.toggle.tap(e),ngModel.$setViewValue(checkbox[0].checked)},ngModel.$render=function(){$scope.toggle.val(ngModel.$viewValue)}))}}})}(window.ionic),function(){"use strict";angular.module("ionic.ui.virtRepeat",[]).directive("virtRepeat",function(){return{require:["?ngModel","^virtualList"],transclude:"element",priority:1e3,terminal:!0,compile:function(){return function($scope,$element,$attr,ctrls){var virtualList=ctrls[1];virtualList.listView.renderViewport=function(){}}}}})}(ionic),function(){"use strict";function parseRepeatExpression(expression){var match=expression.match(/^\s*([\$\w]+)\s+in\s+(\S*)\s*$/);if(!match)throw new Error("Expected sfVirtualRepeat in form of '_item_ in _collection_' but got '"+expression+"'.");return{value:match[1],collection:match[2]}}function setViewportCss(viewport){var viewportCss={overflow:"auto"},style=window.getComputedStyle?window.getComputedStyle(viewport[0]):viewport[0].currentStyle,maxHeight=style&&style.getPropertyValue("max-height"),height=style&&style.getPropertyValue("height");maxHeight&&"0px"!==maxHeight?viewportCss.maxHeight=maxHeight:viewportCss.height=height&&"0px"!==height?height:window.innerHeight,viewport.css(viewportCss)}function setContentCss(content){var contentCss={margin:0,padding:0,border:0,"box-sizing":"border-box"};content.css(contentCss)}function computeRowHeight(element){var style=window.getComputedStyle?window.getComputedStyle(element):element.currentStyle,maxHeight=style&&style.getPropertyValue("max-height"),height=style&&style.getPropertyValue("height");if(height&&"0px"!==height&&"auto"!==height)$log.info('Row height is "%s" from css height',height);else if(maxHeight&&"0px"!==maxHeight&&"none"!==maxHeight)height=maxHeight,$log.info('Row height is "%s" from css max-height',height);else{if(!element.clientHeight)throw new Error("Unable to compute height of row");height=element.clientHeight+"px",$log.info('Row height is "%s" from client height',height)}return angular.element(element).css("height",height),parseInt(height,10)}angular.module("ionic.ui.virtualRepeat",[]).directive("virtualRepeat",["$log",function($log){return{require:["?ngModel, ^virtualList"],transclude:"element",priority:1e3,terminal:!0,compile:function(element,attr){var ident=parseRepeatExpression(attr.sfVirtualRepeat);return function(scope,iterStartElement,attrs,ctrls){function makeNewScope(idx,collection,containerScope){var childScope=containerScope.$new();return childScope[ident.value]=collection[idx],childScope.$index=idx,childScope.$first=0===idx,childScope.$last=idx===collection.length-1,childScope.$middle=!(childScope.$first||childScope.$last),childScope.$watch(function(){childScope[ident.value]=collection[idx]}),childScope}function addElements(start,end,collection,containerScope,insPoint){var element,idx,childScope,frag=document.createDocumentFragment(),newElements=[];for(idx=start;idx!==end;idx++)childScope=makeNewScope(idx,collection,containerScope),element=linker(childScope,angular.noop),newElements.push(element),frag.appendChild(element[0]);return insPoint.after(frag),newElements}function recomputeActive(){var start=clip(state.firstActive,state.firstVisible-state.lowWater,state.firstVisible-state.highWater),end=clip(state.firstActive+state.active,state.firstVisible+state.visible+state.lowWater,state.firstVisible+state.visible+state.highWater);state.firstActive=Math.max(0,start),state.active=Math.min(end,state.total)-state.firstActive}function sfVirtualRepeatOnScroll(evt){rowHeight&&scope.$apply(function(){state.firstVisible=Math.floor(evt.target.scrollTop/rowHeight),state.visible=Math.ceil(dom.viewport[0].clientHeight/rowHeight),$log.log("scroll to row %o",state.firstVisible),sticky=evt.target.scrollTop+evt.target.clientHeight>=evt.target.scrollHeight,recomputeActive(),$log.log(" state is now %o",state),$log.log(" sticky = %o",sticky)})}function sfVirtualRepeatWatchExpression(scope){var coll=scope.$eval(ident.collection);return coll.length!==state.total&&(state.total=coll.length,recomputeActive()),{start:state.firstActive,active:state.active,len:coll.length}}function destroyActiveElements(action,count){var dead,ii,remover=Array.prototype[action];for(ii=0;count>ii;ii++)dead=remover.call(rendered),dead.scope().$destroy(),dead.remove()}function sfVirtualRepeatListener(newValue,oldValue,scope){var newElements,oldEnd=oldValue.start+oldValue.active,collection=scope.$eval(ident.collection);if(newValue===oldValue)$log.info("initial listen"),newElements=addElements(newValue.start,oldEnd,collection,scope,iterStartElement),rendered=newElements,rendered.length&&(rowHeight=computeRowHeight(newElements[0][0]));else{var newEnd=newValue.start+newValue.active,forward=newValue.start>=oldValue.start,delta=forward?newValue.start-oldValue.start:oldValue.start-newValue.start,endDelta=newEnd>=oldEnd?newEnd-oldEnd:oldEnd-newEnd,contiguous=delta<(forward?oldValue.active:newValue.active);if($log.info("change by %o,%o rows %s",delta,endDelta,forward?"forward":"backward"),contiguous){if(forward?($log.info("need to remove from the top"),destroyActiveElements("shift",delta)):delta&&($log.info("need to add at the top"),newElements=addElements(newValue.start,oldValue.start,collection,scope,iterStartElement),rendered=newElements.concat(rendered)),oldEnd>newEnd)$log.info("need to remove from the bottom"),destroyActiveElements("pop",oldEnd-newEnd);else if(endDelta){var lastElement=rendered[rendered.length-1];$log.info("need to add to the bottom"),newElements=addElements(oldEnd,newEnd,collection,scope,lastElement),rendered=rendered.concat(newElements)}}else $log.info("non-contiguous change"),destroyActiveElements("pop",rendered.length),rendered=addElements(newValue.start,newEnd,collection,scope,iterStartElement);!rowHeight&&rendered.length&&(rowHeight=computeRowHeight(rendered[0][0])),dom.content.css({"padding-top":newValue.start*rowHeight+"px"})}dom.content.css({height:newValue.len*rowHeight+"px"}),sticky&&(dom.viewport[0].scrollTop=dom.viewport[0].clientHeight+dom.viewport[0].scrollHeight)}var virtualList=ctrls[1],rendered=[],rowHeight=0,sticky=!1,dom=virtualList.element,state="ngModel"in attrs?scope.$eval(attrs.ngModel):{};state.firstActive=0,state.firstVisible=0,state.visible=0,state.active=0,state.total=0,state.lowWater=state.lowWater||100,state.highWater=state.highWater||300,setContentCss(dom.content),setViewportCss(dom.viewport),dom.bind("momentumScrolled",sfVirtualRepeatOnScroll),scope.$on("$destroy",function(){dom.unbind("momentumScrolled",sfVirtualRepeatOnScroll)}),scope.$watch(sfVirtualRepeatWatchExpression,sfVirtualRepeatListener,!0)}}}}])}(ionic),function(window,angular,undefined){"use strict";var urlBase="http://s01.chase.sillevis.net:20001/api",module=angular.module("lbServices",["ngResource"]);module.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/users/:id",{id:"@id"},{login:{url:urlBase+"/users/login",method:"POST",interceptor:{response:function(response){var accessToken=response.data;return LoopBackAuth.currentUserId=accessToken.userId,LoopBackAuth.accessTokenId=accessToken.id,LoopBackAuth.rememberMe=response.config.params.rememberMe!==!1,LoopBackAuth.save(),response.resource}}},logout:{url:urlBase+"/users/logout",method:"POST",interceptor:{response:function(response){return LoopBackAuth.currentUserId=null,LoopBackAuth.accessTokenId=null,LoopBackAuth.save(),response.resource}}},confirm:{url:urlBase+"/users/confirm",method:"GET"},resetPassword:{url:urlBase+"/users/reset",method:"POST"},email:{url:urlBase+"/users/Emails",method:"POST"},accessToken:{url:urlBase+"/users/AccessTokens",method:"POST"},create:{url:urlBase+"/users",method:"POST"},updateOrCreate:{url:urlBase+"/users",method:"PUT"},exists:{url:urlBase+"/users/:id/exists",method:"GET"},findById:{url:urlBase+"/users/:id",method:"GET"},find:{url:urlBase+"/users",method:"GET",isArray:!0},findOne:{url:urlBase+"/users/findOne",method:"GET"},destroyById:{url:urlBase+"/users/:id",method:"DELETE"},count:{url:urlBase+"/users/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/users/:id",method:"PUT"},prototype$__get__crews:{url:urlBase+"/users/:id/crews",method:"GET"},prototype$__get__locations:{url:urlBase+"/users/:id/locations",method:"GET",isArray:!0},prototype$__create__locations:{url:urlBase+"/users/:id/locations",method:"POST"},prototype$__delete__locations:{url:urlBase+"/users/:id/locations",method:"DELETE"},prototype$__get__accessTokens:{url:urlBase+"/users/:id/accessTokens",method:"GET",isArray:!0},prototype$__create__accessTokens:{url:urlBase+"/users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:urlBase+"/users/:id/accessTokens",method:"DELETE"},"::get::crew::user":{url:urlBase+"/crews/:id/user",method:"GET"},"::get::location::user":{url:urlBase+"/locations/:id/user",method:"GET"},"::get::accessToken::user":{url:urlBase+"/accessTokens/:id/user",method:"GET"},getCurrent:{url:urlBase+"/users/:id",method:"GET",params:{id:function(){var id=LoopBackAuth.currentUserId;return null==id&&(id="__anonymous__"),id}},__isGetCurrentUser__:!0}});return R.crews=function(){var TargetResource=$injector.get("Crew"),action=TargetResource["::get::user::crews"];return action.apply(R,arguments)},R.locations=function(){var TargetResource=$injector.get("Location"),action=TargetResource["::get::user::locations"];return action.apply(R,arguments)},R.locations.create=function(){var TargetResource=$injector.get("Location"),action=TargetResource["::create::user::locations"];return action.apply(R,arguments)},R.locations.destroyAll=function(){var TargetResource=$injector.get("Location"),action=TargetResource["::delete::user::locations"];return action.apply(R,arguments)},R.accessTokens=function(){var TargetResource=$injector.get("AccessToken"),action=TargetResource["::get::user::accessTokens"];return action.apply(R,arguments)},R.accessTokens.create=function(){var TargetResource=$injector.get("AccessToken"),action=TargetResource["::create::user::accessTokens"];return action.apply(R,arguments)},R.accessTokens.destroyAll=function(){var TargetResource=$injector.get("AccessToken"),action=TargetResource["::delete::user::accessTokens"];return action.apply(R,arguments)},R}]),module.factory("Crew",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/crews/:id",{id:"@id"},{create:{url:urlBase+"/crews",method:"POST"},updateOrCreate:{url:urlBase+"/crews",method:"PUT"},exists:{url:urlBase+"/crews/:id/exists",method:"GET"},findById:{url:urlBase+"/crews/:id",method:"GET"},find:{url:urlBase+"/crews",method:"GET",isArray:!0},findOne:{url:urlBase+"/crews/findOne",method:"GET"},destroyById:{url:urlBase+"/crews/:id",method:"DELETE"},count:{url:urlBase+"/crews/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/crews/:id",method:"PUT"},prototype$__get__user:{url:urlBase+"/crews/:id/user",method:"GET"},"::get::user::crews":{url:urlBase+"/users/:id/crews",method:"GET"}});return R.user=function(){var TargetResource=$injector.get("User"),action=TargetResource["::get::crew::user"];return action.apply(R,arguments)},R}]),module.factory("Location",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/locations/:id",{id:"@id"},{create:{url:urlBase+"/locations",method:"POST"},updateOrCreate:{url:urlBase+"/locations",method:"PUT"},exists:{url:urlBase+"/locations/:id/exists",method:"GET"},findById:{url:urlBase+"/locations/:id",method:"GET"},find:{url:urlBase+"/locations",method:"GET",isArray:!0},findOne:{url:urlBase+"/locations/findOne",method:"GET"},destroyById:{url:urlBase+"/locations/:id",method:"DELETE"},count:{url:urlBase+"/locations/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/locations/:id",method:"PUT"},prototype$__get__user:{url:urlBase+"/locations/:id/user",method:"GET"},"::get::user::locations":{url:urlBase+"/users/:id/locations",method:"GET",isArray:!0},"::create::user::locations":{url:urlBase+"/users/:id/locations",method:"POST"},"::delete::user::locations":{url:urlBase+"/users/:id/locations",method:"DELETE"}});return R.user=function(){var TargetResource=$injector.get("User"),action=TargetResource["::get::location::user"];return action.apply(R,arguments)},R}]),module.factory("AccessToken",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/accessTokens/:id",{id:"@id"},{create:{url:urlBase+"/accessTokens",method:"POST"},updateOrCreate:{url:urlBase+"/accessTokens",method:"PUT"},exists:{url:urlBase+"/accessTokens/:id/exists",method:"GET"},findById:{url:urlBase+"/accessTokens/:id",method:"GET"},find:{url:urlBase+"/accessTokens",method:"GET",isArray:!0},findOne:{url:urlBase+"/accessTokens/findOne",method:"GET"},destroyById:{url:urlBase+"/accessTokens/:id",method:"DELETE"},count:{url:urlBase+"/accessTokens/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/accessTokens/:id",method:"PUT"},prototype$__get__user:{url:urlBase+"/accessTokens/:id/user",method:"GET"},"::get::user::accessTokens":{url:urlBase+"/users/:id/accessTokens",method:"GET",isArray:!0},"::create::user::accessTokens":{url:urlBase+"/users/:id/accessTokens",method:"POST"},"::delete::user::accessTokens":{url:urlBase+"/users/:id/accessTokens",method:"DELETE"}});return R.user=function(){var TargetResource=$injector.get("User"),action=TargetResource["::get::accessToken::user"];return action.apply(R,arguments)},R}]),module.factory("Application",["LoopBackResource","LoopBackAuth","$injector",function(Resource){var R=Resource(urlBase+"/applications/:id",{id:"@id"},{create:{url:urlBase+"/applications",method:"POST"},updateOrCreate:{url:urlBase+"/applications",method:"PUT"},exists:{url:urlBase+"/applications/:id/exists",method:"GET"},findById:{url:urlBase+"/applications/:id",method:"GET"},find:{url:urlBase+"/applications",method:"GET",isArray:!0},findOne:{url:urlBase+"/applications/findOne",method:"GET"},destroyById:{url:urlBase+"/applications/:id",method:"DELETE"},count:{url:urlBase+"/applications/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/applications/:id",method:"PUT"}});return R}]),module.factory("Push",["LoopBackResource","LoopBackAuth","$injector",function(Resource){var R=Resource(urlBase+"/push/:id",{id:"@id"},{notifyByQuery:{url:urlBase+"/push",method:"POST"}});return R}]),module.factory("Installation",["LoopBackResource","LoopBackAuth","$injector",function(Resource){var R=Resource(urlBase+"/installations/:id",{id:"@id"},{findByApp:{url:urlBase+"/installations/byApp",method:"GET"},findByUser:{url:urlBase+"/installations/byUser",method:"GET"},findBySubscriptions:{url:urlBase+"/installations/bySubscriptions",method:"GET"},create:{url:urlBase+"/installations",method:"POST"},updateOrCreate:{url:urlBase+"/installations",method:"PUT"},exists:{url:urlBase+"/installations/:id/exists",method:"GET"},findById:{url:urlBase+"/installations/:id",method:"GET"},find:{url:urlBase+"/installations",method:"GET",isArray:!0},findOne:{url:urlBase+"/installations/findOne",method:"GET"},destroyById:{url:urlBase+"/installations/:id",method:"DELETE"},count:{url:urlBase+"/installations/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/installations/:id",method:"PUT"}});return R}]),module.factory("Notification",["LoopBackResource","LoopBackAuth","$injector",function(Resource){var R=Resource(urlBase+"/notifications/:id",{id:"@id"},{create:{url:urlBase+"/notifications",method:"POST"},updateOrCreate:{url:urlBase+"/notifications",method:"PUT"},exists:{url:urlBase+"/notifications/:id/exists",method:"GET"},findById:{url:urlBase+"/notifications/:id",method:"GET"},find:{url:urlBase+"/notifications",method:"GET",isArray:!0},findOne:{url:urlBase+"/notifications/findOne",method:"GET"},destroyById:{url:urlBase+"/notifications/:id",method:"DELETE"},count:{url:urlBase+"/notifications/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/notifications/:id",method:"PUT"}});return R}]),module.factory("LoopBackAuth",function(){function LoopBackAuth(){var self=this;props.forEach(function(name){self[name]=load(name)}),this.rememberMe=undefined}function save(storage,name,value){var key="$LoopBack$"+name;null==value&&(value=""),storage[key]=value}function load(name){var key="$LoopBack$"+name;return localStorage[key]||sessionStorage[key]||null}var props=["accessTokenId","currentUserId"];return LoopBackAuth.prototype.save=function(){var self=this,storage=this.rememberMe?localStorage:sessionStorage;props.forEach(function(name){save(storage,name,self[name])})},new LoopBackAuth}).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function($q,LoopBackAuth){return{request:function(config){if(LoopBackAuth.accessTokenId)config.headers.authorization=LoopBackAuth.accessTokenId;else if(config.__isGetCurrentUser__){var res={body:{error:{status:401}},status:401,config:config,headers:function(){return undefined}};return $q.reject(res)}return config||$q.when(config)}}}]).factory("LoopBackResource",["$resource",function($resource){return function(url,params,actions){var resource=$resource(url,params,actions);return resource.prototype.$save=function(success,error){var result=resource.upsert.call(this,{},this,success,error);return result.$promise||result},resource}}])}(window,window.angular),angular.module("defqon.services",["lbServices"]).factory("AppAuth",function(){return{currentUser:null,ensureHasCurrentUser:function(User){this.currentUser?console.log("Using cached current user."):(console.log("Fetching current user from the server."),this.currentUser=User.getCurrent(function(){},function(){console.log("User.getCurrent() err",arguments)}))}}}),angular.module("defqon",["ionic","ngRoute","ngAnimate","lbServices","defqon.services","defqon.controllers","leaflet-directive","primus"]).config(function($compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel):/)}).config(function(primusProvider){primusProvider.setEndpoint("http://s01.chase.sillevis.net:20002").setOptions({reconnect:{minDelay:100,maxDelay:6e4,retries:100}}).setDefaultMultiplex(!1)}).config(function($routeProvider,$locationProvider,$httpProvider){$routeProvider.when("/home",{templateUrl:"templates/app.html",controller:"AppCtrl"}),$routeProvider.when("/home/:userId/:userName",{templateUrl:"templates/app.html",controller:"AppCtrl"}),$routeProvider.when("/invite",{templateUrl:"templates/invite.html",controller:"InviteCtrl"}),$routeProvider.when("/register",{templateUrl:"templates/register.html",controller:"RegisterCtrl"}),$routeProvider.when("/login",{templateUrl:"templates/login.html",controller:"LoginCtrl"}),$routeProvider.otherwise({redirectTo:"/home"}),$httpProvider.interceptors.push(function($q,$location,AppAuth){return{responseError:function(rejection){return console.log("intercepted rejection of ",rejection.config.url,rejection.status),401==rejection.status&&(AppAuth.currentUser=null,$location.nextAfterLogin=$location.path(),$location.path("/login")),$q.reject(rejection)}}})}).run(function($rootScope,$location,AppAuth){$rootScope.$on("$routeChangeStart",function(){console.log("AppAuth.currentUser",AppAuth.currentUser),console.log("$location.path()",$location.path())
})}),angular.module("defqon.controllers",["defqon.services"]).controller("AppCtrl",function($scope,User,Location,$location,AppAuth,$routeParams,primus){AppAuth.ensureHasCurrentUser(User),$scope.currentUser=AppAuth.currentUser,$scope.options=[{text:"Logout",action:function(){User.logout(function(){$scope.currentUser=AppAuth.currentUser=null,$location.path("/")})}}],$scope.toggleLeft=function(){$scope.sideMenuController.toggleLeft()},$scope.markers={},$scope.paths={},"undefined"==typeof $scope.currentUser.$promise?window.location.reload():$scope.currentUser.$promise.then(function(){$scope.users={},User.find({filter:{limit:100,order:"created ASC"}},function(users){$scope.sidebarUsers=users,users.forEach(function(user){user.id in $scope.users||($scope.users[user.id]=user.name)})}),$scope.sendLocation=function(position){primus.send("location",{userId:$scope.currentUser.id,x:position.coords.latitude,y:position.coords.longitude,created:new Date,updated:new Date})},$scope.watchID&&navigator.geolocation.clearWatch($scope.watchID),$scope.watchID=null,navigator.geolocation?$scope.watchID=navigator.geolocation.watchPosition(function(position){$scope.sendLocation(position)},function(error){console.log(error)},{timeout:2e5,enableHighAccuracy:!0}):console.log("no navigator.geolocation"),$scope.mapUserId=$scope.currentUser.id||0,$scope.mapUserName=$scope.currentUser.name||"","userId"in $routeParams&&($scope.mapUserId=$routeParams.userId),"userName"in $routeParams&&($scope.mapUserName=$routeParams.userName);var stringToColour=function(str){var i;for(i=0,hash=0;i<str.length;hash=str.charCodeAt(i++)+((hash<<5)-hash));for(i=0,colour="#";3>i;colour+=("00"+(hash>>8*i++&255).toString(16)).slice(-2));return colour};$scope.tPaths=[],$scope.getLocation=function(){console.log("Update the map"),$scope.locations=[],primus.$on("map",function(data){if(data instanceof Array)$scope.usedUsers=[],data.forEach(function(location){return $scope.focus=!1,"userId"in $routeParams&&$scope.mapUserId!=location.userId?!0:void(location.userId in $scope.usedUsers?($scope.tPaths.push({lat:parseFloat(location.x),lng:parseFloat(location.y)}),$scope.paths[location.userId].latlngs=$scope.tPaths):("userId"in $routeParams&&($scope.focus=!0),$scope.markers[location.userId]={lat:parseFloat(location.x),lng:parseFloat(location.y),message:$scope.users[location.userId],focus:$scope.focus,draggable:!1,icon:{type:"div",iconSize:[1,1],popupAnchor:[0,0],html:'<div class="leaflet-div-icon-content" style="background-color: '+stringToColour(location.userId)+';"></div>'}},$scope.paths[location.userId]={color:stringToColour(location.userId),weight:1,latlngs:[{lat:0,lng:0}]},$scope.usedUsers.push(location.userId)))});else{if($scope.userData=data,$scope.focus=!1,"userId"in $routeParams&&($scope.focus=!0,$scope.mapUserId!=$scope.userData.userId))return!0;$scope.markers[$scope.userData.userId]={lat:parseFloat($scope.userData.x),lng:parseFloat($scope.userData.y),message:$scope.users[$scope.userData.userId],focus:$scope.focus,draggable:!1,icon:{type:"div",iconSize:[1,1],popupAnchor:[0,0],html:'<div class="leaflet-div-icon-content" style="background-color: '+stringToColour($scope.userData.userId)+';"></div>'}}}})},$scope.getLocation(),primus.send("update")}),angular.extend($scope,{center:{lat:52.4361702,lng:5.7484867,zoom:15},defaults:{scrollWheelZoom:!1,tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0}},geojson:{data:{type:"FeatureCollection",features:[{type:"Feature",id:"RED",properties:{name:"Red"},geometry:{type:"Polygon",coordinates:[[[5.75921,52.44025],[5.75672,52.4392],[5.75537,52.4403],[5.75538,52.44031],[5.75796,52.44136]]]}},{type:"Feature",id:"BLUE",properties:{name:"Blue"},geometry:{type:"Polygon",coordinates:[[[5.75073,52.43912],[5.74949,52.4386],[5.7485,52.4394],[5.74851,52.4394],[5.74983,52.43992]]]}},{type:"Feature",id:"UV",properties:{name:"UV"},geometry:{type:"Polygon",coordinates:[[[5.75277,52.43992],[5.75153,52.43941],[5.75054,52.4402],[5.75055,52.4402],[5.75187,52.44072]]]}},{type:"Feature",id:"GREEN",properties:{name:"Green"},geometry:{type:"Polygon",coordinates:[[[5.75358,52.44105],[5.75234,52.44053],[5.75135,52.44133],[5.75136,52.44133],[5.75268,52.44185]]]}},{type:"Feature",id:"PURPLE",properties:{name:"Purple"},geometry:{type:"Polygon",coordinates:[[[5.75884,52.44147],[5.7576,52.44095],[5.75661,52.44175],[5.75662,52.44175],[5.75794,52.44226]]]}},{type:"Feature",id:"INDIGO",properties:{name:"Indigo"},geometry:{type:"Polygon",coordinates:[[[5.75511,52.43961],[5.75386,52.43909],[5.75288,52.43989],[5.75289,52.43989],[5.75421,52.44041]]]}},{type:"Feature",id:"WHITE",properties:{name:"White"},geometry:{type:"Polygon",coordinates:[[[5.75457,52.43935],[5.75333,52.43883],[5.75234,52.43963],[5.75235,52.43963],[5.75367,52.44015]]]}},{type:"Feature",id:"MAGENTA",properties:{name:"Magenta"},geometry:{type:"Polygon",coordinates:[[[5.75328,52.43886],[5.75204,52.43835],[5.75105,52.43915],[5.75106,52.43914],[5.75238,52.43966]]]}},{type:"Feature",id:"ORANGE",properties:{name:"Orange"},geometry:{type:"Polygon",coordinates:[[[5.752,52.43838],[5.75075,52.43786],[5.74977,52.43866],[5.74978,52.43866],[5.7511,52.43918]]]}},{type:"Feature",id:"BROWN",properties:{name:"Brown"},geometry:{type:"Polygon",coordinates:[[[5.75569,52.4408],[5.75444,52.44028],[5.75346,52.44108],[5.75347,52.44108],[5.75479,52.4416]]]}},{type:"Feature",id:"BLACK",properties:{name:"Black"},geometry:{type:"Polygon",coordinates:[[[5.75401,52.438],[5.75277,52.43748],[5.75178,52.43828],[5.75179,52.43828],[5.75311,52.4388]]]}},{type:"Feature",id:"YELLOW",properties:{name:"Yellow"},geometry:{type:"Polygon",coordinates:[[[5.75738,52.43753],[5.75614,52.43701],[5.75515,52.43781],[5.75516,52.43781],[5.75648,52.43833]]]}},{type:"Feature",id:"GOLD",properties:{name:"Gold"},geometry:{type:"Polygon",coordinates:[[[5.75637,52.43842],[5.75519,52.43786],[5.75459,52.43833],[5.7546,52.43833],[5.75592,52.43885]]]}},{type:"Feature",id:"SILVER",properties:{name:"Silver"},geometry:{type:"Polygon",coordinates:[[[5.75472,52.43845],[5.7541,52.43807],[5.75328,52.43891],[5.7533,52.43891],[5.75393,52.43916]]]}}]},style:function(feature){switch(feature.properties.name){case"Red":return{color:"#bd001d",opacity:1,fillColor:"#bd001d",fillOpacity:.8};case"Blue":return{color:"#5795ae",opacity:1,fillColor:"#5795ae",fillOpacity:.8};case"UV":return{color:"#594b97",opacity:1,fillColor:"#594b97",fillOpacity:.8};case"Green":return{color:"#95ae2d",opacity:1,fillColor:"#95ae2d",fillOpacity:.8};case"Purple":return{color:"#641b64",opacity:1,fillColor:"#641b64",fillOpacity:.8};case"Indigo":return{color:"#262a6c",opacity:1,fillColor:"#262a6c",fillOpacity:.8};case"White":return{color:"#ffffff",opacity:1,fillColor:"#ffffff",fillOpacity:.8};case"Magenta":return{color:"#e00b63",opacity:1,fillColor:"#e00b63",fillOpacity:.8};case"Orange":return{color:"#de3e13",opacity:1,fillColor:"#de3e13",fillOpacity:.8};case"Brown":return{color:"#542c22",opacity:1,fillColor:"#542c22",fillOpacity:.8};case"Black":return{color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:.8};case"Yellow":return{color:"#fab827",opacity:1,fillColor:"#fab827",fillOpacity:.8};case"Silver":return{color:"#c3cacd",opacity:1,fillColor:"#c3cacd",fillOpacity:.8};case"Gold":return{color:"#83673e",opacity:1,fillColor:"#83673e",fillOpacity:.8}}}},markers:$scope.markers,paths:$scope.paths})}).controller("InviteCtrl",function($scope,User,Location,$location,AppAuth){AppAuth.ensureHasCurrentUser(User),$scope.currentUser=AppAuth.currentUser,$scope.options=[{text:"Logout",action:function(){User.logout(function(){$scope.currentUser=AppAuth.currentUser=null,$location.path("/")})}}],$scope.toggleLeft=function(){$scope.sideMenuController.toggleLeft()},$scope.invite=function(){$scope.inviteResult=function(){return!0}}}).controller("LoginCtrl",function($scope,$routeParams,User,$location,AppAuth){$scope.registration={},$scope.login=function(){$scope.loginResult=User.login({include:"user",rememberMe:!0},$scope.credentials,function(){var next=$location.nextAfterLogin||"/";$location.nextAfterLogin=null,AppAuth.currentUser=$scope.loginResult.user,$location.path(next)},function(res){$scope.loginError=res.data.error})},$scope.register=function(){$scope.user=User.save($scope.registration,function(){$scope.registerSuccess=!0},function(res){$scope.registerError=res.data.error})}}),function(window,document,undefined){var oldL=window.L,L={};L.version="0.7.3","object"==typeof module&&"object"==typeof module.exports?module.exports=L:"function"==typeof define&&define.amd&&define(L),L.noConflict=function(){return window.L=oldL,this},window.L=L,L.Util={extend:function(dest){var i,j,len,src,sources=Array.prototype.slice.call(arguments,1);for(j=0,len=sources.length;len>j;j++){src=sources[j]||{};for(i in src)src.hasOwnProperty(i)&&(dest[i]=src[i])}return dest},bind:function(fn,obj){var args=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return fn.apply(obj,args||arguments)}},stamp:function(){var lastId=0,key="_leaflet_id";return function(obj){return obj[key]=obj[key]||++lastId,obj[key]}}(),invokeEach:function(obj,method,context){var i,args;if("object"==typeof obj){args=Array.prototype.slice.call(arguments,3);for(i in obj)method.apply(context,[i,obj[i]].concat(args));return!0}return!1},limitExecByInterval:function(fn,time,context){var lock,execOnUnlock;return function wrapperFn(){var args=arguments;return lock?void(execOnUnlock=!0):(lock=!0,setTimeout(function(){lock=!1,execOnUnlock&&(wrapperFn.apply(context,args),execOnUnlock=!1)},time),void fn.apply(context,args))}},falseFn:function(){return!1},formatNum:function(num,digits){var pow=Math.pow(10,digits||5);return Math.round(num*pow)/pow},trim:function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")},splitWords:function(str){return L.Util.trim(str).split(/\s+/)},setOptions:function(obj,options){return obj.options=L.extend({},obj.options,options),obj.options},getParamString:function(obj,existingUrl,uppercase){var params=[];for(var i in obj)params.push(encodeURIComponent(uppercase?i.toUpperCase():i)+"="+encodeURIComponent(obj[i]));return(existingUrl&&-1!==existingUrl.indexOf("?")?"&":"?")+params.join("&")},template:function(str,data){return str.replace(/\{ *([\w_]+) *\}/g,function(str,key){var value=data[key];if(value===undefined)throw new Error("No value provided for variable "+str);return"function"==typeof value&&(value=value(data)),value})},isArray:Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function getPrefixed(name){var i,fn,prefixes=["webkit","moz","o","ms"];for(i=0;i<prefixes.length&&!fn;i++)fn=window[prefixes[i]+name];return fn}function timeoutDefer(fn){var time=+new Date,timeToCall=Math.max(0,16-(time-lastTime));return lastTime=time+timeToCall,window.setTimeout(fn,timeToCall)}var lastTime=0,requestFn=window.requestAnimationFrame||getPrefixed("RequestAnimationFrame")||timeoutDefer,cancelFn=window.cancelAnimationFrame||getPrefixed("CancelAnimationFrame")||getPrefixed("CancelRequestAnimationFrame")||function(id){window.clearTimeout(id)};L.Util.requestAnimFrame=function(fn,context,immediate,element){return fn=L.bind(fn,context),immediate&&requestFn===timeoutDefer?void fn():requestFn.call(window,fn,element)},L.Util.cancelAnimFrame=function(id){id&&cancelFn.call(window,id)}}(),L.extend=L.Util.extend,L.bind=L.Util.bind,L.stamp=L.Util.stamp,L.setOptions=L.Util.setOptions,L.Class=function(){},L.Class.extend=function(props){var NewClass=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},F=function(){};F.prototype=this.prototype;var proto=new F;proto.constructor=NewClass,NewClass.prototype=proto;for(var i in this)this.hasOwnProperty(i)&&"prototype"!==i&&(NewClass[i]=this[i]);props.statics&&(L.extend(NewClass,props.statics),delete props.statics),props.includes&&(L.Util.extend.apply(null,[proto].concat(props.includes)),delete props.includes),props.options&&proto.options&&(props.options=L.extend({},proto.options,props.options)),L.extend(proto,props),proto._initHooks=[];var parent=this;return NewClass.__super__=parent.prototype,proto.callInitHooks=function(){if(!this._initHooksCalled){parent.prototype.callInitHooks&&parent.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var i=0,len=proto._initHooks.length;len>i;i++)proto._initHooks[i].call(this)}},NewClass},L.Class.include=function(props){L.extend(this.prototype,props)},L.Class.mergeOptions=function(options){L.extend(this.prototype.options,options)},L.Class.addInitHook=function(fn){var args=Array.prototype.slice.call(arguments,1),init="function"==typeof fn?fn:function(){this[fn].apply(this,args)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(init)};var eventsKey="_leaflet_events";L.Mixin={},L.Mixin.Events={addEventListener:function(types,fn,context){if(L.Util.invokeEach(types,this.addEventListener,this,fn,context))return this;var i,len,event,type,indexKey,indexLenKey,typeIndex,events=this[eventsKey]=this[eventsKey]||{},contextId=context&&context!==this&&L.stamp(context);for(types=L.Util.splitWords(types),i=0,len=types.length;len>i;i++)event={action:fn,context:context||this},type=types[i],contextId?(indexKey=type+"_idx",indexLenKey=indexKey+"_len",typeIndex=events[indexKey]=events[indexKey]||{},typeIndex[contextId]||(typeIndex[contextId]=[],events[indexLenKey]=(events[indexLenKey]||0)+1),typeIndex[contextId].push(event)):(events[type]=events[type]||[],events[type].push(event));return this},hasEventListeners:function(type){var events=this[eventsKey];return!!events&&(type in events&&events[type].length>0||type+"_idx"in events&&events[type+"_idx_len"]>0)},removeEventListener:function(types,fn,context){if(!this[eventsKey])return this;if(!types)return this.clearAllEventListeners();if(L.Util.invokeEach(types,this.removeEventListener,this,fn,context))return this;var i,len,type,listeners,j,indexKey,indexLenKey,typeIndex,removed,events=this[eventsKey],contextId=context&&context!==this&&L.stamp(context);for(types=L.Util.splitWords(types),i=0,len=types.length;len>i;i++)if(type=types[i],indexKey=type+"_idx",indexLenKey=indexKey+"_len",typeIndex=events[indexKey],fn){if(listeners=contextId&&typeIndex?typeIndex[contextId]:events[type]){for(j=listeners.length-1;j>=0;j--)listeners[j].action!==fn||context&&listeners[j].context!==context||(removed=listeners.splice(j,1),removed[0].action=L.Util.falseFn);context&&typeIndex&&0===listeners.length&&(delete typeIndex[contextId],events[indexLenKey]--)}}else delete events[type],delete events[indexKey],delete events[indexLenKey];return this},clearAllEventListeners:function(){return delete this[eventsKey],this},fireEvent:function(type,data){if(!this.hasEventListeners(type))return this;var listeners,i,len,typeIndex,contextId,event=L.Util.extend({},data,{type:type,target:this}),events=this[eventsKey];if(events[type])for(listeners=events[type].slice(),i=0,len=listeners.length;len>i;i++)listeners[i].action.call(listeners[i].context,event);typeIndex=events[type+"_idx"];for(contextId in typeIndex)if(listeners=typeIndex[contextId].slice())for(i=0,len=listeners.length;len>i;i++)listeners[i].action.call(listeners[i].context,event);return this},addOneTimeEventListener:function(types,fn,context){if(L.Util.invokeEach(types,this.addOneTimeEventListener,this,fn,context))return this;var handler=L.bind(function(){this.removeEventListener(types,fn,context).removeEventListener(types,handler,context)},this);return this.addEventListener(types,fn,context).addEventListener(types,handler,context)}},L.Mixin.Events.on=L.Mixin.Events.addEventListener,L.Mixin.Events.off=L.Mixin.Events.removeEventListener,L.Mixin.Events.once=L.Mixin.Events.addOneTimeEventListener,L.Mixin.Events.fire=L.Mixin.Events.fireEvent,function(){var ie="ActiveXObject"in window,ielt9=ie&&!document.addEventListener,ua=navigator.userAgent.toLowerCase(),webkit=-1!==ua.indexOf("webkit"),chrome=-1!==ua.indexOf("chrome"),phantomjs=-1!==ua.indexOf("phantom"),android=-1!==ua.indexOf("android"),android23=-1!==ua.search("android [23]"),gecko=-1!==ua.indexOf("gecko"),mobile=typeof orientation!=undefined+"",msPointer=window.navigator&&window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints&&!window.PointerEvent,pointer=window.PointerEvent&&window.navigator.pointerEnabled&&window.navigator.maxTouchPoints||msPointer,retina="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,doc=document.documentElement,ie3d=ie&&"transition"in doc.style,webkit3d="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!android23,gecko3d="MozPerspective"in doc.style,opera3d="OTransition"in doc.style,any3d=!window.L_DISABLE_3D&&(ie3d||webkit3d||gecko3d||opera3d)&&!phantomjs,touch=!window.L_NO_TOUCH&&!phantomjs&&function(){var startName="ontouchstart";if(pointer||startName in doc)return!0;var div=document.createElement("div"),supported=!1;return div.setAttribute?(div.setAttribute(startName,"return;"),"function"==typeof div[startName]&&(supported=!0),div.removeAttribute(startName),div=null,supported):!1}();L.Browser={ie:ie,ielt9:ielt9,webkit:webkit,gecko:gecko&&!webkit&&!window.opera&&!ie,android:android,android23:android23,chrome:chrome,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera3d:opera3d,any3d:any3d,mobile:mobile,mobileWebkit:mobile&&webkit,mobileWebkit3d:mobile&&webkit3d,mobileOpera:mobile&&window.opera,touch:touch,msPointer:msPointer,pointer:pointer,retina:retina}}(),L.Point=function(x,y,round){this.x=round?Math.round(x):x,this.y=round?Math.round(y):y},L.Point.prototype={clone:function(){return new L.Point(this.x,this.y)},add:function(point){return this.clone()._add(L.point(point))},_add:function(point){return this.x+=point.x,this.y+=point.y,this},subtract:function(point){return this.clone()._subtract(L.point(point))},_subtract:function(point){return this.x-=point.x,this.y-=point.y,this},divideBy:function(num){return this.clone()._divideBy(num)},_divideBy:function(num){return this.x/=num,this.y/=num,this},multiplyBy:function(num){return this.clone()._multiplyBy(num)},_multiplyBy:function(num){return this.x*=num,this.y*=num,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(point){point=L.point(point);var x=point.x-this.x,y=point.y-this.y;return Math.sqrt(x*x+y*y)},equals:function(point){return point=L.point(point),point.x===this.x&&point.y===this.y},contains:function(point){return point=L.point(point),Math.abs(point.x)<=Math.abs(this.x)&&Math.abs(point.y)<=Math.abs(this.y)},toString:function(){return"Point("+L.Util.formatNum(this.x)+", "+L.Util.formatNum(this.y)+")"}},L.point=function(x,y,round){return x instanceof L.Point?x:L.Util.isArray(x)?new L.Point(x[0],x[1]):x===undefined||null===x?x:new L.Point(x,y,round)},L.Bounds=function(a,b){if(a)for(var points=b?[a,b]:a,i=0,len=points.length;len>i;i++)this.extend(points[i])},L.Bounds.prototype={extend:function(point){return point=L.point(point),this.min||this.max?(this.min.x=Math.min(point.x,this.min.x),this.max.x=Math.max(point.x,this.max.x),this.min.y=Math.min(point.y,this.min.y),this.max.y=Math.max(point.y,this.max.y)):(this.min=point.clone(),this.max=point.clone()),this},getCenter:function(round){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,round)},getBottomLeft:function(){return new L.Point(this.min.x,this.max.y)},getTopRight:function(){return new L.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(obj){var min,max;return obj="number"==typeof obj[0]||obj instanceof L.Point?L.point(obj):L.bounds(obj),obj instanceof L.Bounds?(min=obj.min,max=obj.max):min=max=obj,min.x>=this.min.x&&max.x<=this.max.x&&min.y>=this.min.y&&max.y<=this.max.y},intersects:function(bounds){bounds=L.bounds(bounds);var min=this.min,max=this.max,min2=bounds.min,max2=bounds.max,xIntersects=max2.x>=min.x&&min2.x<=max.x,yIntersects=max2.y>=min.y&&min2.y<=max.y;return xIntersects&&yIntersects},isValid:function(){return!(!this.min||!this.max)}},L.bounds=function(a,b){return!a||a instanceof L.Bounds?a:new L.Bounds(a,b)},L.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},L.Transformation.prototype={transform:function(point,scale){return this._transform(point.clone(),scale)},_transform:function(point,scale){return scale=scale||1,point.x=scale*(this._a*point.x+this._b),point.y=scale*(this._c*point.y+this._d),point},untransform:function(point,scale){return scale=scale||1,new L.Point((point.x/scale-this._b)/this._a,(point.y/scale-this._d)/this._c)}},L.DomUtil={get:function(id){return"string"==typeof id?document.getElementById(id):id},getStyle:function(el,style){var value=el.style[style];if(!value&&el.currentStyle&&(value=el.currentStyle[style]),(!value||"auto"===value)&&document.defaultView){var css=document.defaultView.getComputedStyle(el,null);value=css?css[style]:null}return"auto"===value?null:value},getViewportOffset:function(element){var pos,top=0,left=0,el=element,docBody=document.body,docEl=document.documentElement;do{if(top+=el.offsetTop||0,left+=el.offsetLeft||0,top+=parseInt(L.DomUtil.getStyle(el,"borderTopWidth"),10)||0,left+=parseInt(L.DomUtil.getStyle(el,"borderLeftWidth"),10)||0,pos=L.DomUtil.getStyle(el,"position"),el.offsetParent===docBody&&"absolute"===pos)break;if("fixed"===pos){top+=docBody.scrollTop||docEl.scrollTop||0,left+=docBody.scrollLeft||docEl.scrollLeft||0;break}if("relative"===pos&&!el.offsetLeft){var width=L.DomUtil.getStyle(el,"width"),maxWidth=L.DomUtil.getStyle(el,"max-width"),r=el.getBoundingClientRect();("none"!==width||"none"!==maxWidth)&&(left+=r.left+el.clientLeft),top+=r.top+(docBody.scrollTop||docEl.scrollTop||0);break}el=el.offsetParent}while(el);el=element;do{if(el===docBody)break;top-=el.scrollTop||0,left-=el.scrollLeft||0,el=el.parentNode}while(el);return new L.Point(left,top)},documentIsLtr:function(){return L.DomUtil._docIsLtrCached||(L.DomUtil._docIsLtrCached=!0,L.DomUtil._docIsLtr="ltr"===L.DomUtil.getStyle(document.body,"direction")),L.DomUtil._docIsLtr},create:function(tagName,className,container){var el=document.createElement(tagName);return el.className=className,container&&container.appendChild(el),el},hasClass:function(el,name){if(el.classList!==undefined)return el.classList.contains(name);var className=L.DomUtil._getClass(el);return className.length>0&&new RegExp("(^|\\s)"+name+"(\\s|$)").test(className)},addClass:function(el,name){if(el.classList!==undefined)for(var classes=L.Util.splitWords(name),i=0,len=classes.length;len>i;i++)el.classList.add(classes[i]);else if(!L.DomUtil.hasClass(el,name)){var className=L.DomUtil._getClass(el);L.DomUtil._setClass(el,(className?className+" ":"")+name)}},removeClass:function(el,name){el.classList!==undefined?el.classList.remove(name):L.DomUtil._setClass(el,L.Util.trim((" "+L.DomUtil._getClass(el)+" ").replace(" "+name+" "," ")))},_setClass:function(el,name){el.className.baseVal===undefined?el.className=name:el.className.baseVal=name},_getClass:function(el){return el.className.baseVal===undefined?el.className:el.className.baseVal},setOpacity:function(el,value){if("opacity"in el.style)el.style.opacity=value;else if("filter"in el.style){var filter=!1,filterName="DXImageTransform.Microsoft.Alpha";try{filter=el.filters.item(filterName)}catch(e){if(1===value)return}value=Math.round(100*value),filter?(filter.Enabled=100!==value,filter.Opacity=value):el.style.filter+=" progid:"+filterName+"(opacity="+value+")"}},testProp:function(props){for(var style=document.documentElement.style,i=0;i<props.length;i++)if(props[i]in style)return props[i];return!1},getTranslateString:function(point){var is3d=L.Browser.webkit3d,open="translate"+(is3d?"3d":"")+"(",close=(is3d?",0":"")+")";return open+point.x+"px,"+point.y+"px"+close},getScaleString:function(scale,origin){var preTranslateStr=L.DomUtil.getTranslateString(origin.add(origin.multiplyBy(-1*scale))),scaleStr=" scale("+scale+") ";return preTranslateStr+scaleStr},setPosition:function(el,point,disable3D){el._leaflet_pos=point,!disable3D&&L.Browser.any3d?el.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(point):(el.style.left=point.x+"px",el.style.top=point.y+"px")},getPosition:function(el){return el._leaflet_pos}},L.DomUtil.TRANSFORM=L.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),L.DomUtil.TRANSITION=L.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),L.DomUtil.TRANSITION_END="webkitTransition"===L.DomUtil.TRANSITION||"OTransition"===L.DomUtil.TRANSITION?L.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in document)L.extend(L.DomUtil,{disableTextSelection:function(){L.DomEvent.on(window,"selectstart",L.DomEvent.preventDefault)},enableTextSelection:function(){L.DomEvent.off(window,"selectstart",L.DomEvent.preventDefault)}});else{var userSelectProperty=L.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);L.extend(L.DomUtil,{disableTextSelection:function(){if(userSelectProperty){var style=document.documentElement.style;this._userSelect=style[userSelectProperty],style[userSelectProperty]="none"}},enableTextSelection:function(){userSelectProperty&&(document.documentElement.style[userSelectProperty]=this._userSelect,delete this._userSelect)}})}L.extend(L.DomUtil,{disableImageDrag:function(){L.DomEvent.on(window,"dragstart",L.DomEvent.preventDefault)},enableImageDrag:function(){L.DomEvent.off(window,"dragstart",L.DomEvent.preventDefault)}})}(),L.LatLng=function(lat,lng,alt){if(lat=parseFloat(lat),lng=parseFloat(lng),isNaN(lat)||isNaN(lng))throw new Error("Invalid LatLng object: ("+lat+", "+lng+")");this.lat=lat,this.lng=lng,alt!==undefined&&(this.alt=parseFloat(alt))},L.extend(L.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),L.LatLng.prototype={equals:function(obj){if(!obj)return!1;obj=L.latLng(obj);var margin=Math.max(Math.abs(this.lat-obj.lat),Math.abs(this.lng-obj.lng));return margin<=L.LatLng.MAX_MARGIN},toString:function(precision){return"LatLng("+L.Util.formatNum(this.lat,precision)+", "+L.Util.formatNum(this.lng,precision)+")"},distanceTo:function(other){other=L.latLng(other);var R=6378137,d2r=L.LatLng.DEG_TO_RAD,dLat=(other.lat-this.lat)*d2r,dLon=(other.lng-this.lng)*d2r,lat1=this.lat*d2r,lat2=other.lat*d2r,sin1=Math.sin(dLat/2),sin2=Math.sin(dLon/2),a=sin1*sin1+sin2*sin2*Math.cos(lat1)*Math.cos(lat2);return 2*R*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},wrap:function(a,b){var lng=this.lng;return a=a||-180,b=b||180,lng=(lng+b)%(b-a)+(a>lng||lng===b?b:a),new L.LatLng(this.lat,lng)}},L.latLng=function(a,b){return a instanceof L.LatLng?a:L.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new L.LatLng(a[0],a[1],a[2]):null:a===undefined||null===a?a:"object"==typeof a&&"lat"in a?new L.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===undefined?null:new L.LatLng(a,b)},L.LatLngBounds=function(southWest,northEast){if(southWest)for(var latlngs=northEast?[southWest,northEast]:southWest,i=0,len=latlngs.length;len>i;i++)this.extend(latlngs[i])},L.LatLngBounds.prototype={extend:function(obj){if(!obj)return this;var latLng=L.latLng(obj);return obj=null!==latLng?latLng:L.latLngBounds(obj),obj instanceof L.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(obj.lat,this._southWest.lat),this._southWest.lng=Math.min(obj.lng,this._southWest.lng),this._northEast.lat=Math.max(obj.lat,this._northEast.lat),this._northEast.lng=Math.max(obj.lng,this._northEast.lng)):(this._southWest=new L.LatLng(obj.lat,obj.lng),this._northEast=new L.LatLng(obj.lat,obj.lng)):obj instanceof L.LatLngBounds&&(this.extend(obj._southWest),this.extend(obj._northEast)),this},pad:function(bufferRatio){var sw=this._southWest,ne=this._northEast,heightBuffer=Math.abs(sw.lat-ne.lat)*bufferRatio,widthBuffer=Math.abs(sw.lng-ne.lng)*bufferRatio;return new L.LatLngBounds(new L.LatLng(sw.lat-heightBuffer,sw.lng-widthBuffer),new L.LatLng(ne.lat+heightBuffer,ne.lng+widthBuffer))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new L.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(obj){obj="number"==typeof obj[0]||obj instanceof L.LatLng?L.latLng(obj):L.latLngBounds(obj);var sw2,ne2,sw=this._southWest,ne=this._northEast;return obj instanceof L.LatLngBounds?(sw2=obj.getSouthWest(),ne2=obj.getNorthEast()):sw2=ne2=obj,sw2.lat>=sw.lat&&ne2.lat<=ne.lat&&sw2.lng>=sw.lng&&ne2.lng<=ne.lng},intersects:function(bounds){bounds=L.latLngBounds(bounds);var sw=this._southWest,ne=this._northEast,sw2=bounds.getSouthWest(),ne2=bounds.getNorthEast(),latIntersects=ne2.lat>=sw.lat&&sw2.lat<=ne.lat,lngIntersects=ne2.lng>=sw.lng&&sw2.lng<=ne.lng;return latIntersects&&lngIntersects},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(bounds){return bounds?(bounds=L.latLngBounds(bounds),this._southWest.equals(bounds.getSouthWest())&&this._northEast.equals(bounds.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},L.latLngBounds=function(a,b){return!a||a instanceof L.LatLngBounds?a:new L.LatLngBounds(a,b)},L.Projection={},L.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(latlng){var d=L.LatLng.DEG_TO_RAD,max=this.MAX_LATITUDE,lat=Math.max(Math.min(max,latlng.lat),-max),x=latlng.lng*d,y=lat*d;return y=Math.log(Math.tan(Math.PI/4+y/2)),new L.Point(x,y)},unproject:function(point){var d=L.LatLng.RAD_TO_DEG,lng=point.x*d,lat=(2*Math.atan(Math.exp(point.y))-Math.PI/2)*d;return new L.LatLng(lat,lng)}},L.Projection.LonLat={project:function(latlng){return new L.Point(latlng.lng,latlng.lat)},unproject:function(point){return new L.LatLng(point.y,point.x)}},L.CRS={latLngToPoint:function(latlng,zoom){var projectedPoint=this.projection.project(latlng),scale=this.scale(zoom);return this.transformation._transform(projectedPoint,scale)},pointToLatLng:function(point,zoom){var scale=this.scale(zoom),untransformedPoint=this.transformation.untransform(point,scale);return this.projection.unproject(untransformedPoint)},project:function(latlng){return this.projection.project(latlng)},scale:function(zoom){return 256*Math.pow(2,zoom)},getSize:function(zoom){var s=this.scale(zoom);return L.point(s,s)}},L.CRS.Simple=L.extend({},L.CRS,{projection:L.Projection.LonLat,transformation:new L.Transformation(1,0,-1,0),scale:function(zoom){return Math.pow(2,zoom)}}),L.CRS.EPSG3857=L.extend({},L.CRS,{code:"EPSG:3857",projection:L.Projection.SphericalMercator,transformation:new L.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(latlng){var projectedPoint=this.projection.project(latlng),earthRadius=6378137;return projectedPoint.multiplyBy(earthRadius)}}),L.CRS.EPSG900913=L.extend({},L.CRS.EPSG3857,{code:"EPSG:900913"}),L.CRS.EPSG4326=L.extend({},L.CRS,{code:"EPSG:4326",projection:L.Projection.LonLat,transformation:new L.Transformation(1/360,.5,-1/360,.5)}),L.Map=L.Class.extend({includes:L.Mixin.Events,options:{crs:L.CRS.EPSG3857,fadeAnimation:L.DomUtil.TRANSITION&&!L.Browser.android23,trackResize:!0,markerZoomAnimation:L.DomUtil.TRANSITION&&L.Browser.any3d},initialize:function(id,options){options=L.setOptions(this,options),this._initContainer(id),this._initLayout(),this._onResize=L.bind(this._onResize,this),this._initEvents(),options.maxBounds&&this.setMaxBounds(options.maxBounds),options.center&&options.zoom!==undefined&&this.setView(L.latLng(options.center),options.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(options.layers)
},setView:function(center,zoom){return zoom=zoom===undefined?this.getZoom():zoom,this._resetView(L.latLng(center),this._limitZoom(zoom)),this},setZoom:function(zoom,options){return this._loaded?this.setView(this.getCenter(),zoom,{zoom:options}):(this._zoom=this._limitZoom(zoom),this)},zoomIn:function(delta,options){return this.setZoom(this._zoom+(delta||1),options)},zoomOut:function(delta,options){return this.setZoom(this._zoom-(delta||1),options)},setZoomAround:function(latlng,zoom,options){var scale=this.getZoomScale(zoom),viewHalf=this.getSize().divideBy(2),containerPoint=latlng instanceof L.Point?latlng:this.latLngToContainerPoint(latlng),centerOffset=containerPoint.subtract(viewHalf).multiplyBy(1-1/scale),newCenter=this.containerPointToLatLng(viewHalf.add(centerOffset));return this.setView(newCenter,zoom,{zoom:options})},fitBounds:function(bounds,options){options=options||{},bounds=bounds.getBounds?bounds.getBounds():L.latLngBounds(bounds);var paddingTL=L.point(options.paddingTopLeft||options.padding||[0,0]),paddingBR=L.point(options.paddingBottomRight||options.padding||[0,0]),zoom=this.getBoundsZoom(bounds,!1,paddingTL.add(paddingBR)),paddingOffset=paddingBR.subtract(paddingTL).divideBy(2),swPoint=this.project(bounds.getSouthWest(),zoom),nePoint=this.project(bounds.getNorthEast(),zoom),center=this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset),zoom);return zoom=options&&options.maxZoom?Math.min(options.maxZoom,zoom):zoom,this.setView(center,zoom,options)},fitWorld:function(options){return this.fitBounds([[-90,-180],[90,180]],options)},panTo:function(center,options){return this.setView(center,this._zoom,{pan:options})},panBy:function(offset){return this.fire("movestart"),this._rawPanBy(L.point(offset)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(bounds){return bounds=L.latLngBounds(bounds),this.options.maxBounds=bounds,bounds?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(bounds,options){var center=this.getCenter(),newCenter=this._limitCenter(center,this._zoom,bounds);return center.equals(newCenter)?this:this.panTo(newCenter,options)},addLayer:function(layer){var id=L.stamp(layer);return this._layers[id]?this:(this._layers[id]=layer,!layer.options||isNaN(layer.options.maxZoom)&&isNaN(layer.options.minZoom)||(this._zoomBoundLayers[id]=layer,this._updateZoomLevels()),this.options.zoomAnimation&&L.TileLayer&&layer instanceof L.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,layer.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(layer),this)},removeLayer:function(layer){var id=L.stamp(layer);return this._layers[id]?(this._loaded&&layer.onRemove(this),delete this._layers[id],this._loaded&&this.fire("layerremove",{layer:layer}),this._zoomBoundLayers[id]&&(delete this._zoomBoundLayers[id],this._updateZoomLevels()),this.options.zoomAnimation&&L.TileLayer&&layer instanceof L.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,layer.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(layer){return layer?L.stamp(layer)in this._layers:!1},eachLayer:function(method,context){for(var i in this._layers)method.call(context,this._layers[i]);return this},invalidateSize:function(options){if(!this._loaded)return this;options=L.extend({animate:!1,pan:!0},options===!0?{animate:!0}:options);var oldSize=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var newSize=this.getSize(),oldCenter=oldSize.divideBy(2).round(),newCenter=newSize.divideBy(2).round(),offset=oldCenter.subtract(newCenter);return offset.x||offset.y?(options.animate&&options.pan?this.panBy(offset):(options.pan&&this._rawPanBy(offset),this.fire("move"),options.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:oldSize,newSize:newSize})):this},addHandler:function(name,HandlerClass){if(!HandlerClass)return this;var handler=this[name]=new HandlerClass(this);return this._handlers.push(handler),this.options[name]&&handler.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=undefined}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var bounds=this.getPixelBounds(),sw=this.unproject(bounds.getBottomLeft()),ne=this.unproject(bounds.getTopRight());return new L.LatLngBounds(sw,ne)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom===undefined?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(bounds,inside,padding){bounds=L.latLngBounds(bounds);var boundsSize,zoom=this.getMinZoom()-(inside?1:0),maxZoom=this.getMaxZoom(),size=this.getSize(),nw=bounds.getNorthWest(),se=bounds.getSouthEast(),zoomNotFound=!0;padding=L.point(padding||[0,0]);do zoom++,boundsSize=this.project(se,zoom).subtract(this.project(nw,zoom)).add(padding),zoomNotFound=inside?boundsSize.x<size.x||boundsSize.y<size.y:size.contains(boundsSize);while(zoomNotFound&&maxZoom>=zoom);return zoomNotFound&&inside?null:inside?zoom:zoom-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new L.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var topLeftPoint=this._getTopLeftPoint();return new L.Bounds(topLeftPoint,topLeftPoint.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(toZoom){var crs=this.options.crs;return crs.scale(toZoom)/crs.scale(this._zoom)},getScaleZoom:function(scale){return this._zoom+Math.log(scale)/Math.LN2},project:function(latlng,zoom){return zoom=zoom===undefined?this._zoom:zoom,this.options.crs.latLngToPoint(L.latLng(latlng),zoom)},unproject:function(point,zoom){return zoom=zoom===undefined?this._zoom:zoom,this.options.crs.pointToLatLng(L.point(point),zoom)},layerPointToLatLng:function(point){var projectedPoint=L.point(point).add(this.getPixelOrigin());return this.unproject(projectedPoint)},latLngToLayerPoint:function(latlng){var projectedPoint=this.project(L.latLng(latlng))._round();return projectedPoint._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(point){return L.point(point).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(point){return L.point(point).add(this._getMapPanePos())},containerPointToLatLng:function(point){var layerPoint=this.containerPointToLayerPoint(L.point(point));return this.layerPointToLatLng(layerPoint)},latLngToContainerPoint:function(latlng){return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)))},mouseEventToContainerPoint:function(e){return L.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(id){var container=this._container=L.DomUtil.get(id);if(!container)throw new Error("Map container not found.");if(container._leaflet)throw new Error("Map container is already initialized.");container._leaflet=!0},_initLayout:function(){var container=this._container;L.DomUtil.addClass(container,"leaflet-container"+(L.Browser.touch?" leaflet-touch":"")+(L.Browser.retina?" leaflet-retina":"")+(L.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var position=L.DomUtil.getStyle(container,"position");"absolute"!==position&&"relative"!==position&&"fixed"!==position&&(container.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var panes=this._panes={};this._mapPane=panes.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=panes.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),panes.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),panes.shadowPane=this._createPane("leaflet-shadow-pane"),panes.overlayPane=this._createPane("leaflet-overlay-pane"),panes.markerPane=this._createPane("leaflet-marker-pane"),panes.popupPane=this._createPane("leaflet-popup-pane");var zoomHide=" leaflet-zoom-hide";this.options.markerZoomAnimation||(L.DomUtil.addClass(panes.markerPane,zoomHide),L.DomUtil.addClass(panes.shadowPane,zoomHide),L.DomUtil.addClass(panes.popupPane,zoomHide))},_createPane:function(className,container){return L.DomUtil.create("div",className,container||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(layers){layers=layers?L.Util.isArray(layers)?layers:[layers]:[];for(var i=0,len=layers.length;len>i;i++)this.addLayer(layers[i])},_resetView:function(center,zoom,preserveMapOffset,afterZoomAnim){var zoomChanged=this._zoom!==zoom;afterZoomAnim||(this.fire("movestart"),zoomChanged&&this.fire("zoomstart")),this._zoom=zoom,this._initialCenter=center,this._initialTopLeftPoint=this._getNewTopLeftPoint(center),preserveMapOffset?this._initialTopLeftPoint._add(this._getMapPanePos()):L.DomUtil.setPosition(this._mapPane,new L.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var loading=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!preserveMapOffset}),loading&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(zoomChanged||afterZoomAnim)&&this.fire("zoomend"),this.fire("moveend",{hard:!preserveMapOffset})},_rawPanBy:function(offset){L.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(offset))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var i,minZoom=1/0,maxZoom=-1/0,oldZoomSpan=this._getZoomSpan();for(i in this._zoomBoundLayers){var layer=this._zoomBoundLayers[i];isNaN(layer.options.minZoom)||(minZoom=Math.min(minZoom,layer.options.minZoom)),isNaN(layer.options.maxZoom)||(maxZoom=Math.max(maxZoom,layer.options.maxZoom))}i===undefined?this._layersMaxZoom=this._layersMinZoom=undefined:(this._layersMaxZoom=maxZoom,this._layersMinZoom=minZoom),oldZoomSpan!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(onOff){if(L.DomEvent){onOff=onOff||"on",L.DomEvent[onOff](this._container,"click",this._onMouseClick,this);var i,len,events=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,len=events.length;len>i;i++)L.DomEvent[onOff](this._container,events[i],this._fireMouseEvent,this);this.options.trackResize&&L.DomEvent[onOff](window,"resize",this._onResize,this)}},_onResize:function(){L.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=L.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||L.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!L.DomEvent._skipped(e)){var type=e.type;if(type="mouseenter"===type?"mouseover":"mouseleave"===type?"mouseout":type,this.hasEventListeners(type)){"contextmenu"===type&&L.DomEvent.preventDefault(e);var containerPoint=this.mouseEventToContainerPoint(e),layerPoint=this.containerPointToLayerPoint(containerPoint),latlng=this.layerPointToLatLng(layerPoint);this.fire(type,{latlng:latlng,layerPoint:layerPoint,containerPoint:containerPoint,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var i=0,len=this._handlers.length;len>i;i++)this._handlers[i].disable()},whenReady:function(callback,context){return this._loaded?callback.call(context||this,this):this.on("load",callback,context),this},_layerAdd:function(layer){layer.onAdd(this),this.fire("layeradd",{layer:layer})},_getMapPanePos:function(){return L.DomUtil.getPosition(this._mapPane)},_moved:function(){var pos=this._getMapPanePos();return pos&&!pos.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(center,zoom){var viewHalf=this.getSize()._divideBy(2);return this.project(center,zoom)._subtract(viewHalf)._round()},_latLngToNewLayerPoint:function(latlng,newZoom,newCenter){var topLeft=this._getNewTopLeftPoint(newCenter,newZoom).add(this._getMapPanePos());return this.project(latlng,newZoom)._subtract(topLeft)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(latlng){return this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint())},_limitCenter:function(center,zoom,bounds){if(!bounds)return center;var centerPoint=this.project(center,zoom),viewHalf=this.getSize().divideBy(2),viewBounds=new L.Bounds(centerPoint.subtract(viewHalf),centerPoint.add(viewHalf)),offset=this._getBoundsOffset(viewBounds,bounds,zoom);return this.unproject(centerPoint.add(offset),zoom)},_limitOffset:function(offset,bounds){if(!bounds)return offset;var viewBounds=this.getPixelBounds(),newBounds=new L.Bounds(viewBounds.min.add(offset),viewBounds.max.add(offset));return offset.add(this._getBoundsOffset(newBounds,bounds))},_getBoundsOffset:function(pxBounds,maxBounds,zoom){var nwOffset=this.project(maxBounds.getNorthWest(),zoom).subtract(pxBounds.min),seOffset=this.project(maxBounds.getSouthEast(),zoom).subtract(pxBounds.max),dx=this._rebound(nwOffset.x,-seOffset.x),dy=this._rebound(nwOffset.y,-seOffset.y);return new L.Point(dx,dy)},_rebound:function(left,right){return left+right>0?Math.round(left-right)/2:Math.max(0,Math.ceil(left))-Math.max(0,Math.floor(right))},_limitZoom:function(zoom){var min=this.getMinZoom(),max=this.getMaxZoom();return Math.max(min,Math.min(max,zoom))}}),L.map=function(id,options){return new L.Map(id,options)},L.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(latlng){var d=L.LatLng.DEG_TO_RAD,max=this.MAX_LATITUDE,lat=Math.max(Math.min(max,latlng.lat),-max),r=this.R_MAJOR,r2=this.R_MINOR,x=latlng.lng*d*r,y=lat*d,tmp=r2/r,eccent=Math.sqrt(1-tmp*tmp),con=eccent*Math.sin(y);con=Math.pow((1-con)/(1+con),.5*eccent);var ts=Math.tan(.5*(.5*Math.PI-y))/con;return y=-r*Math.log(ts),new L.Point(x,y)},unproject:function(point){for(var con,d=L.LatLng.RAD_TO_DEG,r=this.R_MAJOR,r2=this.R_MINOR,lng=point.x*d/r,tmp=r2/r,eccent=Math.sqrt(1-tmp*tmp),ts=Math.exp(-point.y/r),phi=Math.PI/2-2*Math.atan(ts),numIter=15,tol=1e-7,i=numIter,dphi=.1;Math.abs(dphi)>tol&&--i>0;)con=eccent*Math.sin(phi),dphi=Math.PI/2-2*Math.atan(ts*Math.pow((1-con)/(1+con),.5*eccent))-phi,phi+=dphi;return new L.LatLng(phi*d,lng)}},L.CRS.EPSG3395=L.extend({},L.CRS,{code:"EPSG:3395",projection:L.Projection.Mercator,transformation:function(){var m=L.Projection.Mercator,r=m.R_MAJOR,scale=.5/(Math.PI*r);return new L.Transformation(scale,.5,-scale,.5)}()}),L.TileLayer=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:L.Browser.mobile,updateWhenIdle:L.Browser.mobile},initialize:function(url,options){options=L.setOptions(this,options),options.detectRetina&&L.Browser.retina&&options.maxZoom>0&&(options.tileSize=Math.floor(options.tileSize/2),options.zoomOffset++,options.minZoom>0&&options.minZoom--,this.options.maxZoom--),options.bounds&&(options.bounds=L.latLngBounds(options.bounds)),this._url=url;var subdomains=this.options.subdomains;"string"==typeof subdomains&&(this.options.subdomains=subdomains.split(""))},onAdd:function(map){this._map=map,this._animated=map._zoomAnimated,this._initContainer(),map.on({viewreset:this._reset,moveend:this._update},this),this._animated&&map.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this),map.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(map){return map.addLayer(this),this},onRemove:function(map){this._container.parentNode.removeChild(this._container),map.off({viewreset:this._reset,moveend:this._update},this),this._animated&&map.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||map.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var pane=this._map._panes.tilePane;return this._container&&(pane.appendChild(this._container),this._setAutoZIndex(pane,Math.max)),this},bringToBack:function(){var pane=this._map._panes.tilePane;return this._container&&(pane.insertBefore(this._container,pane.firstChild),this._setAutoZIndex(pane,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(opacity){return this.options.opacity=opacity,this._map&&this._updateOpacity(),this},setZIndex:function(zIndex){return this.options.zIndex=zIndex,this._updateZIndex(),this},setUrl:function(url,noRedraw){return this._url=url,noRedraw||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(pane,compare){var zIndex,i,len,layers=pane.children,edgeZIndex=-compare(1/0,-1/0);for(i=0,len=layers.length;len>i;i++)layers[i]!==this._container&&(zIndex=parseInt(layers[i].style.zIndex,10),isNaN(zIndex)||(edgeZIndex=compare(edgeZIndex,zIndex)));this.options.zIndex=this._container.style.zIndex=(isFinite(edgeZIndex)?edgeZIndex:0)+compare(1,-1)},_updateOpacity:function(){var i,tiles=this._tiles;if(L.Browser.ielt9)for(i in tiles)L.DomUtil.setOpacity(tiles[i],this.options.opacity);else L.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var tilePane=this._map._panes.tilePane;if(!this._container){if(this._container=L.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var className="leaflet-tile-container";this._bgBuffer=L.DomUtil.create("div",className,this._container),this._tileContainer=L.DomUtil.create("div",className,this._container)}else this._tileContainer=this._container;tilePane.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var key in this._tiles)this.fire("tileunload",{tile:this._tiles[key]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var map=this._map,zoom=map.getZoom()+this.options.zoomOffset,zoomN=this.options.maxNativeZoom,tileSize=this.options.tileSize;return zoomN&&zoom>zoomN&&(tileSize=Math.round(map.getZoomScale(zoom)/map.getZoomScale(zoomN)*tileSize)),tileSize},_update:function(){if(this._map){var map=this._map,bounds=map.getPixelBounds(),zoom=map.getZoom(),tileSize=this._getTileSize();if(!(zoom>this.options.maxZoom||zoom<this.options.minZoom)){var tileBounds=L.bounds(bounds.min.divideBy(tileSize)._floor(),bounds.max.divideBy(tileSize)._floor());this._addTilesFromCenterOut(tileBounds),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(tileBounds)}}},_addTilesFromCenterOut:function(bounds){var j,i,point,queue=[],center=bounds.getCenter();for(j=bounds.min.y;j<=bounds.max.y;j++)for(i=bounds.min.x;i<=bounds.max.x;i++)point=new L.Point(i,j),this._tileShouldBeLoaded(point)&&queue.push(point);var tilesToLoad=queue.length;if(0!==tilesToLoad){queue.sort(function(a,b){return a.distanceTo(center)-b.distanceTo(center)});var fragment=document.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=tilesToLoad,i=0;tilesToLoad>i;i++)this._addTile(queue[i],fragment);this._tileContainer.appendChild(fragment)}},_tileShouldBeLoaded:function(tilePoint){if(tilePoint.x+":"+tilePoint.y in this._tiles)return!1;var options=this.options;if(!options.continuousWorld){var limit=this._getWrapTileNum();if(options.noWrap&&(tilePoint.x<0||tilePoint.x>=limit.x)||tilePoint.y<0||tilePoint.y>=limit.y)return!1}if(options.bounds){var tileSize=options.tileSize,nwPoint=tilePoint.multiplyBy(tileSize),sePoint=nwPoint.add([tileSize,tileSize]),nw=this._map.unproject(nwPoint),se=this._map.unproject(sePoint);if(options.continuousWorld||options.noWrap||(nw=nw.wrap(),se=se.wrap()),!options.bounds.intersects([nw,se]))return!1}return!0},_removeOtherTiles:function(bounds){var kArr,x,y,key;for(key in this._tiles)kArr=key.split(":"),x=parseInt(kArr[0],10),y=parseInt(kArr[1],10),(x<bounds.min.x||x>bounds.max.x||y<bounds.min.y||y>bounds.max.y)&&this._removeTile(key)},_removeTile:function(key){var tile=this._tiles[key];this.fire("tileunload",{tile:tile,url:tile.src}),this.options.reuseTiles?(L.DomUtil.removeClass(tile,"leaflet-tile-loaded"),this._unusedTiles.push(tile)):tile.parentNode===this._tileContainer&&this._tileContainer.removeChild(tile),L.Browser.android||(tile.onload=null,tile.src=L.Util.emptyImageUrl),delete this._tiles[key]},_addTile:function(tilePoint,container){var tilePos=this._getTilePos(tilePoint),tile=this._getTile();L.DomUtil.setPosition(tile,tilePos,L.Browser.chrome),this._tiles[tilePoint.x+":"+tilePoint.y]=tile,this._loadTile(tile,tilePoint),tile.parentNode!==this._tileContainer&&container.appendChild(tile)},_getZoomForUrl:function(){var options=this.options,zoom=this._map.getZoom();return options.zoomReverse&&(zoom=options.maxZoom-zoom),zoom+=options.zoomOffset,options.maxNativeZoom?Math.min(zoom,options.maxNativeZoom):zoom},_getTilePos:function(tilePoint){var origin=this._map.getPixelOrigin(),tileSize=this._getTileSize();return tilePoint.multiplyBy(tileSize).subtract(origin)},getTileUrl:function(tilePoint){return L.Util.template(this._url,L.extend({s:this._getSubdomain(tilePoint),z:tilePoint.z,x:tilePoint.x,y:tilePoint.y},this.options))},_getWrapTileNum:function(){var crs=this._map.options.crs,size=crs.getSize(this._map.getZoom());return size.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(tilePoint){var limit=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(tilePoint.x=(tilePoint.x%limit.x+limit.x)%limit.x),this.options.tms&&(tilePoint.y=limit.y-tilePoint.y-1),tilePoint.z=this._getZoomForUrl()},_getSubdomain:function(tilePoint){var index=Math.abs(tilePoint.x+tilePoint.y)%this.options.subdomains.length;return this.options.subdomains[index]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var tile=this._unusedTiles.pop();return this._resetTile(tile),tile}return this._createTile()},_resetTile:function(){},_createTile:function(){var tile=L.DomUtil.create("img","leaflet-tile");return tile.style.width=tile.style.height=this._getTileSize()+"px",tile.galleryimg="no",tile.onselectstart=tile.onmousemove=L.Util.falseFn,L.Browser.ielt9&&this.options.opacity!==undefined&&L.DomUtil.setOpacity(tile,this.options.opacity),L.Browser.mobileWebkit3d&&(tile.style.WebkitBackfaceVisibility="hidden"),tile},_loadTile:function(tile,tilePoint){tile._layer=this,tile.onload=this._tileOnLoad,tile.onerror=this._tileOnError,this._adjustTilePoint(tilePoint),tile.src=this.getTileUrl(tilePoint),this.fire("tileloadstart",{tile:tile,url:tile.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&L.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(L.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var layer=this._layer;this.src!==L.Util.emptyImageUrl&&(L.DomUtil.addClass(this,"leaflet-tile-loaded"),layer.fire("tileload",{tile:this,url:this.src})),layer._tileLoaded()},_tileOnError:function(){var layer=this._layer;layer.fire("tileerror",{tile:this,url:this.src});var newUrl=layer.options.errorTileUrl;newUrl&&(this.src=newUrl),layer._tileLoaded()}}),L.tileLayer=function(url,options){return new L.TileLayer(url,options)},L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(url,options){this._url=url;var wmsParams=L.extend({},this.defaultWmsParams),tileSize=options.tileSize||this.options.tileSize;wmsParams.width=wmsParams.height=options.detectRetina&&L.Browser.retina?2*tileSize:tileSize;for(var i in options)this.options.hasOwnProperty(i)||"crs"===i||(wmsParams[i]=options[i]);this.wmsParams=wmsParams,L.setOptions(this,options)},onAdd:function(map){this._crs=this.options.crs||map.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var projectionKey=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[projectionKey]=this._crs.code,L.TileLayer.prototype.onAdd.call(this,map)},getTileUrl:function(tilePoint){var map=this._map,tileSize=this.options.tileSize,nwPoint=tilePoint.multiplyBy(tileSize),sePoint=nwPoint.add([tileSize,tileSize]),nw=this._crs.project(map.unproject(nwPoint,tilePoint.z)),se=this._crs.project(map.unproject(sePoint,tilePoint.z)),bbox=this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[se.y,nw.x,nw.y,se.x].join(","):[nw.x,se.y,se.x,nw.y].join(","),url=L.Util.template(this._url,{s:this._getSubdomain(tilePoint)});return url+L.Util.getParamString(this.wmsParams,url,!0)+"&BBOX="+bbox},setParams:function(params,noRedraw){return L.extend(this.wmsParams,params),noRedraw||this.redraw(),this}}),L.tileLayer.wms=function(url,options){return new L.TileLayer.WMS(url,options)},L.TileLayer.Canvas=L.TileLayer.extend({options:{async:!1},initialize:function(options){L.setOptions(this,options)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var i in this._tiles)this._redrawTile(this._tiles[i]);return this},_redrawTile:function(tile){this.drawTile(tile,tile._tilePoint,this._map._zoom)},_createTile:function(){var tile=L.DomUtil.create("canvas","leaflet-tile");return tile.width=tile.height=this.options.tileSize,tile.onselectstart=tile.onmousemove=L.Util.falseFn,tile},_loadTile:function(tile,tilePoint){tile._layer=this,tile._tilePoint=tilePoint,this._redrawTile(tile),this.options.async||this.tileDrawn(tile)},drawTile:function(){},tileDrawn:function(tile){this._tileOnLoad.call(tile)}}),L.tileLayer.canvas=function(options){return new L.TileLayer.Canvas(options)},L.ImageOverlay=L.Class.extend({includes:L.Mixin.Events,options:{opacity:1},initialize:function(url,bounds,options){this._url=url,this._bounds=L.latLngBounds(bounds),L.setOptions(this,options)},onAdd:function(map){this._map=map,this._image||this._initImage(),map._panes.overlayPane.appendChild(this._image),map.on("viewreset",this._reset,this),map.options.zoomAnimation&&L.Browser.any3d&&map.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(map){map.getPanes().overlayPane.removeChild(this._image),map.off("viewreset",this._reset,this),map.options.zoomAnimation&&map.off("zoomanim",this._animateZoom,this)},addTo:function(map){return map.addLayer(this),this},setOpacity:function(opacity){return this.options.opacity=opacity,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var pane=this._map._panes.overlayPane;return this._image&&pane.insertBefore(this._image,pane.firstChild),this},setUrl:function(url){this._url=url,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=L.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&L.Browser.any3d?L.DomUtil.addClass(this._image,"leaflet-zoom-animated"):L.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),L.extend(this._image,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var map=this._map,image=this._image,scale=map.getZoomScale(e.zoom),nw=this._bounds.getNorthWest(),se=this._bounds.getSouthEast(),topLeft=map._latLngToNewLayerPoint(nw,e.zoom,e.center),size=map._latLngToNewLayerPoint(se,e.zoom,e.center)._subtract(topLeft),origin=topLeft._add(size._multiplyBy(.5*(1-1/scale)));image.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(origin)+" scale("+scale+") "},_reset:function(){var image=this._image,topLeft=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),size=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(topLeft);L.DomUtil.setPosition(image,topLeft),image.style.width=size.x+"px",image.style.height=size.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){L.DomUtil.setOpacity(this._image,this.options.opacity)}}),L.imageOverlay=function(url,bounds,options){return new L.ImageOverlay(url,bounds,options)},L.Icon=L.Class.extend({options:{className:""},initialize:function(options){L.setOptions(this,options)},createIcon:function(oldIcon){return this._createIcon("icon",oldIcon)},createShadow:function(oldIcon){return this._createIcon("shadow",oldIcon)},_createIcon:function(name,oldIcon){var src=this._getIconUrl(name);if(!src){if("icon"===name)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var img;return img=oldIcon&&"IMG"===oldIcon.tagName?this._createImg(src,oldIcon):this._createImg(src),this._setIconStyles(img,name),img},_setIconStyles:function(img,name){var anchor,options=this.options,size=L.point(options[name+"Size"]);anchor=L.point("shadow"===name?options.shadowAnchor||options.iconAnchor:options.iconAnchor),!anchor&&size&&(anchor=size.divideBy(2,!0)),img.className="leaflet-marker-"+name+" "+options.className,anchor&&(img.style.marginLeft=-anchor.x+"px",img.style.marginTop=-anchor.y+"px"),size&&(img.style.width=size.x+"px",img.style.height=size.y+"px")},_createImg:function(src,el){return el=el||document.createElement("img"),el.src=src,el},_getIconUrl:function(name){return L.Browser.retina&&this.options[name+"RetinaUrl"]?this.options[name+"RetinaUrl"]:this.options[name+"Url"]}}),L.icon=function(options){return new L.Icon(options)},L.Icon.Default=L.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(name){var key=name+"Url";if(this.options[key])return this.options[key];L.Browser.retina&&"icon"===name&&(name+="-2x");var path=L.Icon.Default.imagePath;if(!path)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return path+"/marker-"+name+".png"}}),L.Icon.Default.imagePath=function(){var i,len,src,matches,path,scripts=document.getElementsByTagName("script"),leafletRe=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(i=0,len=scripts.length;len>i;i++)if(src=scripts[i].src,matches=src.match(leafletRe))return path=src.split(leafletRe)[0],(path?path+"/":"")+"../img"}(),L.Marker=L.Class.extend({includes:L.Mixin.Events,options:{icon:new L.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(latlng,options){L.setOptions(this,options),this._latlng=L.latLng(latlng)
},onAdd:function(map){this._map=map,map.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),map.options.zoomAnimation&&map.options.markerZoomAnimation&&map.on("zoomanim",this._animateZoom,this)},addTo:function(map){return map.addLayer(this),this},onRemove:function(map){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),map.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(latlng){return this._latlng=L.latLng(latlng),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(offset){return this.options.zIndexOffset=offset,this.update(),this},setIcon:function(icon){return this.options.icon=icon,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var pos=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(pos)}return this},_initIcon:function(){var options=this.options,map=this._map,animation=map.options.zoomAnimation&&map.options.markerZoomAnimation,classToAdd=animation?"leaflet-zoom-animated":"leaflet-zoom-hide",icon=options.icon.createIcon(this._icon),addIcon=!1;icon!==this._icon&&(this._icon&&this._removeIcon(),addIcon=!0,options.title&&(icon.title=options.title),options.alt&&(icon.alt=options.alt)),L.DomUtil.addClass(icon,classToAdd),options.keyboard&&(icon.tabIndex="0"),this._icon=icon,this._initInteraction(),options.riseOnHover&&L.DomEvent.on(icon,"mouseover",this._bringToFront,this).on(icon,"mouseout",this._resetZIndex,this);var newShadow=options.icon.createShadow(this._shadow),addShadow=!1;newShadow!==this._shadow&&(this._removeShadow(),addShadow=!0),newShadow&&L.DomUtil.addClass(newShadow,classToAdd),this._shadow=newShadow,options.opacity<1&&this._updateOpacity();var panes=this._map._panes;addIcon&&panes.markerPane.appendChild(this._icon),newShadow&&addShadow&&panes.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&L.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(pos){L.DomUtil.setPosition(this._icon,pos),this._shadow&&L.DomUtil.setPosition(this._shadow,pos),this._zIndex=pos.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(offset){this._icon.style.zIndex=this._zIndex+offset},_animateZoom:function(opt){var pos=this._map._latLngToNewLayerPoint(this._latlng,opt.zoom,opt.center).round();this._setPos(pos)},_initInteraction:function(){if(this.options.clickable){var icon=this._icon,events=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.addClass(icon,"leaflet-clickable"),L.DomEvent.on(icon,"click",this._onMouseClick,this),L.DomEvent.on(icon,"keypress",this._onKeyPress,this);for(var i=0;i<events.length;i++)L.DomEvent.on(icon,events[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var wasDragged=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||wasDragged)&&L.DomEvent.stopPropagation(e),wasDragged||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&L.DomEvent.preventDefault(e),"mousedown"!==e.type?L.DomEvent.stopPropagation(e):L.DomEvent.preventDefault(e)},setOpacity:function(opacity){return this.options.opacity=opacity,this._map&&this._updateOpacity(),this},_updateOpacity:function(){L.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&L.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),L.marker=function(latlng,options){return new L.Marker(latlng,options)},L.DivIcon=L.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(oldIcon){var div=oldIcon&&"DIV"===oldIcon.tagName?oldIcon:document.createElement("div"),options=this.options;return div.innerHTML=options.html!==!1?options.html:"",options.bgPos&&(div.style.backgroundPosition=-options.bgPos.x+"px "+-options.bgPos.y+"px"),this._setIconStyles(div,"icon"),div},createShadow:function(){return null}}),L.divIcon=function(options){return new L.DivIcon(options)},L.Map.mergeOptions({closePopupOnClick:!0}),L.Popup=L.Class.extend({includes:L.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(options,source){L.setOptions(this,options),this._source=source,this._animated=L.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(map){this._map=map,this._container||this._initLayout();var animFade=map.options.fadeAnimation;animFade&&L.DomUtil.setOpacity(this._container,0),map._panes.popupPane.appendChild(this._container),map.on(this._getEvents(),this),this.update(),animFade&&L.DomUtil.setOpacity(this._container,1),this.fire("open"),map.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(map){return map.addLayer(this),this},openOn:function(map){return map.openPopup(this),this},onRemove:function(map){map._panes.popupPane.removeChild(this._container),L.Util.falseFn(this._container.offsetWidth),map.off(this._getEvents(),this),map.options.fadeAnimation&&L.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),map.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(latlng){return this._latlng=L.latLng(latlng),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(content){return this._content=content,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var events={viewreset:this._updatePosition};return this._animated&&(events.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(events.preclick=this._close),this.options.keepInView&&(events.moveend=this._adjustPan),events},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var closeButton,prefix="leaflet-popup",containerClass=prefix+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),container=this._container=L.DomUtil.create("div",containerClass);this.options.closeButton&&(closeButton=this._closeButton=L.DomUtil.create("a",prefix+"-close-button",container),closeButton.href="#close",closeButton.innerHTML="&#215;",L.DomEvent.disableClickPropagation(closeButton),L.DomEvent.on(closeButton,"click",this._onCloseButtonClick,this));var wrapper=this._wrapper=L.DomUtil.create("div",prefix+"-content-wrapper",container);L.DomEvent.disableClickPropagation(wrapper),this._contentNode=L.DomUtil.create("div",prefix+"-content",wrapper),L.DomEvent.disableScrollPropagation(this._contentNode),L.DomEvent.on(wrapper,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",prefix+"-tip-container",container),this._tip=L.DomUtil.create("div",prefix+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var container=this._contentNode,style=container.style;style.width="",style.whiteSpace="nowrap";var width=container.offsetWidth;width=Math.min(width,this.options.maxWidth),width=Math.max(width,this.options.minWidth),style.width=width+1+"px",style.whiteSpace="",style.height="";var height=container.offsetHeight,maxHeight=this.options.maxHeight,scrolledClass="leaflet-popup-scrolled";maxHeight&&height>maxHeight?(style.height=maxHeight+"px",L.DomUtil.addClass(container,scrolledClass)):L.DomUtil.removeClass(container,scrolledClass),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var pos=this._map.latLngToLayerPoint(this._latlng),animated=this._animated,offset=L.point(this.options.offset);animated&&L.DomUtil.setPosition(this._container,pos),this._containerBottom=-offset.y-(animated?0:pos.y),this._containerLeft=-Math.round(this._containerWidth/2)+offset.x+(animated?0:pos.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(opt){var pos=this._map._latLngToNewLayerPoint(this._latlng,opt.zoom,opt.center);L.DomUtil.setPosition(this._container,pos)},_adjustPan:function(){if(this.options.autoPan){var map=this._map,containerHeight=this._container.offsetHeight,containerWidth=this._containerWidth,layerPos=new L.Point(this._containerLeft,-containerHeight-this._containerBottom);this._animated&&layerPos._add(L.DomUtil.getPosition(this._container));var containerPos=map.layerPointToContainerPoint(layerPos),padding=L.point(this.options.autoPanPadding),paddingTL=L.point(this.options.autoPanPaddingTopLeft||padding),paddingBR=L.point(this.options.autoPanPaddingBottomRight||padding),size=map.getSize(),dx=0,dy=0;containerPos.x+containerWidth+paddingBR.x>size.x&&(dx=containerPos.x+containerWidth-size.x+paddingBR.x),containerPos.x-dx-paddingTL.x<0&&(dx=containerPos.x-paddingTL.x),containerPos.y+containerHeight+paddingBR.y>size.y&&(dy=containerPos.y+containerHeight-size.y+paddingBR.y),containerPos.y-dy-paddingTL.y<0&&(dy=containerPos.y-paddingTL.y),(dx||dy)&&map.fire("autopanstart").panBy([dx,dy])}},_onCloseButtonClick:function(e){this._close(),L.DomEvent.stop(e)}}),L.popup=function(options,source){return new L.Popup(options,source)},L.Map.include({openPopup:function(popup,latlng,options){if(this.closePopup(),!(popup instanceof L.Popup)){var content=popup;popup=new L.Popup(options).setLatLng(latlng).setContent(content)}return popup._isOpen=!0,this._popup=popup,this.addLayer(popup)},closePopup:function(popup){return popup&&popup!==this._popup||(popup=this._popup,this._popup=null),popup&&(this.removeLayer(popup),popup._isOpen=!1),this}}),L.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(content,options){var anchor=L.point(this.options.icon.options.popupAnchor||[0,0]);return anchor=anchor.add(L.Popup.prototype.options.offset),options&&options.offset&&(anchor=anchor.add(options.offset)),options=L.extend({offset:anchor},options),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),content instanceof L.Popup?(L.setOptions(content,options),this._popup=content):this._popup=new L.Popup(options,this).setContent(content),this},setPopupContent:function(content){return this._popup&&this._popup.setContent(content),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),L.LayerGroup=L.Class.extend({initialize:function(layers){this._layers={};var i,len;if(layers)for(i=0,len=layers.length;len>i;i++)this.addLayer(layers[i])},addLayer:function(layer){var id=this.getLayerId(layer);return this._layers[id]=layer,this._map&&this._map.addLayer(layer),this},removeLayer:function(layer){var id=layer in this._layers?layer:this.getLayerId(layer);return this._map&&this._layers[id]&&this._map.removeLayer(this._layers[id]),delete this._layers[id],this},hasLayer:function(layer){return layer?layer in this._layers||this.getLayerId(layer)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(methodName){var i,layer,args=Array.prototype.slice.call(arguments,1);for(i in this._layers)layer=this._layers[i],layer[methodName]&&layer[methodName].apply(layer,args);return this},onAdd:function(map){this._map=map,this.eachLayer(map.addLayer,map)},onRemove:function(map){this.eachLayer(map.removeLayer,map),this._map=null},addTo:function(map){return map.addLayer(this),this},eachLayer:function(method,context){for(var i in this._layers)method.call(context,this._layers[i]);return this},getLayer:function(id){return this._layers[id]},getLayers:function(){var layers=[];for(var i in this._layers)layers.push(this._layers[i]);return layers},setZIndex:function(zIndex){return this.invoke("setZIndex",zIndex)},getLayerId:function(layer){return L.stamp(layer)}}),L.layerGroup=function(layers){return new L.LayerGroup(layers)},L.FeatureGroup=L.LayerGroup.extend({includes:L.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(layer){return this.hasLayer(layer)?this:("on"in layer&&layer.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),L.LayerGroup.prototype.addLayer.call(this,layer),this._popupContent&&layer.bindPopup&&layer.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:layer}))},removeLayer:function(layer){return this.hasLayer(layer)?(layer in this._layers&&(layer=this._layers[layer]),layer.off(L.FeatureGroup.EVENTS,this._propagateEvent,this),L.LayerGroup.prototype.removeLayer.call(this,layer),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:layer})):this},bindPopup:function(content,options){return this._popupContent=content,this._popupOptions=options,this.invoke("bindPopup",content,options)},openPopup:function(latlng){for(var id in this._layers){this._layers[id].openPopup(latlng);break}return this},setStyle:function(style){return this.invoke("setStyle",style)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var bounds=new L.LatLngBounds;return this.eachLayer(function(layer){bounds.extend(layer instanceof L.Marker?layer.getLatLng():layer.getBounds())}),bounds},_propagateEvent:function(e){e=L.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),L.featureGroup=function(layers){return new L.FeatureGroup(layers)},L.Path=L.Class.extend({includes:[L.Mixin.Events],statics:{CLIP_PADDING:function(){var max=L.Browser.mobile?1280:2e3,target=(max/Math.max(window.outerWidth,window.outerHeight)-1)/2;return Math.max(0,Math.min(.5,target))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(options){L.setOptions(this,options)},onAdd:function(map){this._map=map,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),map.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(map){return map.addLayer(this),this},onRemove:function(map){map._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,L.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),map.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(style){return L.setOptions(this,style),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),L.Map.include({_updatePathViewport:function(){var p=L.Path.CLIP_PADDING,size=this.getSize(),panePos=L.DomUtil.getPosition(this._mapPane),min=panePos.multiplyBy(-1)._subtract(size.multiplyBy(p)._round()),max=min.add(size.multiplyBy(1+2*p)._round());this._pathViewport=new L.Bounds(min,max)}}),L.Path.SVG_NS="http://www.w3.org/2000/svg",L.Browser.svg=!(!document.createElementNS||!document.createElementNS(L.Path.SVG_NS,"svg").createSVGRect),L.Path=L.Path.extend({statics:{SVG:L.Browser.svg},bringToFront:function(){var root=this._map._pathRoot,path=this._container;return path&&root.lastChild!==path&&root.appendChild(path),this},bringToBack:function(){var root=this._map._pathRoot,path=this._container,first=root.firstChild;return path&&first!==path&&root.insertBefore(path,first),this},getPathString:function(){},_createElement:function(name){return document.createElementNS(L.Path.SVG_NS,name)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&L.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var str=this.getPathString();str||(str="M0 0"),this._path.setAttribute("d",str)},_initEvents:function(){if(this.options.clickable){(L.Browser.svg||!L.Browser.vml)&&L.DomUtil.addClass(this._path,"leaflet-clickable"),L.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var events=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],i=0;i<events.length;i++)L.DomEvent.on(this._container,events[i],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this.hasEventListeners(e.type)){var map=this._map,containerPoint=map.mouseEventToContainerPoint(e),layerPoint=map.containerPointToLayerPoint(containerPoint),latlng=map.layerPointToLatLng(layerPoint);this.fire(e.type,{latlng:latlng,layerPoint:layerPoint,containerPoint:containerPoint,originalEvent:e}),"contextmenu"===e.type&&L.DomEvent.preventDefault(e),"mousemove"!==e.type&&L.DomEvent.stopPropagation(e)}}}),L.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=L.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&L.Browser.any3d?(L.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):L.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var scale=this.getZoomScale(e.zoom),offset=this._getCenterOffset(e.center)._multiplyBy(-scale)._add(this._pathViewport.min);this._pathRoot.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(offset)+" scale("+scale+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var vp=this._pathViewport,min=vp.min,max=vp.max,width=max.x-min.x,height=max.y-min.y,root=this._pathRoot,pane=this._panes.overlayPane;L.Browser.mobileWebkit&&pane.removeChild(root),L.DomUtil.setPosition(root,min),root.setAttribute("width",width),root.setAttribute("height",height),root.setAttribute("viewBox",[min.x,min.y,width,height].join(" ")),L.Browser.mobileWebkit&&pane.appendChild(root)}}}),L.Path.include({bindPopup:function(content,options){return content instanceof L.Popup?this._popup=content:((!this._popup||options)&&(this._popup=new L.Popup(options,this)),this._popup.setContent(content)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(latlng){return this._popup&&(latlng=latlng||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:latlng})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),L.Browser.vml=!L.Browser.svg&&function(){try{var div=document.createElement("div");div.innerHTML='<v:shape adj="1"/>';var shape=div.firstChild;return shape.style.behavior="url(#default#VML)",shape&&"object"==typeof shape.adj}catch(e){return!1}}(),L.Path=L.Browser.svg||!L.Browser.vml?L.Path:L.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(name){return document.createElement("<lvml:"+name+' class="lvml">')}}catch(e){return function(name){return document.createElement("<"+name+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var container=this._container=this._createElement("shape");L.DomUtil.addClass(container,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&L.DomUtil.addClass(container,"leaflet-clickable"),container.coordsize="1 1",this._path=this._createElement("path"),container.appendChild(this._path),this._map._pathRoot.appendChild(container)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var stroke=this._stroke,fill=this._fill,options=this.options,container=this._container;container.stroked=options.stroke,container.filled=options.fill,options.stroke?(stroke||(stroke=this._stroke=this._createElement("stroke"),stroke.endcap="round",container.appendChild(stroke)),stroke.weight=options.weight+"px",stroke.color=options.color,stroke.opacity=options.opacity,stroke.dashStyle=options.dashArray?L.Util.isArray(options.dashArray)?options.dashArray.join(" "):options.dashArray.replace(/( *, *)/g," "):"",options.lineCap&&(stroke.endcap=options.lineCap.replace("butt","flat")),options.lineJoin&&(stroke.joinstyle=options.lineJoin)):stroke&&(container.removeChild(stroke),this._stroke=null),options.fill?(fill||(fill=this._fill=this._createElement("fill"),container.appendChild(fill)),fill.color=options.fillColor||options.color,fill.opacity=options.fillOpacity):fill&&(container.removeChild(fill),this._fill=null)},_updatePath:function(){var style=this._container.style;style.display="none",this._path.v=this.getPathString()+" ",style.display=""}}),L.Map.include(L.Browser.svg||!L.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var root=this._pathRoot=document.createElement("div");root.className="leaflet-vml-container",this._panes.overlayPane.appendChild(root),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),L.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),L.Path=L.Path.SVG&&!window.L_PREFER_CANVAS||!L.Browser.canvas?L.Path:L.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(style){return L.setOptions(this,style),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(map){map.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!L.Path._updateRequest&&(L.Path._updateRequest=L.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){L.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var options=this.options;options.stroke&&(this._ctx.lineWidth=options.weight,this._ctx.strokeStyle=options.color),options.fill&&(this._ctx.fillStyle=options.fillColor||options.color)},_drawPath:function(){var i,j,len,len2,point,drawMethod;for(this._ctx.beginPath(),i=0,len=this._parts.length;len>i;i++){for(j=0,len2=this._parts[i].length;len2>j;j++)point=this._parts[i][j],drawMethod=(0===j?"move":"line")+"To",this._ctx[drawMethod](point.x,point.y);this instanceof L.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var ctx=this._ctx,options=this.options;this._drawPath(),ctx.save(),this._updateStyle(),options.fill&&(ctx.globalAlpha=options.fillOpacity,ctx.fill()),options.stroke&&(ctx.globalAlpha=options.opacity,ctx.stroke()),ctx.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(e){this._containsPoint(e.layerPoint)&&this.fire("click",e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),L.Map.include(L.Path.SVG&&!window.L_PREFER_CANVAS||!L.Browser.canvas?{}:{_initPathRoot:function(){var ctx,root=this._pathRoot;root||(root=this._pathRoot=document.createElement("canvas"),root.style.position="absolute",ctx=this._canvasCtx=root.getContext("2d"),ctx.lineCap="round",ctx.lineJoin="round",this._panes.overlayPane.appendChild(root),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var vp=this._pathViewport,min=vp.min,size=vp.max.subtract(min),root=this._pathRoot;L.DomUtil.setPosition(root,min),root.width=size.x,root.height=size.y,root.getContext("2d").translate(-min.x,-min.y)}}}),L.LineUtil={simplify:function(points,tolerance){if(!tolerance||!points.length)return points.slice();var sqTolerance=tolerance*tolerance;return points=this._reducePoints(points,sqTolerance),points=this._simplifyDP(points,sqTolerance)},pointToSegmentDistance:function(p,p1,p2){return Math.sqrt(this._sqClosestPointOnSegment(p,p1,p2,!0))},closestPointOnSegment:function(p,p1,p2){return this._sqClosestPointOnSegment(p,p1,p2)},_simplifyDP:function(points,sqTolerance){var len=points.length,ArrayConstructor=typeof Uint8Array!=undefined+""?Uint8Array:Array,markers=new ArrayConstructor(len);markers[0]=markers[len-1]=1,this._simplifyDPStep(points,markers,sqTolerance,0,len-1);var i,newPoints=[];for(i=0;len>i;i++)markers[i]&&newPoints.push(points[i]);return newPoints},_simplifyDPStep:function(points,markers,sqTolerance,first,last){var index,i,sqDist,maxSqDist=0;for(i=first+1;last-1>=i;i++)sqDist=this._sqClosestPointOnSegment(points[i],points[first],points[last],!0),sqDist>maxSqDist&&(index=i,maxSqDist=sqDist);maxSqDist>sqTolerance&&(markers[index]=1,this._simplifyDPStep(points,markers,sqTolerance,first,index),this._simplifyDPStep(points,markers,sqTolerance,index,last))},_reducePoints:function(points,sqTolerance){for(var reducedPoints=[points[0]],i=1,prev=0,len=points.length;len>i;i++)this._sqDist(points[i],points[prev])>sqTolerance&&(reducedPoints.push(points[i]),prev=i);return len-1>prev&&reducedPoints.push(points[len-1]),reducedPoints},clipSegment:function(a,b,bounds,useLastCode){var codeOut,p,newCode,codeA=useLastCode?this._lastCode:this._getBitCode(a,bounds),codeB=this._getBitCode(b,bounds);for(this._lastCode=codeB;;){if(!(codeA|codeB))return[a,b];if(codeA&codeB)return!1;codeOut=codeA||codeB,p=this._getEdgeIntersection(a,b,codeOut,bounds),newCode=this._getBitCode(p,bounds),codeOut===codeA?(a=p,codeA=newCode):(b=p,codeB=newCode)}},_getEdgeIntersection:function(a,b,code,bounds){var dx=b.x-a.x,dy=b.y-a.y,min=bounds.min,max=bounds.max;return 8&code?new L.Point(a.x+dx*(max.y-a.y)/dy,max.y):4&code?new L.Point(a.x+dx*(min.y-a.y)/dy,min.y):2&code?new L.Point(max.x,a.y+dy*(max.x-a.x)/dx):1&code?new L.Point(min.x,a.y+dy*(min.x-a.x)/dx):void 0},_getBitCode:function(p,bounds){var code=0;return p.x<bounds.min.x?code|=1:p.x>bounds.max.x&&(code|=2),p.y<bounds.min.y?code|=4:p.y>bounds.max.y&&(code|=8),code},_sqDist:function(p1,p2){var dx=p2.x-p1.x,dy=p2.y-p1.y;return dx*dx+dy*dy},_sqClosestPointOnSegment:function(p,p1,p2,sqDist){var t,x=p1.x,y=p1.y,dx=p2.x-x,dy=p2.y-y,dot=dx*dx+dy*dy;return dot>0&&(t=((p.x-x)*dx+(p.y-y)*dy)/dot,t>1?(x=p2.x,y=p2.y):t>0&&(x+=dx*t,y+=dy*t)),dx=p.x-x,dy=p.y-y,sqDist?dx*dx+dy*dy:new L.Point(x,y)}},L.Polyline=L.Path.extend({initialize:function(latlngs,options){L.Path.prototype.initialize.call(this,options),this._latlngs=this._convertLatLngs(latlngs)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var i=0,len=this._latlngs.length;len>i;i++)this._originalPoints[i]=this._map.latLngToLayerPoint(this._latlngs[i])},getPathString:function(){for(var i=0,len=this._parts.length,str="";len>i;i++)str+=this._getPathPartStr(this._parts[i]);return str},getLatLngs:function(){return this._latlngs},setLatLngs:function(latlngs){return this._latlngs=this._convertLatLngs(latlngs),this.redraw()},addLatLng:function(latlng){return this._latlngs.push(L.latLng(latlng)),this.redraw()},spliceLatLngs:function(){var removed=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),removed},closestLayerPoint:function(p){for(var p1,p2,minDistance=1/0,parts=this._parts,minPoint=null,j=0,jLen=parts.length;jLen>j;j++)for(var points=parts[j],i=1,len=points.length;len>i;i++){p1=points[i-1],p2=points[i];var sqDist=L.LineUtil._sqClosestPointOnSegment(p,p1,p2,!0);minDistance>sqDist&&(minDistance=sqDist,minPoint=L.LineUtil._sqClosestPointOnSegment(p,p1,p2))}return minPoint&&(minPoint.distance=Math.sqrt(minDistance)),minPoint},getBounds:function(){return new L.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(latlngs,overwrite){var i,len,target=overwrite?latlngs:[];for(i=0,len=latlngs.length;len>i;i++){if(L.Util.isArray(latlngs[i])&&"number"!=typeof latlngs[i][0])return;target[i]=L.latLng(latlngs[i])}return target},_initEvents:function(){L.Path.prototype._initEvents.call(this)
},_getPathPartStr:function(points){for(var p,round=L.Path.VML,j=0,len2=points.length,str="";len2>j;j++)p=points[j],round&&p._round(),str+=(j?"L":"M")+p.x+" "+p.y;return str},_clipPoints:function(){var i,k,segment,points=this._originalPoints,len=points.length;if(this.options.noClip)return void(this._parts=[points]);this._parts=[];var parts=this._parts,vp=this._map._pathViewport,lu=L.LineUtil;for(i=0,k=0;len-1>i;i++)segment=lu.clipSegment(points[i],points[i+1],vp,i),segment&&(parts[k]=parts[k]||[],parts[k].push(segment[0]),(segment[1]!==points[i+1]||i===len-2)&&(parts[k].push(segment[1]),k++))},_simplifyPoints:function(){for(var parts=this._parts,lu=L.LineUtil,i=0,len=parts.length;len>i;i++)parts[i]=lu.simplify(parts[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),L.Path.prototype._updatePath.call(this))}}),L.polyline=function(latlngs,options){return new L.Polyline(latlngs,options)},L.PolyUtil={},L.PolyUtil.clipPolygon=function(points,bounds){var clippedPoints,i,j,k,a,b,len,edge,p,edges=[1,4,2,8],lu=L.LineUtil;for(i=0,len=points.length;len>i;i++)points[i]._code=lu._getBitCode(points[i],bounds);for(k=0;4>k;k++){for(edge=edges[k],clippedPoints=[],i=0,len=points.length,j=len-1;len>i;j=i++)a=points[i],b=points[j],a._code&edge?b._code&edge||(p=lu._getEdgeIntersection(b,a,edge,bounds),p._code=lu._getBitCode(p,bounds),clippedPoints.push(p)):(b._code&edge&&(p=lu._getEdgeIntersection(b,a,edge,bounds),p._code=lu._getBitCode(p,bounds),clippedPoints.push(p)),clippedPoints.push(a));points=clippedPoints}return points},L.Polygon=L.Polyline.extend({options:{fill:!0},initialize:function(latlngs,options){L.Polyline.prototype.initialize.call(this,latlngs,options),this._initWithHoles(latlngs)},_initWithHoles:function(latlngs){var i,len,hole;if(latlngs&&L.Util.isArray(latlngs[0])&&"number"!=typeof latlngs[0][0])for(this._latlngs=this._convertLatLngs(latlngs[0]),this._holes=latlngs.slice(1),i=0,len=this._holes.length;len>i;i++)hole=this._holes[i]=this._convertLatLngs(this._holes[i]),hole[0].equals(hole[hole.length-1])&&hole.pop();latlngs=this._latlngs,latlngs.length>=2&&latlngs[0].equals(latlngs[latlngs.length-1])&&latlngs.pop()},projectLatlngs:function(){if(L.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var i,j,len,len2;for(i=0,len=this._holes.length;len>i;i++)for(this._holePoints[i]=[],j=0,len2=this._holes[i].length;len2>j;j++)this._holePoints[i][j]=this._map.latLngToLayerPoint(this._holes[i][j])}},setLatLngs:function(latlngs){return latlngs&&L.Util.isArray(latlngs[0])&&"number"!=typeof latlngs[0][0]?(this._initWithHoles(latlngs),this.redraw()):L.Polyline.prototype.setLatLngs.call(this,latlngs)},_clipPoints:function(){var points=this._originalPoints,newParts=[];if(this._parts=[points].concat(this._holePoints),!this.options.noClip){for(var i=0,len=this._parts.length;len>i;i++){var clipped=L.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);clipped.length&&newParts.push(clipped)}this._parts=newParts}},_getPathPartStr:function(points){var str=L.Polyline.prototype._getPathPartStr.call(this,points);return str+(L.Browser.svg?"z":"x")}}),L.polygon=function(latlngs,options){return new L.Polygon(latlngs,options)},function(){function createMulti(Klass){return L.FeatureGroup.extend({initialize:function(latlngs,options){this._layers={},this._options=options,this.setLatLngs(latlngs)},setLatLngs:function(latlngs){var i=0,len=latlngs.length;for(this.eachLayer(function(layer){len>i?layer.setLatLngs(latlngs[i++]):this.removeLayer(layer)},this);len>i;)this.addLayer(new Klass(latlngs[i++],this._options));return this},getLatLngs:function(){var latlngs=[];return this.eachLayer(function(layer){latlngs.push(layer.getLatLngs())}),latlngs}})}L.MultiPolyline=createMulti(L.Polyline),L.MultiPolygon=createMulti(L.Polygon),L.multiPolyline=function(latlngs,options){return new L.MultiPolyline(latlngs,options)},L.multiPolygon=function(latlngs,options){return new L.MultiPolygon(latlngs,options)}}(),L.Rectangle=L.Polygon.extend({initialize:function(latLngBounds,options){L.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(latLngBounds),options)},setBounds:function(latLngBounds){this.setLatLngs(this._boundsToLatLngs(latLngBounds))},_boundsToLatLngs:function(latLngBounds){return latLngBounds=L.latLngBounds(latLngBounds),[latLngBounds.getSouthWest(),latLngBounds.getNorthWest(),latLngBounds.getNorthEast(),latLngBounds.getSouthEast()]}}),L.rectangle=function(latLngBounds,options){return new L.Rectangle(latLngBounds,options)},L.Circle=L.Path.extend({initialize:function(latlng,radius,options){L.Path.prototype.initialize.call(this,options),this._latlng=L.latLng(latlng),this._mRadius=radius},options:{fill:!0},setLatLng:function(latlng){return this._latlng=L.latLng(latlng),this.redraw()},setRadius:function(radius){return this._mRadius=radius,this.redraw()},projectLatlngs:function(){var lngRadius=this._getLngRadius(),latlng=this._latlng,pointLeft=this._map.latLngToLayerPoint([latlng.lat,latlng.lng-lngRadius]);this._point=this._map.latLngToLayerPoint(latlng),this._radius=Math.max(this._point.x-pointLeft.x,1)},getBounds:function(){var lngRadius=this._getLngRadius(),latRadius=this._mRadius/40075017*360,latlng=this._latlng;return new L.LatLngBounds([latlng.lat-latRadius,latlng.lng-lngRadius],[latlng.lat+latRadius,latlng.lng+lngRadius])},getLatLng:function(){return this._latlng},getPathString:function(){var p=this._point,r=this._radius;return this._checkIfEmpty()?"":L.Browser.svg?"M"+p.x+","+(p.y-r)+"A"+r+","+r+",0,1,1,"+(p.x-.1)+","+(p.y-r)+" z":(p._round(),r=Math.round(r),"AL "+p.x+","+p.y+" "+r+","+r+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(L.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var vp=this._map._pathViewport,r=this._radius,p=this._point;return p.x-r>vp.max.x||p.y-r>vp.max.y||p.x+r<vp.min.x||p.y+r<vp.min.y}}),L.circle=function(latlng,radius,options){return new L.Circle(latlng,radius,options)},L.CircleMarker=L.Circle.extend({options:{radius:10,weight:2},initialize:function(latlng,options){L.Circle.prototype.initialize.call(this,latlng,null,options),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){L.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(latlng){return L.Circle.prototype.setLatLng.call(this,latlng),this._popup&&this._popup._isOpen&&this._popup.setLatLng(latlng),this},setRadius:function(radius){return this.options.radius=this._radius=radius,this.redraw()},getRadius:function(){return this._radius}}),L.circleMarker=function(latlng,options){return new L.CircleMarker(latlng,options)},L.Polyline.include(L.Path.CANVAS?{_containsPoint:function(p,closed){var i,j,k,len,len2,dist,part,w=this.options.weight/2;for(L.Browser.touch&&(w+=10),i=0,len=this._parts.length;len>i;i++)for(part=this._parts[i],j=0,len2=part.length,k=len2-1;len2>j;k=j++)if((closed||0!==j)&&(dist=L.LineUtil.pointToSegmentDistance(p,part[k],part[j]),w>=dist))return!0;return!1}}:{}),L.Polygon.include(L.Path.CANVAS?{_containsPoint:function(p){var part,p1,p2,i,j,k,len,len2,inside=!1;if(L.Polyline.prototype._containsPoint.call(this,p,!0))return!0;for(i=0,len=this._parts.length;len>i;i++)for(part=this._parts[i],j=0,len2=part.length,k=len2-1;len2>j;k=j++)p1=part[j],p2=part[k],p1.y>p.y!=p2.y>p.y&&p.x<(p2.x-p1.x)*(p.y-p1.y)/(p2.y-p1.y)+p1.x&&(inside=!inside);return inside}}:{}),L.Circle.include(L.Path.CANVAS?{_drawPath:function(){var p=this._point;this._ctx.beginPath(),this._ctx.arc(p.x,p.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(p){var center=this._point,w2=this.options.stroke?this.options.weight/2:0;return p.distanceTo(center)<=this._radius+w2}}:{}),L.CircleMarker.include(L.Path.CANVAS?{_updateStyle:function(){L.Path.prototype._updateStyle.call(this)}}:{}),L.GeoJSON=L.FeatureGroup.extend({initialize:function(geojson,options){L.setOptions(this,options),this._layers={},geojson&&this.addData(geojson)},addData:function(geojson){var i,len,feature,features=L.Util.isArray(geojson)?geojson:geojson.features;if(features){for(i=0,len=features.length;len>i;i++)feature=features[i],(feature.geometries||feature.geometry||feature.features||feature.coordinates)&&this.addData(features[i]);return this}var options=this.options;if(!options.filter||options.filter(geojson)){var layer=L.GeoJSON.geometryToLayer(geojson,options.pointToLayer,options.coordsToLatLng,options);return layer.feature=L.GeoJSON.asFeature(geojson),layer.defaultOptions=layer.options,this.resetStyle(layer),options.onEachFeature&&options.onEachFeature(geojson,layer),this.addLayer(layer)}},resetStyle:function(layer){var style=this.options.style;style&&(L.Util.extend(layer.options,layer.defaultOptions),this._setLayerStyle(layer,style))},setStyle:function(style){this.eachLayer(function(layer){this._setLayerStyle(layer,style)},this)},_setLayerStyle:function(layer,style){"function"==typeof style&&(style=style(layer.feature)),layer.setStyle&&layer.setStyle(style)}}),L.extend(L.GeoJSON,{geometryToLayer:function(geojson,pointToLayer,coordsToLatLng,vectorOptions){var latlng,latlngs,i,len,geometry="Feature"===geojson.type?geojson.geometry:geojson,coords=geometry.coordinates,layers=[];switch(coordsToLatLng=coordsToLatLng||this.coordsToLatLng,geometry.type){case"Point":return latlng=coordsToLatLng(coords),pointToLayer?pointToLayer(geojson,latlng):new L.Marker(latlng);case"MultiPoint":for(i=0,len=coords.length;len>i;i++)latlng=coordsToLatLng(coords[i]),layers.push(pointToLayer?pointToLayer(geojson,latlng):new L.Marker(latlng));return new L.FeatureGroup(layers);case"LineString":return latlngs=this.coordsToLatLngs(coords,0,coordsToLatLng),new L.Polyline(latlngs,vectorOptions);case"Polygon":if(2===coords.length&&!coords[1].length)throw new Error("Invalid GeoJSON object.");return latlngs=this.coordsToLatLngs(coords,1,coordsToLatLng),new L.Polygon(latlngs,vectorOptions);case"MultiLineString":return latlngs=this.coordsToLatLngs(coords,1,coordsToLatLng),new L.MultiPolyline(latlngs,vectorOptions);case"MultiPolygon":return latlngs=this.coordsToLatLngs(coords,2,coordsToLatLng),new L.MultiPolygon(latlngs,vectorOptions);case"GeometryCollection":for(i=0,len=geometry.geometries.length;len>i;i++)layers.push(this.geometryToLayer({geometry:geometry.geometries[i],type:"Feature",properties:geojson.properties},pointToLayer,coordsToLatLng,vectorOptions));return new L.FeatureGroup(layers);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(coords){return new L.LatLng(coords[1],coords[0],coords[2])},coordsToLatLngs:function(coords,levelsDeep,coordsToLatLng){var latlng,i,len,latlngs=[];for(i=0,len=coords.length;len>i;i++)latlng=levelsDeep?this.coordsToLatLngs(coords[i],levelsDeep-1,coordsToLatLng):(coordsToLatLng||this.coordsToLatLng)(coords[i]),latlngs.push(latlng);return latlngs},latLngToCoords:function(latlng){var coords=[latlng.lng,latlng.lat];return latlng.alt!==undefined&&coords.push(latlng.alt),coords},latLngsToCoords:function(latLngs){for(var coords=[],i=0,len=latLngs.length;len>i;i++)coords.push(L.GeoJSON.latLngToCoords(latLngs[i]));return coords},getFeature:function(layer,newGeometry){return layer.feature?L.extend({},layer.feature,{geometry:newGeometry}):L.GeoJSON.asFeature(newGeometry)},asFeature:function(geoJSON){return"Feature"===geoJSON.type?geoJSON:{type:"Feature",properties:{},geometry:geoJSON}}});var PointToGeoJSON={toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}};L.Marker.include(PointToGeoJSON),L.Circle.include(PointToGeoJSON),L.CircleMarker.include(PointToGeoJSON),L.Polyline.include({toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"LineString",coordinates:L.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),L.Polygon.include({toGeoJSON:function(){var i,len,hole,coords=[L.GeoJSON.latLngsToCoords(this.getLatLngs())];if(coords[0].push(coords[0][0]),this._holes)for(i=0,len=this._holes.length;len>i;i++)hole=L.GeoJSON.latLngsToCoords(this._holes[i]),hole.push(hole[0]),coords.push(hole);return L.GeoJSON.getFeature(this,{type:"Polygon",coordinates:coords})}}),function(){function multiToGeoJSON(type){return function(){var coords=[];return this.eachLayer(function(layer){coords.push(layer.toGeoJSON().geometry.coordinates)}),L.GeoJSON.getFeature(this,{type:type,coordinates:coords})}}L.MultiPolyline.include({toGeoJSON:multiToGeoJSON("MultiLineString")}),L.MultiPolygon.include({toGeoJSON:multiToGeoJSON("MultiPolygon")}),L.LayerGroup.include({toGeoJSON:function(){var json,geometry=this.feature&&this.feature.geometry,jsons=[];if(geometry&&"MultiPoint"===geometry.type)return multiToGeoJSON("MultiPoint").call(this);var isGeometryCollection=geometry&&"GeometryCollection"===geometry.type;return this.eachLayer(function(layer){layer.toGeoJSON&&(json=layer.toGeoJSON(),jsons.push(isGeometryCollection?json.geometry:L.GeoJSON.asFeature(json)))}),isGeometryCollection?L.GeoJSON.getFeature(this,{geometries:jsons,type:"GeometryCollection"}):{type:"FeatureCollection",features:jsons}}})}(),L.geoJson=function(geojson,options){return new L.GeoJSON(geojson,options)},L.DomEvent={addListener:function(obj,type,fn,context){var handler,originalHandler,newType,id=L.stamp(fn),key="_leaflet_"+type+id;return obj[key]?this:(handler=function(e){return fn.call(context||obj,e||L.DomEvent._getEvent())},L.Browser.pointer&&0===type.indexOf("touch")?this.addPointerListener(obj,type,handler,id):(L.Browser.touch&&"dblclick"===type&&this.addDoubleTapListener&&this.addDoubleTapListener(obj,handler,id),"addEventListener"in obj?"mousewheel"===type?(obj.addEventListener("DOMMouseScroll",handler,!1),obj.addEventListener(type,handler,!1)):"mouseenter"===type||"mouseleave"===type?(originalHandler=handler,newType="mouseenter"===type?"mouseover":"mouseout",handler=function(e){return L.DomEvent._checkMouse(obj,e)?originalHandler(e):void 0},obj.addEventListener(newType,handler,!1)):"click"===type&&L.Browser.android?(originalHandler=handler,handler=function(e){return L.DomEvent._filterClick(e,originalHandler)},obj.addEventListener(type,handler,!1)):obj.addEventListener(type,handler,!1):"attachEvent"in obj&&obj.attachEvent("on"+type,handler),obj[key]=handler,this))},removeListener:function(obj,type,fn){var id=L.stamp(fn),key="_leaflet_"+type+id,handler=obj[key];return handler?(L.Browser.pointer&&0===type.indexOf("touch")?this.removePointerListener(obj,type,id):L.Browser.touch&&"dblclick"===type&&this.removeDoubleTapListener?this.removeDoubleTapListener(obj,id):"removeEventListener"in obj?"mousewheel"===type?(obj.removeEventListener("DOMMouseScroll",handler,!1),obj.removeEventListener(type,handler,!1)):"mouseenter"===type||"mouseleave"===type?obj.removeEventListener("mouseenter"===type?"mouseover":"mouseout",handler,!1):obj.removeEventListener(type,handler,!1):"detachEvent"in obj&&obj.detachEvent("on"+type,handler),obj[key]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,L.DomEvent._skipped(e),this},disableScrollPropagation:function(el){var stop=L.DomEvent.stopPropagation;return L.DomEvent.on(el,"mousewheel",stop).on(el,"MozMousePixelScroll",stop)},disableClickPropagation:function(el){for(var stop=L.DomEvent.stopPropagation,i=L.Draggable.START.length-1;i>=0;i--)L.DomEvent.on(el,L.Draggable.START[i],stop);return L.DomEvent.on(el,"click",L.DomEvent._fakeStop).on(el,"dblclick",stop)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return L.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,container){if(!container)return new L.Point(e.clientX,e.clientY);var rect=container.getBoundingClientRect();return new L.Point(e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop)},getWheelDelta:function(e){var delta=0;return e.wheelDelta&&(delta=e.wheelDelta/120),e.detail&&(delta=-e.detail/3),delta},_skipEvents:{},_fakeStop:function(e){L.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var skipped=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,skipped},_checkMouse:function(el,e){var related=e.relatedTarget;if(!related)return!0;try{for(;related&&related!==el;)related=related.parentNode}catch(err){return!1}return related!==el},_getEvent:function(){var e=window.event;if(!e)for(var caller=arguments.callee.caller;caller&&(e=caller.arguments[0],!e||window.Event!==e.constructor);)caller=caller.caller;return e},_filterClick:function(e,handler){var timeStamp=e.timeStamp||e.originalEvent.timeStamp,elapsed=L.DomEvent._lastClick&&timeStamp-L.DomEvent._lastClick;return elapsed&&elapsed>100&&500>elapsed||e.target._simulatedClick&&!e._simulated?void L.DomEvent.stop(e):(L.DomEvent._lastClick=timeStamp,handler(e))}},L.DomEvent.on=L.DomEvent.addListener,L.DomEvent.off=L.DomEvent.removeListener,L.Draggable=L.Class.extend({includes:L.Mixin.Events,statics:{START:L.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(element,dragStartTarget){this._element=element,this._dragStartTarget=dragStartTarget||element},enable:function(){if(!this._enabled){for(var i=L.Draggable.START.length-1;i>=0;i--)L.DomEvent.on(this._dragStartTarget,L.Draggable.START[i],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var i=L.Draggable.START.length-1;i>=0;i--)L.DomEvent.off(this._dragStartTarget,L.Draggable.START[i],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!(e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(L.DomEvent.stopPropagation(e),L.Draggable._disabled||(L.DomUtil.disableImageDrag(),L.DomUtil.disableTextSelection(),this._moving)))){var first=e.touches?e.touches[0]:e;this._startPoint=new L.Point(first.clientX,first.clientY),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),L.DomEvent.on(document,L.Draggable.MOVE[e.type],this._onMove,this).on(document,L.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var first=e.touches&&1===e.touches.length?e.touches[0]:e,newPoint=new L.Point(first.clientX,first.clientY),offset=newPoint.subtract(this._startPoint);(offset.x||offset.y)&&(L.Browser.touch&&Math.abs(offset.x)+Math.abs(offset.y)<3||(L.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(offset),L.DomUtil.addClass(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,L.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(offset),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),L.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){L.DomUtil.removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(L.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var i in L.Draggable.MOVE)L.DomEvent.off(document,L.Draggable.MOVE[i],this._onMove).off(document,L.Draggable.END[i],this._onUp);L.DomUtil.enableImageDrag(),L.DomUtil.enableTextSelection(),this._moved&&this._moving&&(L.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),L.Handler=L.Class.extend({initialize:function(map){this._map=map},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),L.Map.mergeOptions({dragging:!0,inertia:!L.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:L.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){var map=this._map;this._draggable=new L.Draggable(map._mapPane,map._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),map.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),map.on("viewreset",this._onViewReset,this),map.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var map=this._map;map._panAnim&&map._panAnim.stop(),map.fire("movestart").fire("dragstart"),map.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var time=this._lastTime=+new Date,pos=this._lastPos=this._draggable._newPos;this._positions.push(pos),this._times.push(time),time-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var pxCenter=this._map.getSize()._divideBy(2),pxWorldCenter=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=pxWorldCenter.subtract(pxCenter).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var worldWidth=this._worldWidth,halfWidth=Math.round(worldWidth/2),dx=this._initialWorldOffset,x=this._draggable._newPos.x,newX1=(x-halfWidth+dx)%worldWidth+halfWidth-dx,newX2=(x+halfWidth+dx)%worldWidth-halfWidth-dx,newX=Math.abs(newX1+dx)<Math.abs(newX2+dx)?newX1:newX2;this._draggable._newPos.x=newX},_onDragEnd:function(e){var map=this._map,options=map.options,delay=+new Date-this._lastTime,noInertia=!options.inertia||delay>options.inertiaThreshold||!this._positions[0];if(map.fire("dragend",e),noInertia)map.fire("moveend");else{var direction=this._lastPos.subtract(this._positions[0]),duration=(this._lastTime+delay-this._times[0])/1e3,ease=options.easeLinearity,speedVector=direction.multiplyBy(ease/duration),speed=speedVector.distanceTo([0,0]),limitedSpeed=Math.min(options.inertiaMaxSpeed,speed),limitedSpeedVector=speedVector.multiplyBy(limitedSpeed/speed),decelerationDuration=limitedSpeed/(options.inertiaDeceleration*ease),offset=limitedSpeedVector.multiplyBy(-decelerationDuration/2).round();offset.x&&offset.y?(offset=map._limitOffset(offset,map.options.maxBounds),L.Util.requestAnimFrame(function(){map.panBy(offset,{duration:decelerationDuration,easeLinearity:ease,noMoveStart:!0})})):map.fire("moveend")}}}),L.Map.addInitHook("addHandler","dragging",L.Map.Drag),L.Map.mergeOptions({doubleClickZoom:!0}),L.Map.DoubleClickZoom=L.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var map=this._map,zoom=map.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===map.options.doubleClickZoom?map.setZoom(zoom):map.setZoomAround(e.containerPoint,zoom)}}),L.Map.addInitHook("addHandler","doubleClickZoom",L.Map.DoubleClickZoom),L.Map.mergeOptions({scrollWheelZoom:!0}),L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),L.DomEvent.on(this._map._container,"MozMousePixelScroll",L.DomEvent.preventDefault),this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),L.DomEvent.off(this._map._container,"MozMousePixelScroll",L.DomEvent.preventDefault)},_onWheelScroll:function(e){var delta=L.DomEvent.getWheelDelta(e);this._delta+=delta,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var left=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(L.bind(this._performZoom,this),left),L.DomEvent.preventDefault(e),L.DomEvent.stopPropagation(e)},_performZoom:function(){var map=this._map,delta=this._delta,zoom=map.getZoom();delta=delta>0?Math.ceil(delta):Math.floor(delta),delta=Math.max(Math.min(delta,4),-4),delta=map._limitZoom(zoom+delta)-zoom,this._delta=0,this._startTime=null,delta&&("center"===map.options.scrollWheelZoom?map.setZoom(zoom+delta):map.setZoomAround(this._lastMousePos,zoom+delta))}}),L.Map.addInitHook("addHandler","scrollWheelZoom",L.Map.ScrollWheelZoom),L.extend(L.DomEvent,{_touchstart:L.Browser.msPointer?"MSPointerDown":L.Browser.pointer?"pointerdown":"touchstart",_touchend:L.Browser.msPointer?"MSPointerUp":L.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(obj,handler,id){function onTouchStart(e){var count;if(L.Browser.pointer?(trackedTouches.push(e.pointerId),count=trackedTouches.length):count=e.touches.length,!(count>1)){var now=Date.now(),delta=now-(last||now);touch=e.touches?e.touches[0]:e,doubleTap=delta>0&&delay>=delta,last=now}}function onTouchEnd(e){if(L.Browser.pointer){var idx=trackedTouches.indexOf(e.pointerId);if(-1===idx)return;trackedTouches.splice(idx,1)}if(doubleTap){if(L.Browser.pointer){var prop,newTouch={};for(var i in touch)prop=touch[i],newTouch[i]="function"==typeof prop?prop.bind(touch):prop;touch=newTouch}touch.type="dblclick",handler(touch),last=null}}var last,touch,doubleTap=!1,delay=250,pre="_leaflet_",touchstart=this._touchstart,touchend=this._touchend,trackedTouches=[];obj[pre+touchstart+id]=onTouchStart,obj[pre+touchend+id]=onTouchEnd;var endElement=L.Browser.pointer?document.documentElement:obj;return obj.addEventListener(touchstart,onTouchStart,!1),endElement.addEventListener(touchend,onTouchEnd,!1),L.Browser.pointer&&endElement.addEventListener(L.DomEvent.POINTER_CANCEL,onTouchEnd,!1),this},removeDoubleTapListener:function(obj,id){var pre="_leaflet_";return obj.removeEventListener(this._touchstart,obj[pre+this._touchstart+id],!1),(L.Browser.pointer?document.documentElement:obj).removeEventListener(this._touchend,obj[pre+this._touchend+id],!1),L.Browser.pointer&&document.documentElement.removeEventListener(L.DomEvent.POINTER_CANCEL,obj[pre+this._touchend+id],!1),this}}),L.extend(L.DomEvent,{POINTER_DOWN:L.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:L.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:L.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:L.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(obj,type,handler,id){switch(type){case"touchstart":return this.addPointerListenerStart(obj,type,handler,id);case"touchend":return this.addPointerListenerEnd(obj,type,handler,id);case"touchmove":return this.addPointerListenerMove(obj,type,handler,id);default:throw"Unknown touch event type"}},addPointerListenerStart:function(obj,type,handler,id){var pre="_leaflet_",pointers=this._pointers,cb=function(e){L.DomEvent.preventDefault(e);for(var alreadyInArray=!1,i=0;i<pointers.length;i++)if(pointers[i].pointerId===e.pointerId){alreadyInArray=!0;break}alreadyInArray||pointers.push(e),e.touches=pointers.slice(),e.changedTouches=[e],handler(e)};if(obj[pre+"touchstart"+id]=cb,obj.addEventListener(this.POINTER_DOWN,cb,!1),!this._pointerDocumentListener){var internalCb=function(e){for(var i=0;i<pointers.length;i++)if(pointers[i].pointerId===e.pointerId){pointers.splice(i,1);break}};document.documentElement.addEventListener(this.POINTER_UP,internalCb,!1),document.documentElement.addEventListener(this.POINTER_CANCEL,internalCb,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(obj,type,handler,id){function cb(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var i=0;i<touches.length;i++)if(touches[i].pointerId===e.pointerId){touches[i]=e;break}e.touches=touches.slice(),e.changedTouches=[e],handler(e)}}var pre="_leaflet_",touches=this._pointers;return obj[pre+"touchmove"+id]=cb,obj.addEventListener(this.POINTER_MOVE,cb,!1),this},addPointerListenerEnd:function(obj,type,handler,id){var pre="_leaflet_",touches=this._pointers,cb=function(e){for(var i=0;i<touches.length;i++)if(touches[i].pointerId===e.pointerId){touches.splice(i,1);break}e.touches=touches.slice(),e.changedTouches=[e],handler(e)};return obj[pre+"touchend"+id]=cb,obj.addEventListener(this.POINTER_UP,cb,!1),obj.addEventListener(this.POINTER_CANCEL,cb,!1),this},removePointerListener:function(obj,type,id){var pre="_leaflet_",cb=obj[pre+type+id];switch(type){case"touchstart":obj.removeEventListener(this.POINTER_DOWN,cb,!1);break;case"touchmove":obj.removeEventListener(this.POINTER_MOVE,cb,!1);break;case"touchend":obj.removeEventListener(this.POINTER_UP,cb,!1),obj.removeEventListener(this.POINTER_CANCEL,cb,!1)}return this}}),L.Map.mergeOptions({touchZoom:L.Browser.touch&&!L.Browser.android23,bounceAtZoomLimits:!0}),L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){L.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var map=this._map;if(e.touches&&2===e.touches.length&&!map._animatingZoom&&!this._zooming){var p1=map.mouseEventToLayerPoint(e.touches[0]),p2=map.mouseEventToLayerPoint(e.touches[1]),viewCenter=map._getCenterLayerPoint();this._startCenter=p1.add(p2)._divideBy(2),this._startDist=p1.distanceTo(p2),this._moved=!1,this._zooming=!0,this._centerOffset=viewCenter.subtract(this._startCenter),map._panAnim&&map._panAnim.stop(),L.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this),L.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var map=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var p1=map.mouseEventToLayerPoint(e.touches[0]),p2=map.mouseEventToLayerPoint(e.touches[1]);this._scale=p1.distanceTo(p2)/this._startDist,this._delta=p1._add(p2)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(map.options.bounceAtZoomLimits||!(map.getZoom()===map.getMinZoom()&&this._scale<1||map.getZoom()===map.getMaxZoom()&&this._scale>1))&&(this._moved||(L.DomUtil.addClass(map._mapPane,"leaflet-touching"),map.fire("movestart").fire("zoomstart"),this._moved=!0),L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),L.DomEvent.preventDefault(e))}},_updateOnMove:function(){var map=this._map,origin=this._getScaleOrigin(),center=map.layerPointToLatLng(origin),zoom=map.getScaleZoom(this._scale);map._animateZoom(center,zoom,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var map=this._map;this._zooming=!1,L.DomUtil.removeClass(map._mapPane,"leaflet-touching"),L.Util.cancelAnimFrame(this._animRequest),L.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var origin=this._getScaleOrigin(),center=map.layerPointToLatLng(origin),oldZoom=map.getZoom(),floatZoomDelta=map.getScaleZoom(this._scale)-oldZoom,roundZoomDelta=floatZoomDelta>0?Math.ceil(floatZoomDelta):Math.floor(floatZoomDelta),zoom=map._limitZoom(oldZoom+roundZoomDelta),scale=map.getZoomScale(zoom)/this._scale;map._animateZoom(center,zoom,origin,scale)},_getScaleOrigin:function(){var centerOffset=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(centerOffset)}}),L.Map.addInitHook("addHandler","touchZoom",L.Map.TouchZoom),L.Map.mergeOptions({tap:!0,tapTolerance:15}),L.Map.Tap=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){L.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(L.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);
var first=e.touches[0],el=first.target;this._startPos=this._newPos=new L.Point(first.clientX,first.clientY),el.tagName&&"a"===el.tagName.toLowerCase()&&L.DomUtil.addClass(el,"leaflet-active"),this._holdTimeout=setTimeout(L.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",first))},this),1e3),L.DomEvent.on(document,"touchmove",this._onMove,this).on(document,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),L.DomEvent.off(document,"touchmove",this._onMove,this).off(document,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var first=e.changedTouches[0],el=first.target;el&&el.tagName&&"a"===el.tagName.toLowerCase()&&L.DomUtil.removeClass(el,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",first)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var first=e.touches[0];this._newPos=new L.Point(first.clientX,first.clientY)},_simulateEvent:function(type,e){var simulatedEvent=document.createEvent("MouseEvents");simulatedEvent._simulated=!0,e.target._simulatedClick=!0,simulatedEvent.initMouseEvent(type,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(simulatedEvent)}}),L.Browser.touch&&!L.Browser.pointer&&L.Map.addInitHook("addHandler","tap",L.Map.Tap),L.Map.mergeOptions({boxZoom:!0}),L.Map.BoxZoom=L.Handler.extend({initialize:function(map){this._map=map,this._container=map._container,this._pane=map._panes.overlayPane,this._moved=!1},addHooks:function(){L.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){L.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){return this._moved=!1,!e.shiftKey||1!==e.which&&1!==e.button?!1:(L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),void L.DomEvent.on(document,"mousemove",this._onMouseMove,this).on(document,"mouseup",this._onMouseUp,this).on(document,"keydown",this._onKeyDown,this))},_onMouseMove:function(e){this._moved||(this._box=L.DomUtil.create("div","leaflet-zoom-box",this._pane),L.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var startPoint=this._startLayerPoint,box=this._box,layerPoint=this._map.mouseEventToLayerPoint(e),offset=layerPoint.subtract(startPoint),newPos=new L.Point(Math.min(layerPoint.x,startPoint.x),Math.min(layerPoint.y,startPoint.y));L.DomUtil.setPosition(box,newPos),this._moved=!0,box.style.width=Math.max(0,Math.abs(offset.x)-4)+"px",box.style.height=Math.max(0,Math.abs(offset.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),L.DomEvent.off(document,"mousemove",this._onMouseMove).off(document,"mouseup",this._onMouseUp).off(document,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var map=this._map,layerPoint=map.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(layerPoint)){var bounds=new L.LatLngBounds(map.layerPointToLatLng(this._startLayerPoint),map.layerPointToLatLng(layerPoint));map.fitBounds(bounds),map.fire("boxzoomend",{boxZoomBounds:bounds})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),L.Map.addInitHook("addHandler","boxZoom",L.Map.BoxZoom),L.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),L.Map.Keyboard=L.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(map){this._map=map,this._setPanOffset(map.options.keyboardPanOffset),this._setZoomOffset(map.options.keyboardZoomOffset)},addHooks:function(){var container=this._map._container;-1===container.tabIndex&&(container.tabIndex="0"),L.DomEvent.on(container,"focus",this._onFocus,this).on(container,"blur",this._onBlur,this).on(container,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var container=this._map._container;L.DomEvent.off(container,"focus",this._onFocus,this).off(container,"blur",this._onBlur,this).off(container,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var body=document.body,docEl=document.documentElement,top=body.scrollTop||docEl.scrollTop,left=body.scrollLeft||docEl.scrollLeft;this._map._container.focus(),window.scrollTo(left,top)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(pan){var i,len,keys=this._panKeys={},codes=this.keyCodes;for(i=0,len=codes.left.length;len>i;i++)keys[codes.left[i]]=[-1*pan,0];for(i=0,len=codes.right.length;len>i;i++)keys[codes.right[i]]=[pan,0];for(i=0,len=codes.down.length;len>i;i++)keys[codes.down[i]]=[0,pan];for(i=0,len=codes.up.length;len>i;i++)keys[codes.up[i]]=[0,-1*pan]},_setZoomOffset:function(zoom){var i,len,keys=this._zoomKeys={},codes=this.keyCodes;for(i=0,len=codes.zoomIn.length;len>i;i++)keys[codes.zoomIn[i]]=zoom;for(i=0,len=codes.zoomOut.length;len>i;i++)keys[codes.zoomOut[i]]=-zoom},_addHooks:function(){L.DomEvent.on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){L.DomEvent.off(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var key=e.keyCode,map=this._map;if(key in this._panKeys){if(map._panAnim&&map._panAnim._inProgress)return;map.panBy(this._panKeys[key]),map.options.maxBounds&&map.panInsideBounds(map.options.maxBounds)}else{if(!(key in this._zoomKeys))return;map.setZoom(map.getZoom()+this._zoomKeys[key])}L.DomEvent.stop(e)}}),L.Map.addInitHook("addHandler","keyboard",L.Map.Keyboard),L.Handler.MarkerDrag=L.Handler.extend({initialize:function(marker){this._marker=marker},addHooks:function(){var icon=this._marker._icon;this._draggable||(this._draggable=new L.Draggable(icon,icon)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),L.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),L.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var marker=this._marker,shadow=marker._shadow,iconPos=L.DomUtil.getPosition(marker._icon),latlng=marker._map.layerPointToLatLng(iconPos);shadow&&L.DomUtil.setPosition(shadow,iconPos),marker._latlng=latlng,marker.fire("move",{latlng:latlng}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),L.Control=L.Class.extend({options:{position:"topright"},initialize:function(options){L.setOptions(this,options)},getPosition:function(){return this.options.position},setPosition:function(position){var map=this._map;return map&&map.removeControl(this),this.options.position=position,map&&map.addControl(this),this},getContainer:function(){return this._container},addTo:function(map){this._map=map;var container=this._container=this.onAdd(map),pos=this.getPosition(),corner=map._controlCorners[pos];return L.DomUtil.addClass(container,"leaflet-control"),-1!==pos.indexOf("bottom")?corner.insertBefore(container,corner.firstChild):corner.appendChild(container),this},removeFrom:function(map){var pos=this.getPosition(),corner=map._controlCorners[pos];return corner.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(map),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),L.control=function(options){return new L.Control(options)},L.Map.include({addControl:function(control){return control.addTo(this),this},removeControl:function(control){return control.removeFrom(this),this},_initControlPos:function(){function createCorner(vSide,hSide){var className=l+vSide+" "+l+hSide;corners[vSide+hSide]=L.DomUtil.create("div",className,container)}var corners=this._controlCorners={},l="leaflet-",container=this._controlContainer=L.DomUtil.create("div",l+"control-container",this._container);createCorner("top","left"),createCorner("top","right"),createCorner("bottom","left"),createCorner("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),L.Control.Zoom=L.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(map){var zoomName="leaflet-control-zoom",container=L.DomUtil.create("div",zoomName+" leaflet-bar");return this._map=map,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,zoomName+"-in",container,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,zoomName+"-out",container,this._zoomOut,this),this._updateDisabled(),map.on("zoomend zoomlevelschange",this._updateDisabled,this),container},onRemove:function(map){map.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(html,title,className,container,fn,context){var link=L.DomUtil.create("a",className,container);link.innerHTML=html,link.href="#",link.title=title;var stop=L.DomEvent.stopPropagation;return L.DomEvent.on(link,"click",stop).on(link,"mousedown",stop).on(link,"dblclick",stop).on(link,"click",L.DomEvent.preventDefault).on(link,"click",fn,context).on(link,"click",this._refocusOnMap,context),link},_updateDisabled:function(){var map=this._map,className="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,className),L.DomUtil.removeClass(this._zoomOutButton,className),map._zoom===map.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,className),map._zoom===map.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,className)}}),L.Map.mergeOptions({zoomControl:!0}),L.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new L.Control.Zoom,this.addControl(this.zoomControl))}),L.control.zoom=function(options){return new L.Control.Zoom(options)},L.Control.Attribution=L.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(options){L.setOptions(this,options),this._attributions={}},onAdd:function(map){this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent.disableClickPropagation(this._container);for(var i in map._layers)map._layers[i].getAttribution&&this.addAttribution(map._layers[i].getAttribution());return map.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(map){map.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(prefix){return this.options.prefix=prefix,this._update(),this},addAttribution:function(text){return text?(this._attributions[text]||(this._attributions[text]=0),this._attributions[text]++,this._update(),this):void 0},removeAttribution:function(text){return text?(this._attributions[text]&&(this._attributions[text]--,this._update()),this):void 0},_update:function(){if(this._map){var attribs=[];for(var i in this._attributions)this._attributions[i]&&attribs.push(i);var prefixAndAttribs=[];this.options.prefix&&prefixAndAttribs.push(this.options.prefix),attribs.length&&prefixAndAttribs.push(attribs.join(", ")),this._container.innerHTML=prefixAndAttribs.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),L.Map.mergeOptions({attributionControl:!0}),L.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new L.Control.Attribution).addTo(this))}),L.control.attribution=function(options){return new L.Control.Attribution(options)},L.Control.Scale=L.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(map){this._map=map;var className="leaflet-control-scale",container=L.DomUtil.create("div",className),options=this.options;return this._addScales(options,className,container),map.on(options.updateWhenIdle?"moveend":"move",this._update,this),map.whenReady(this._update,this),container},onRemove:function(map){map.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(options,className,container){options.metric&&(this._mScale=L.DomUtil.create("div",className+"-line",container)),options.imperial&&(this._iScale=L.DomUtil.create("div",className+"-line",container))},_update:function(){var bounds=this._map.getBounds(),centerLat=bounds.getCenter().lat,halfWorldMeters=6378137*Math.PI*Math.cos(centerLat*Math.PI/180),dist=halfWorldMeters*(bounds.getNorthEast().lng-bounds.getSouthWest().lng)/180,size=this._map.getSize(),options=this.options,maxMeters=0;size.x>0&&(maxMeters=dist*(options.maxWidth/size.x)),this._updateScales(options,maxMeters)},_updateScales:function(options,maxMeters){options.metric&&maxMeters&&this._updateMetric(maxMeters),options.imperial&&maxMeters&&this._updateImperial(maxMeters)},_updateMetric:function(maxMeters){var meters=this._getRoundNum(maxMeters);this._mScale.style.width=this._getScaleWidth(meters/maxMeters)+"px",this._mScale.innerHTML=1e3>meters?meters+" m":meters/1e3+" km"},_updateImperial:function(maxMeters){var maxMiles,miles,feet,maxFeet=3.2808399*maxMeters,scale=this._iScale;maxFeet>5280?(maxMiles=maxFeet/5280,miles=this._getRoundNum(maxMiles),scale.style.width=this._getScaleWidth(miles/maxMiles)+"px",scale.innerHTML=miles+" mi"):(feet=this._getRoundNum(maxFeet),scale.style.width=this._getScaleWidth(feet/maxFeet)+"px",scale.innerHTML=feet+" ft")},_getScaleWidth:function(ratio){return Math.round(this.options.maxWidth*ratio)-10},_getRoundNum:function(num){var pow10=Math.pow(10,(Math.floor(num)+"").length-1),d=num/pow10;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,pow10*d}}),L.control.scale=function(options){return new L.Control.Scale(options)},L.Control.Layers=L.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(baseLayers,overlays,options){L.setOptions(this,options),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in baseLayers)this._addLayer(baseLayers[i],i);for(i in overlays)this._addLayer(overlays[i],i,!0)},onAdd:function(map){return this._initLayout(),this._update(),map.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(map){map.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(layer,name){return this._addLayer(layer,name),this._update(),this},addOverlay:function(layer,name){return this._addLayer(layer,name,!0),this._update(),this},removeLayer:function(layer){var id=L.stamp(layer);return delete this._layers[id],this._update(),this},_initLayout:function(){var className="leaflet-control-layers",container=this._container=L.DomUtil.create("div",className);container.setAttribute("aria-haspopup",!0),L.Browser.touch?L.DomEvent.on(container,"click",L.DomEvent.stopPropagation):L.DomEvent.disableClickPropagation(container).disableScrollPropagation(container);var form=this._form=L.DomUtil.create("form",className+"-list");if(this.options.collapsed){L.Browser.android||L.DomEvent.on(container,"mouseover",this._expand,this).on(container,"mouseout",this._collapse,this);var link=this._layersLink=L.DomUtil.create("a",className+"-toggle",container);link.href="#",link.title="Layers",L.Browser.touch?L.DomEvent.on(link,"click",L.DomEvent.stop).on(link,"click",this._expand,this):L.DomEvent.on(link,"focus",this._expand,this),L.DomEvent.on(form,"click",function(){setTimeout(L.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=L.DomUtil.create("div",className+"-base",form),this._separator=L.DomUtil.create("div",className+"-separator",form),this._overlaysList=L.DomUtil.create("div",className+"-overlays",form),container.appendChild(form)},_addLayer:function(layer,name,overlay){var id=L.stamp(layer);this._layers[id]={layer:layer,name:name,overlay:overlay},this.options.autoZIndex&&layer.setZIndex&&(this._lastZIndex++,layer.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var i,obj,baseLayersPresent=!1,overlaysPresent=!1;for(i in this._layers)obj=this._layers[i],this._addItem(obj),overlaysPresent=overlaysPresent||obj.overlay,baseLayersPresent=baseLayersPresent||!obj.overlay;this._separator.style.display=overlaysPresent&&baseLayersPresent?"":"none"}},_onLayerChange:function(e){var obj=this._layers[L.stamp(e.layer)];if(obj){this._handlingClick||this._update();var type=obj.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;type&&this._map.fire(type,obj)}},_createRadioElement:function(name,checked){var radioHtml='<input type="radio" class="leaflet-control-layers-selector" name="'+name+'"';checked&&(radioHtml+=' checked="checked"'),radioHtml+="/>";var radioFragment=document.createElement("div");return radioFragment.innerHTML=radioHtml,radioFragment.firstChild},_addItem:function(obj){var input,label=document.createElement("label"),checked=this._map.hasLayer(obj.layer);obj.overlay?(input=document.createElement("input"),input.type="checkbox",input.className="leaflet-control-layers-selector",input.defaultChecked=checked):input=this._createRadioElement("leaflet-base-layers",checked),input.layerId=L.stamp(obj.layer),L.DomEvent.on(input,"click",this._onInputClick,this);var name=document.createElement("span");name.innerHTML=" "+obj.name,label.appendChild(input),label.appendChild(name);var container=obj.overlay?this._overlaysList:this._baseLayersList;return container.appendChild(label),label},_onInputClick:function(){var i,input,obj,inputs=this._form.getElementsByTagName("input"),inputsLen=inputs.length;for(this._handlingClick=!0,i=0;inputsLen>i;i++)input=inputs[i],obj=this._layers[input.layerId],input.checked&&!this._map.hasLayer(obj.layer)?this._map.addLayer(obj.layer):!input.checked&&this._map.hasLayer(obj.layer)&&this._map.removeLayer(obj.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),L.control.layers=function(baseLayers,overlays,options){return new L.Control.Layers(baseLayers,overlays,options)},L.PosAnimation=L.Class.extend({includes:L.Mixin.Events,run:function(el,newPos,duration,easeLinearity){this.stop(),this._el=el,this._inProgress=!0,this._newPos=newPos,this.fire("start"),el.style[L.DomUtil.TRANSITION]="all "+(duration||.25)+"s cubic-bezier(0,0,"+(easeLinearity||.5)+",1)",L.DomEvent.on(el,L.DomUtil.TRANSITION_END,this._onTransitionEnd,this),L.DomUtil.setPosition(el,newPos),L.Util.falseFn(el.offsetWidth),this._stepTimer=setInterval(L.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(L.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),L.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var stepPos=this._getPos();return stepPos?(this._el._leaflet_pos=stepPos,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var left,top,matches,el=this._el,style=window.getComputedStyle(el);if(L.Browser.any3d){if(matches=style[L.DomUtil.TRANSFORM].match(this._transformRe),!matches)return;left=parseFloat(matches[1]),top=parseFloat(matches[2])}else left=parseFloat(style.left),top=parseFloat(style.top);return new L.Point(left,top,!0)},_onTransitionEnd:function(){L.DomEvent.off(this._el,L.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[L.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),L.Map.include({setView:function(center,zoom,options){if(zoom=zoom===undefined?this._zoom:this._limitZoom(zoom),center=this._limitCenter(L.latLng(center),zoom,this.options.maxBounds),options=options||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!options.reset&&options!==!0){options.animate!==undefined&&(options.zoom=L.extend({animate:options.animate},options.zoom),options.pan=L.extend({animate:options.animate},options.pan));var animated=this._zoom!==zoom?this._tryAnimatedZoom&&this._tryAnimatedZoom(center,zoom,options.zoom):this._tryAnimatedPan(center,options.pan);if(animated)return clearTimeout(this._sizeTimer),this}return this._resetView(center,zoom),this},panBy:function(offset,options){if(offset=L.point(offset).round(),options=options||{},!offset.x&&!offset.y)return this;if(this._panAnim||(this._panAnim=new L.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),options.noMoveStart||this.fire("movestart"),options.animate!==!1){L.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var newPos=this._getMapPanePos().subtract(offset);this._panAnim.run(this._mapPane,newPos,options.duration||.25,options.easeLinearity)}else this._rawPanBy(offset),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(center,options){var offset=this._getCenterOffset(center)._floor();return(options&&options.animate)===!0||this.getSize().contains(offset)?(this.panBy(offset,options),!0):!1}}),L.PosAnimation=L.DomUtil.TRANSITION?L.PosAnimation:L.PosAnimation.extend({run:function(el,newPos,duration,easeLinearity){this.stop(),this._el=el,this._inProgress=!0,this._duration=duration||.25,this._easeOutPower=1/Math.max(easeLinearity||.5,.2),this._startPos=L.DomUtil.getPosition(el),this._offset=newPos.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var elapsed=+new Date-this._startTime,duration=1e3*this._duration;duration>elapsed?this._runFrame(this._easeOut(elapsed/duration)):(this._runFrame(1),this._complete())},_runFrame:function(progress){var pos=this._startPos.add(this._offset.multiplyBy(progress));L.DomUtil.setPosition(this._el,pos),this.fire("step")},_complete:function(){L.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),L.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),L.DomUtil.TRANSITION&&L.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.android23&&!L.Browser.mobileOpera,this._zoomAnimated&&L.DomEvent.on(this._mapPane,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),L.Map.include(L.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(center,zoom,options){if(this._animatingZoom)return!0;if(options=options||{},!this._zoomAnimated||options.animate===!1||this._nothingToAnimate()||Math.abs(zoom-this._zoom)>this.options.zoomAnimationThreshold)return!1;var scale=this.getZoomScale(zoom),offset=this._getCenterOffset(center)._divideBy(1-1/scale),origin=this._getCenterLayerPoint()._add(offset);return options.animate===!0||this.getSize().contains(offset)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(center,zoom,origin,scale,null,!0),!0):!1},_animateZoom:function(center,zoom,origin,scale,delta,backwards,forTouchZoom){forTouchZoom||(this._animatingZoom=!0),L.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=center,this._animateToZoom=zoom,L.Draggable&&(L.Draggable._disabled=!0),L.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:center,zoom:zoom,origin:origin,scale:scale,delta:delta,backwards:backwards})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,L.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),L.Draggable&&(L.Draggable._disabled=!1)}}:{}),L.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var bg=this._bgBuffer,transform=L.DomUtil.TRANSFORM,initialTransform=e.delta?L.DomUtil.getTranslateString(e.delta):bg.style[transform],scaleStr=L.DomUtil.getScaleString(e.scale,e.origin);bg.style[transform]=e.backwards?scaleStr+" "+initialTransform:initialTransform+" "+scaleStr},_endZoomAnim:function(){var front=this._tileContainer,bg=this._bgBuffer;front.style.visibility="",front.parentNode.appendChild(front),L.Util.falseFn(bg.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var map=this._map;!map||map._animatingZoom||map.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[L.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var front=this._tileContainer,bg=this._bgBuffer,bgLoaded=this._getLoadedTilesPercentage(bg),frontLoaded=this._getLoadedTilesPercentage(front);return bg&&bgLoaded>.5&&.5>frontLoaded?(front.style.visibility="hidden",void this._stopLoadingImages(front)):(bg.style.visibility="hidden",bg.style[L.DomUtil.TRANSFORM]="",this._tileContainer=bg,bg=this._bgBuffer=front,this._stopLoadingImages(bg),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(container){var i,len,tiles=container.getElementsByTagName("img"),count=0;for(i=0,len=tiles.length;len>i;i++)tiles[i].complete&&count++;return count/len},_stopLoadingImages:function(container){var i,len,tile,tiles=Array.prototype.slice.call(container.getElementsByTagName("img"));for(i=0,len=tiles.length;len>i;i++)tile=tiles[i],tile.complete||(tile.onload=L.Util.falseFn,tile.onerror=L.Util.falseFn,tile.src=L.Util.emptyImageUrl,tile.parentNode.removeChild(tile))}}),L.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(options){if(options=this._locateOptions=L.extend(this._defaultLocateOptions,options),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var onResponse=L.bind(this._handleGeolocationResponse,this),onError=L.bind(this._handleGeolocationError,this);return options.watch?this._locationWatchId=navigator.geolocation.watchPosition(onResponse,onError,options):navigator.geolocation.getCurrentPosition(onResponse,onError,options),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(error){var c=error.code,message=error.message||(1===c?"permission denied":2===c?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+message+"."})},_handleGeolocationResponse:function(pos){var lat=pos.coords.latitude,lng=pos.coords.longitude,latlng=new L.LatLng(lat,lng),latAccuracy=180*pos.coords.accuracy/40075017,lngAccuracy=latAccuracy/Math.cos(L.LatLng.DEG_TO_RAD*lat),bounds=L.latLngBounds([lat-latAccuracy,lng-lngAccuracy],[lat+latAccuracy,lng+lngAccuracy]),options=this._locateOptions;if(options.setView){var zoom=Math.min(this.getBoundsZoom(bounds),options.maxZoom);this.setView(latlng,zoom)}var data={latlng:latlng,bounds:bounds,timestamp:pos.timestamp};for(var i in pos.coords)"number"==typeof pos.coords[i]&&(data[i]=pos.coords[i]);this.fire("locationfound",data)}})}(window,document),!function(){"use strict";angular.module("leaflet-directive",[]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletEvents",function(a,b,c,d,e){var f;return{restrict:"EA",replace:!0,scope:{center:"=center",defaults:"=defaults",maxbounds:"=maxbounds",bounds:"=bounds",markers:"=markers",legend:"=legend",geojson:"=geojson",paths:"=paths",tiles:"=tiles",layers:"=layers",controls:"=controls",eventBroadcast:"=eventBroadcast"},template:'<div class="angular-leaflet-map"></div>',controller:["$scope",function(b){f=a.defer(),this.getMap=function(){return f.promise},this.getLeafletScope=function(){return b}}],link:function(a,g,h){var i=d.isDefined,j=c.setDefaults(a.defaults,h.id),k=e.genDispatchMapEvent,l=e.getAvailableMapEvents();i(h.width)&&(isNaN(h.width)?g.css("width",h.width):g.css("width",h.width+"px")),i(h.height)&&(isNaN(h.height)?g.css("height",h.height):g.css("height",h.height+"px"));var m=new L.Map(g[0],c.getMapCreationDefaults(h.id));if(f.resolve(m),i(h.center)||m.setView([j.center.lat,j.center.lng],j.center.zoom),!i(h.tiles)&&!i(h.layers)){var n=L.tileLayer(j.tileLayer,j.tileLayerOptions);n.addTo(m),b.setTiles(n,h.id)}if(i(m.zoomControl)&&i(j.zoomControlPosition)&&m.zoomControl.setPosition(j.zoomControlPosition),i(m.zoomControl)&&j.zoomControl===!1&&m.zoomControl.removeFrom(m),i(m.zoomsliderControl)&&i(j.zoomsliderControl)&&j.zoomsliderControl===!1&&m.zoomsliderControl.removeFrom(m),!i(h.eventBroadcast))for(var o="broadcast",p=0;p<l.length;p++){var q=l[p];m.on(q,k(a,q,o),{eventName:q})}m.whenReady(function(){b.setMap(m,h.id)}),a.$on("$destroy",function(){b.unresolveMap(h.id)})}}}]),angular.module("leaflet-directive").directive("center",["$log","$q","$location","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletEvents",function(a,b,c,d,e,f,g){var h,i=e.isDefined,j=e.isNumber,k=e.isSameCenterOnMap,l=e.safeApply,m=e.isValidCenter,n=e.isEmpty,o=e.isUndefinedOrEmpty,p=function(a,b){return i(a)&&!n(a)&&o(b)};return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){h=b.defer(),this.getCenter=function(){return h.promise}},link:function(b,e,n,o){var q=o.getLeafletScope(),r=q.center;o.getMap().then(function(b){var e=d.getDefaults(n.id);if(-1!==n.center.search("-"))return a.error('The "center" variable can\'t use a "-" on his key name: "'+n.center+'".'),void b.setView([e.center.lat,e.center.lng],e.center.zoom);if(p(q.bounds,r))b.fitBounds(f.createLeafletBounds(q.bounds)),r=b.getCenter(),l(q,function(a){a.center={lat:b.getCenter().lat,lng:b.getCenter().lng,zoom:b.getZoom(),autoDiscover:!1}}),l(q,function(a){var c=b.getBounds(),d={northEast:{lat:c._northEast.lat,lng:c._northEast.lng},southWest:{lat:c._southWest.lat,lng:c._southWest.lng}};a.bounds=d});else{if(!i(r))return a.error('The "center" property is not defined in the main scope'),void b.setView([e.center.lat,e.center.lng],e.center.zoom);i(r.lat)&&i(r.lng)||i(r.autoDiscover)||angular.copy(e.center,r)}var o,s;if("yes"===n.urlHashCenter){var t=function(){var a,b=c.search();if(i(b.c)){var d=b.c.split(":");3===d.length&&(a={lat:parseFloat(d[0]),lng:parseFloat(d[1]),zoom:parseInt(d[2],10)})}return a};o=t(),q.$on("$locationChangeSuccess",function(a){var c=a.currentScope,d=t();i(d)&&!k(d,b)&&(c.center={lat:d.lat,lng:d.lng,zoom:d.zoom})})}q.$watch("center",function(c){return i(o)&&(angular.copy(o,c),o=void 0),m(c)||c.autoDiscover===!0?c.autoDiscover===!0?(j(c.zoom)||b.setView([e.center.lat,e.center.lng],e.center.zoom),void b.locate(j(c.zoom)&&c.zoom>e.center.zoom?{setView:!0,maxZoom:c.zoom}:i(e.maxZoom)?{setView:!0,maxZoom:e.maxZoom}:{setView:!0})):void(s&&k(c,b)||(b.setView([c.lat,c.lng],c.zoom),g.notifyCenterChangedToBounds(q,b))):void a.warn("[AngularJS - Leaflet] invalid 'center'")
},!0),b.whenReady(function(){s=!0}),b.on("moveend",function(){h.resolve(),g.notifyCenterUrlHashChanged(q,b,n,c.search()),k(r,b)||l(q,function(a){a.center={lat:b.getCenter().lat,lng:b.getCenter().lng,zoom:b.getZoom(),autoDiscover:!1},g.notifyCenterChangedToBounds(q,b)})}),r.autoDiscover===!0&&b.on("locationerror",function(){a.warn("[AngularJS - Leaflet] The Geolocation API is unauthorized on this page."),m(r)?(b.setView([r.lat,r.lng],r.zoom),g.notifyCenterChangedToBounds(q,b)):(b.setView([e.center.lat,e.center.lng],e.center.zoom),g.notifyCenterChangedToBounds(q,b))})})}}}]),angular.module("leaflet-directive").directive("tiles",["$log","leafletData","leafletMapDefaults","leafletHelpers",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,f,g,h){var i=d.isDefined,j=h.getLeafletScope(),k=j.tiles;return i(k)||i(k.url)?void h.getMap().then(function(a){var d,e=c.getDefaults(g.id);j.$watch("tiles",function(c){var f=e.tileLayerOptions,h=e.tileLayer;return!i(c.url)&&i(d)?void a.removeLayer(d):i(d)?i(c.url)&&i(c.options)&&!angular.equals(c.options,f)?(a.removeLayer(d),f=e.tileLayerOptions,angular.copy(c.options,f),h=c.url,d=L.tileLayer(h,f),d.addTo(a),void b.setTiles(d,g.id)):void(i(c.url)&&d.setUrl(c.url)):(i(c.options)&&angular.copy(c.options,f),i(c.url)&&(h=c.url),d=L.tileLayer(h,f),d.addTo(a),void b.setTiles(d,g.id))},!0)}):void a.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.")}}}]),angular.module("leaflet-directive").directive("legend",["$log","$http","leafletHelpers","leafletLegendHelpers",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,f,g,h){var i,j=c.isArray,k=c.isDefined,l=c.isFunction,m=h.getLeafletScope(),n=m.legend,o=n.legendClass?n.legendClass:"legend",p=n.position||"bottomright";h.getMap().then(function(c){k(n.url)||j(n.colors)&&j(n.labels)&&n.colors.length===n.labels.length?k(n.url)?a.info("[AngularJS - Leaflet] loading arcgis legend service."):(i=L.control({position:p}),i.onAdd=d.getOnAddArrayLegend(n,o),i.addTo(c)):a.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set."),m.$watch("legend.url",function(e){k(e)&&b.get(e).success(function(a){k(i)?d.updateArcGISLegend(i.getContainer(),a):(i=L.control({position:p}),i.onAdd=d.getOnAddArcGISLegend(a,o),i.addTo(c)),k(n.loadedData)&&l(n.loadedData)&&n.loadedData()}).error(function(){a.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]),angular.module("leaflet-directive").directive("geojson",["$log","$rootScope","leafletData","leafletHelpers",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(a,e,f,g){var h=d.safeApply,i=d.isDefined,j=g.getLeafletScope(),k={};g.getMap().then(function(a){j.$watch("geojson",function(e){if(i(k)&&a.hasLayer(k)&&a.removeLayer(k),i(e)&&i(e.data)){var f=e.resetStyleOnMouseout,g=e.onEachFeature;g||(g=function(a,c){d.LabelPlugin.isLoaded()&&i(e.label)&&c.bindLabel(a.properties.description),c.on({mouseover:function(c){h(j,function(){e.selected=a,b.$broadcast("leafletDirectiveMap.geojsonMouseover",c)})},mouseout:function(a){f&&k.resetStyle(a.target),h(j,function(){e.selected=void 0,b.$broadcast("leafletDirectiveMap.geojsonMouseout",a)})},click:function(c){h(j,function(){e.selected=a,b.$broadcast("leafletDirectiveMap.geojsonClick",e.selected,c)})}})}),e.options={style:e.style,filter:e.filter,onEachFeature:g,pointToLayer:e.pointToLayer},k=L.geoJson(e.data,e.options),c.setGeoJSON(k),k.addTo(a)}})})}}}]),angular.module("leaflet-directive").directive("layers",["$log","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(a,b,c,d,e,f){var g;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){g=b.defer(),this.getLayers=function(){return g.promise}},link:function(b,h,i,j){var k=d.isDefined,l={},m=j.getLeafletScope(),n=m.layers,o=e.createLayer,p=f.updateLayersControl,q=!1;j.getMap().then(function(b){if(!k(n)||!k(n.baselayers)||0===Object.keys(n.baselayers).length)return void a.error("[AngularJS - Leaflet] At least one baselayer has to be defined");g.resolve(l),c.setLayers(l,i.id),l.baselayers={},l.overlays={};var d=i.id,e=!1;for(var f in n.baselayers){var h=o(n.baselayers[f]);k(h)?(l.baselayers[f]=h,n.baselayers[f].top===!0&&(b.addLayer(l.baselayers[f]),e=!0)):delete n.baselayers[f]}!e&&Object.keys(l.baselayers).length>0&&b.addLayer(l.baselayers[Object.keys(n.baselayers)[0]]);for(f in n.overlays){var j=o(n.overlays[f]);k(j)?(l.overlays[f]=j,n.overlays[f].visible===!0&&b.addLayer(l.overlays[f])):delete n.overlays[f]}m.$watch("layers.baselayers",function(c){for(var e in l.baselayers)k(c[e])||(b.hasLayer(l.baselayers[e])&&b.removeLayer(l.baselayers[e]),delete l.baselayers[e]);for(var f in c)if(!k(l.baselayers[f])){var g=o(c[f]);k(g)&&(l.baselayers[f]=g,c[f].top===!0&&b.addLayer(l.baselayers[f]))}if(0===Object.keys(l.baselayers).length)return void a.error("[AngularJS - Leaflet] At least one baselayer has to be defined");var h=!1;for(var i in l.baselayers)if(b.hasLayer(l.baselayers[i])){h=!0;break}h||b.addLayer(l.baselayers[Object.keys(n.baselayers)[0]]),q=p(b,d,q,c,n.overlays,l)},!0),m.$watch("layers.overlays",function(a){for(var c in l.overlays)k(a[c])||(b.hasLayer(l.overlays[c])&&b.removeLayer(l.overlays[c]),delete l.overlays[c]);for(var e in a){if(!k(l.overlays[e])){var f=o(a[e]);k(f)&&(l.overlays[e]=f,a[e].visible===!0&&b.addLayer(l.overlays[e]))}a[e].visible&&!b.hasLayer(l.overlays[e])?b.addLayer(l.overlays[e]):a[e].visible===!1&&b.hasLayer(l.overlays[e])&&b.removeLayer(l.overlays[e])}q=p(b,d,q,n.baselayers,a,l)},!0)})}}}]),angular.module("leaflet-directive").directive("bounds",["$log","$timeout","leafletHelpers","leafletBoundsHelpers",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","center"],link:function(b,e,f,g){var h=c.isDefined,i=d.createLeafletBounds,j=g[0].getLeafletScope(),k=g[0],l=function(a){return 0===a._southWest.lat&&0===a._southWest.lng&&0===a._northEast.lat&&0===a._northEast.lng?!0:!1};k.getMap().then(function(b){j.$on("boundsChanged",function(a){var c=a.currentScope,d=b.getBounds();if(!l(d)){var e={northEast:{lat:d._northEast.lat,lng:d._northEast.lng},southWest:{lat:d._southWest.lat,lng:d._southWest.lng}};angular.equals(c.bounds,e)||(c.bounds=e)}}),j.$watch("bounds",function(c){if(!h(c))return void a.error("[AngularJS - Leaflet] Invalid bounds");var d=i(c);d&&!b.getBounds().equals(d)&&b.fitBounds(d)},!0)})}}}]),angular.module("leaflet-directive").directive("markers",["$log","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletEvents",function(a,b,c,d,e,f,g,h){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(b,f,i,j){var k=j[0],l=e,m=e.isDefined,n=e.isString,o=k.getLeafletScope(),p=o.markers,q=g.deleteMarker,r=g.addMarkerWatcher,s=g.listenMarkerEvents,t=g.addMarkerToGroup,u=h.bindMarkerEvents,v=g.createMarker;k.getMap().then(function(b){var e,f={};e=m(j[1])?j[1].getLayers:function(){var a=c.defer();return a.resolve(),a.promise},m(p)&&e().then(function(c){d.setMarkers(f,i.id),o.$watch("markers",function(d){for(var e in f)m(d)&&m(d[e])||(q(f[e],b,c),delete f[e]);for(var g in d)if(-1===g.search("-")){if(!m(f[g])){var h=d[g],j=v(h);if(!m(j)){a.error("[AngularJS - Leaflet] Received invalid data on the marker "+g+".");continue}if(f[g]=j,m(h.message)&&j.bindPopup(h.message,h.popupOptions),m(h.group)&&t(j,h.group,b),l.LabelPlugin.isLoaded()&&m(h.label)&&m(h.label.message)&&j.bindLabel(h.label.message,h.label.options),m(h)&&m(h.layer)){if(!n(h.layer)){a.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!m(c)){a.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!m(c.overlays)||!m(c.overlays[h.layer])){a.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group"');continue}var k=c.overlays[h.layer];if(!(k instanceof L.LayerGroup)){a.error('[AngularJS - Leaflet] Adding a marker to an overlay needs a overlay of the type "group"');continue}k.addLayer(j),b.hasLayer(j)&&h.focus===!0&&j.openPopup()}else m(h.group)||(b.addLayer(j),h.focus===!0&&j.openPopup(),l.LabelPlugin.isLoaded()&&m(h.label)&&m(h.label.options)&&h.label.options.noHide===!0&&j.showLabel());var p=!m(i.watchMarkers)||"true"===i.watchMarkers;p&&(r(j,g,o,c,b),s(j,h,o)),u(j,g,h,o)}}else a.error('The marker can\'t use a "-" on his key name: "'+g+'".')},!0)})})}}}]),angular.module("leaflet-directive").directive("paths",["$log","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletEvents",function(a,b,c,d,e,f){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(g,h,i,j){var k=d.isDefined,l=j.getLeafletScope(),m=l.paths,n=e.createPath,o=f.bindPathEvents,p=e.setPathOptions;j.getMap().then(function(e){var f=c.getDefaults(i.id);if(k(m)){var g={};b.setPaths(g,i.id);var h=function(a,b){var c=l.$watch("paths."+b,function(b){return k(b)?void p(a,b.type,b):(e.removeLayer(a),void c())},!0)};l.$watch("paths",function(b){for(var c in b)if(-1===c.search("-")){if(!k(g[c])){var i=b[c],j=n(c,b[c],f);k(j)&&k(i.message)&&j.bindPopup(i.message),d.LabelPlugin.isLoaded()&&k(i.label)&&k(i.label.message)&&j.bindLabel(i.label.message,i.label.options),k(j)&&(g[c]=j,e.addLayer(j),h(j,c)),o(j,c,i,l)}}else a.error('[AngularJS - Leaflet] The path name "'+c+'" is not valid. It must not include "-" and a number.');for(var m in g)k(b[m])||delete g[m]},!0)}})}}}]),angular.module("leaflet-directive").directive("controls",["$log","leafletHelpers",function(a,b){return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(a,c,d,e){if(e){var f=b.isDefined,g=e.getLeafletScope(),h=g.controls;e.getMap().then(function(a){if(f(L.Control.Draw)&&f(h.draw)){var b=new L.FeatureGroup;a.addLayer(b);var c={edit:{featureGroup:b}};angular.extend(c,h.draw.options);var d=new L.Control.Draw(c);a.addControl(d)}if(f(h.custom))for(var e in h.custom)a.addControl(h.custom[e])})}}}}]),angular.module("leaflet-directive").directive("eventBroadcast",["$log","$rootScope","leafletHelpers","leafletEvents",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(b,e,f,g){var h=c.isObject,i=g.getLeafletScope(),j=i.eventBroadcast,k=d.getAvailableMapEvents(),l=d.genDispatchMapEvent;g.getMap().then(function(b){var c,d,e=[],f="broadcast";if(h(j)){if(void 0===j.map||null===j.map)e=k;else if("object"!=typeof j.map)a.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model.");else{void 0!==j.map.logic&&null!==j.map.logic&&("emit"!==j.map.logic&&"broadcast"!==j.map.logic?a.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===j.map.logic&&(f="emit"));var g=!1,m=!1;if(void 0!==j.map.enable&&null!==j.map.enable&&"object"==typeof j.map.enable&&(g=!0),void 0!==j.map.disable&&null!==j.map.disable&&"object"==typeof j.map.disable&&(m=!0),g&&m)a.warn("[AngularJS - Leaflet] can not enable and disable events at the time");else if(g||m)if(g)for(c=0;c<j.map.enable.length;c++)d=j.map.enable[c],-1!==e.indexOf(d)?a.warn("[AngularJS - Leaflet] This event "+d+" is already enabled"):-1===k.indexOf(d)?a.warn("[AngularJS - Leaflet] This event "+d+" does not exist"):e.push(d);else for(e=k,c=0;c<j.map.disable.length;c++){d=j.map.disable[c];var n=e.indexOf(d);-1===n?a.warn("[AngularJS - Leaflet] This event "+d+" does not exist or has been already disabled"):e.splice(n,1)}else a.warn("[AngularJS - Leaflet] must enable or disable events")}for(c=0;c<e.length;c++)d=e[c],b.on(d,l(i,d,f),{eventName:d})}else a.warn("[AngularJS - Leaflet] event-broadcast must be an object, check your model.")})}}}]),angular.module("leaflet-directive").directive("maxbounds",["$log","leafletMapDefaults","leafletBoundsHelpers",function(a,b,c){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(a,b,d,e){var f=e.getLeafletScope(),g=c.isValidBounds;e.getMap().then(function(a){f.$watch("maxbounds",function(b){if(!g(b))return void a.setMaxBounds();var c=[[b.southWest.lat,b.southWest.lng],[b.northEast.lat,b.northEast.lng]];a.setMaxBounds(c),a.fitBounds(c)})})}}}]),angular.module("leaflet-directive").service("leafletData",["$log","$q","leafletHelpers",function(a,b,c){var d=c.getDefer,e=c.getUnresolvedDefer,f=c.setResolvedDefer,g={},h={},i={},j={},k={},l={};this.setMap=function(a,b){var c=e(g,b);c.resolve(a),f(g,b)},this.getMap=function(a){var b=d(g,a);return b.promise},this.unresolveMap=function(a){var b=c.obtainEffectiveMapId(g,a);g[b]=void 0},this.getPaths=function(a){var b=d(j,a);return b.promise},this.setPaths=function(a,b){var c=e(j,b);c.resolve(a),f(j,b)},this.getMarkers=function(a){var b=d(k,a);return b.promise},this.setMarkers=function(a,b){var c=e(k,b);c.resolve(a),f(k,b)},this.getLayers=function(a){var b=d(i,a);return b.promise},this.setLayers=function(a,b){var c=e(i,b);c.resolve(a),f(i,b)},this.setTiles=function(a,b){var c=e(h,b);c.resolve(a),f(h,b)},this.getTiles=function(a){var b=d(h,a);return b.promise},this.setGeoJSON=function(a,b){var c=e(l,b);c.resolve(a),f(l,b)},this.getGeoJSON=function(a){var b=d(l,a);return b.promise}}]),angular.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(a,b){function c(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},crs:L.CRS.EPSG3857,tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var d=b.isDefined,e=b.obtainEffectiveMapId,f={};return{getDefaults:function(a){var b=e(f,a);return f[b]},getMapCreationDefaults:function(a){var b=e(f,a),c=f[b],g={maxZoom:c.maxZoom,keyboard:c.keyboard,dragging:c.dragging,zoomControl:c.zoomControl,doubleClickZoom:c.doubleClickZoom,scrollWheelZoom:c.scrollWheelZoom,attributionControl:c.attributionControl,worldCopyJump:c.worldCopyJump,crs:c.crs};return d(c.minZoom)&&(g.minZoom=c.minZoom),d(c.zoomAnimation)&&(g.zoomAnimation=c.zoomAnimation),d(c.fadeAnimation)&&(g.fadeAnimation=c.fadeAnimation),d(c.markerZoomAnimation)&&(g.markerZoomAnimation=c.markerZoomAnimation),g},setDefaults:function(a,b){var g=c();d(a)&&(g.doubleClickZoom=d(a.doubleClickZoom)?a.doubleClickZoom:g.doubleClickZoom,g.scrollWheelZoom=d(a.scrollWheelZoom)?a.scrollWheelZoom:g.doubleClickZoom,g.zoomControl=d(a.zoomControl)?a.zoomControl:g.zoomControl,g.zoomsliderControl=d(a.zoomsliderControl)?a.zoomsliderControl:g.zoomsliderControl,g.attributionControl=d(a.attributionControl)?a.attributionControl:g.attributionControl,g.tileLayer=d(a.tileLayer)?a.tileLayer:g.tileLayer,g.zoomControlPosition=d(a.zoomControlPosition)?a.zoomControlPosition:g.zoomControlPosition,g.keyboard=d(a.keyboard)?a.keyboard:g.keyboard,g.dragging=d(a.dragging)?a.dragging:g.dragging,d(a.controls)&&angular.extend(g.controls,a.controls),d(a.crs)&&d(L.CRS[a.crs])&&(g.crs=L.CRS[a.crs]),d(a.tileLayerOptions)&&angular.copy(a.tileLayerOptions,g.tileLayerOptions),d(a.maxZoom)&&(g.maxZoom=a.maxZoom),d(a.minZoom)&&(g.minZoom=a.minZoom),d(a.zoomAnimation)&&(g.zoomAnimation=a.zoomAnimation),d(a.fadeAnimation)&&(g.fadeAnimation=a.fadeAnimation),d(a.markerZoomAnimation)&&(g.markerZoomAnimation=a.markerZoomAnimation),d(a.worldCopyJump)&&(g.worldCopyJump=a.worldCopyJump));var h=e(f,b);return f[h]=g,g}}}]),angular.module("leaflet-directive").factory("leafletEvents",["$rootScope","$q","$log","leafletHelpers",function(a,b,c,d){var e=d.safeApply,f=d.isDefined,g=d.isObject,h=d,i=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},j=function(a,b,c,d){for(var e=i(),f="markers."+d,g=0;g<e.length;g++){var h=e[g];c.label.on(h,m(a,h,b,c.label,f))}},k=function(b,c,d,f,g,h){return function(i){var j="leafletDirectiveMarker."+b;"click"===b?e(d,function(){a.$broadcast("leafletDirectiveMarkersClick",g)}):"dragend"===b&&(e(d,function(){h.lat=f.getLatLng().lat,h.lng=f.getLatLng().lng}),h.message&&h.focus===!0&&f.openPopup()),e(d,function(b){"emit"===c?b.$emit(j,{markerName:g,leafletEvent:i}):a.$broadcast(j,{markerName:g,leafletEvent:i})})}},l=function(b,c,d,f,g){return function(f){var h="leafletDirectivePath."+b;e(d,function(b){"emit"===c?b.$emit(h,{pathName:g,leafletEvent:f}):a.$broadcast(h,{pathName:g,leafletEvent:f})})}},m=function(b,c,d,f,g){return function(h){var i="leafletDirectiveLabel."+c,j=g.replace("markers.","");e(b,function(b){"emit"===d?b.$emit(i,{leafletEvent:h,label:f,markerName:j}):"broadcast"===d&&a.$broadcast(i,{leafletEvent:h,label:f,markerName:j})})}},n=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose"]},o=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailableMapEvents:function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},genDispatchMapEvent:function(b,c,d){return function(f){var g="leafletDirectiveMap."+c;e(b,function(b){"emit"===d?b.$emit(g,{leafletEvent:f}):"broadcast"===d&&a.$broadcast(g,{leafletEvent:f})})}},getAvailableMarkerEvents:n,getAvailablePathEvents:o,notifyCenterChangedToBounds:function(a){a.$broadcast("boundsChanged")},notifyCenterUrlHashChanged:function(a,b,c,d){if(f(c.urlHashCenter)){var e=b.getCenter(),g=e.lat.toFixed(4)+":"+e.lng.toFixed(4)+":"+b.getZoom();f(d.c)&&d.c===g||a.$emit("centerUrlHash",g)}},bindMarkerEvents:function(a,b,d,e){var i,l,m=[],o="broadcast";if(f(e.eventBroadcast))if(g(e.eventBroadcast))if(f(e.eventBroadcast.marker))if(g(e.eventBroadcast.marker)){void 0!==e.eventBroadcast.marker.logic&&null!==e.eventBroadcast.marker.logic&&("emit"!==e.eventBroadcast.marker.logic&&"broadcast"!==e.eventBroadcast.marker.logic?c.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===e.eventBroadcast.marker.logic&&(o="emit"));var p=!1,q=!1;if(void 0!==e.eventBroadcast.marker.enable&&null!==e.eventBroadcast.marker.enable&&"object"==typeof e.eventBroadcast.marker.enable&&(p=!0),void 0!==e.eventBroadcast.marker.disable&&null!==e.eventBroadcast.marker.disable&&"object"==typeof e.eventBroadcast.marker.disable&&(q=!0),p&&q)c.warn("[AngularJS - Leaflet] can not enable and disable events at the same time");else if(p||q)if(p)for(i=0;i<e.eventBroadcast.marker.enable.length;i++)l=e.eventBroadcast.marker.enable[i],-1!==m.indexOf(l)?c.warn("[AngularJS - Leaflet] This event "+l+" is already enabled"):-1===n().indexOf(l)?c.warn("[AngularJS - Leaflet] This event "+l+" does not exist"):m.push(l);else for(m=n(),i=0;i<e.eventBroadcast.marker.disable.length;i++){l=e.eventBroadcast.marker.disable[i];var r=m.indexOf(l);-1===r?c.warn("[AngularJS - Leaflet] This event "+l+" does not exist or has been already disabled"):m.splice(r,1)}else c.warn("[AngularJS - Leaflet] must enable or disable events")}else c.warn("[AngularJS - Leaflet] event-broadcast.marker must be an object check your model.");else m=n();else c.error("[AngularJS - Leaflet] event-broadcast must be an object check your model.");else m=n();for(i=0;i<m.length;i++)l=m[i],a.on(l,k(l,o,e,a,b,d));h.LabelPlugin.isLoaded()&&f(a.label)&&j(e,o,a,b)},bindPathEvents:function(a,b,d,e){var i,k,m=[],n="broadcast";if(window.lls=e,f(e.eventBroadcast))if(g(e.eventBroadcast))if(f(e.eventBroadcast.path))if(g(e.eventBroadcast.paths))c.warn("[AngularJS - Leaflet] event-broadcast.path must be an object check your model.");else{void 0!==e.eventBroadcast.path.logic&&null!==e.eventBroadcast.path.logic&&("emit"!==e.eventBroadcast.path.logic&&"broadcast"!==e.eventBroadcast.path.logic?c.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===e.eventBroadcast.path.logic&&(n="emit"));var p=!1,q=!1;if(void 0!==e.eventBroadcast.path.enable&&null!==e.eventBroadcast.path.enable&&"object"==typeof e.eventBroadcast.path.enable&&(p=!0),void 0!==e.eventBroadcast.path.disable&&null!==e.eventBroadcast.path.disable&&"object"==typeof e.eventBroadcast.path.disable&&(q=!0),p&&q)c.warn("[AngularJS - Leaflet] can not enable and disable events at the same time");else if(p||q)if(p)for(i=0;i<e.eventBroadcast.path.enable.length;i++)k=e.eventBroadcast.path.enable[i],-1!==m.indexOf(k)?c.warn("[AngularJS - Leaflet] This event "+k+" is already enabled"):-1===o().indexOf(k)?c.warn("[AngularJS - Leaflet] This event "+k+" does not exist"):m.push(k);else for(m=o(),i=0;i<e.eventBroadcast.path.disable.length;i++){k=e.eventBroadcast.path.disable[i];var r=m.indexOf(k);-1===r?c.warn("[AngularJS - Leaflet] This event "+k+" does not exist or has been already disabled"):m.splice(r,1)}else c.warn("[AngularJS - Leaflet] must enable or disable events")}else m=o();else c.error("[AngularJS - Leaflet] event-broadcast must be an object check your model.");else m=o();for(i=0;i<m.length;i++)k=m[i],a.on(k,l(k,n,e,m,b));h.LabelPlugin.isLoaded()&&f(a.label)&&j(e,n,a,b)}}}]),angular.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$log","leafletHelpers",function($rootScope,$log,leafletHelpers){function isValidLayerType(a){return isString(a.type)?-1===Object.keys(layerTypes).indexOf(a.type)?($log.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(layerTypes)),!1):layerTypes[a.type].mustHaveUrl&&!isString(a.url)?($log.error("[AngularJS - Leaflet] A base layer must have an url"),!1):layerTypes[a.type].mustHaveData&&!isDefined(a.data)?($log.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):layerTypes[a.type].mustHaveLayer&&!isDefined(a.layer)?($log.error("[AngularJS - Leaflet] The type of layer "+a.type+" must have an layer defined"),!1):layerTypes[a.type].mustHaveBounds&&!isDefined(a.bounds)?($log.error("[AngularJS - Leaflet] The type of layer "+a.type+" must have bounds defined"),!1):!0:!1}var Helpers=leafletHelpers,isString=leafletHelpers.isString,isObject=leafletHelpers.isObject,isDefined=leafletHelpers.isDefined,layerTypes={xyz:{mustHaveUrl:!0,createLayer:function(a){return L.tileLayer(a.url,a.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(a){return Helpers.GeoJSONPlugin.isLoaded()?new L.TileLayer.GeoJSON(a.url,a.pluginOptions,a.options):void 0}},wms:{mustHaveUrl:!0,createLayer:function(a){return L.tileLayer.wms(a.url,a.options)}},wmts:{mustHaveUrl:!0,createLayer:function(a){return L.tileLayer.wmts(a.url,a.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(Helpers.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(){return L.layerGroup()}},google:{mustHaveUrl:!1,createLayer:function(a){var b=a.type||"SATELLITE";return Helpers.GoogleLayerPlugin.isLoaded()?new L.Google(b,a.options):void 0}},china:{mustHaveUrl:!1,createLayer:function(a){var b=a.type||"";return Helpers.ChinaLayerPlugin.isLoaded()?L.tileLayer.chinaProvider(b,a.options):void 0}},ags:{mustHaveUrl:!0,createLayer:function(a){if(Helpers.AGSLayerPlugin.isLoaded()){var b=angular.copy(a.options);angular.extend(b,{url:a.url});var c=new lvector.AGS(b);return c.onAdd=function(a){this.setMap(a)},c.onRemove=function(){this.setMap(null)},c}}},dynamic:{mustHaveUrl:!0,createLayer:function(a){return Helpers.DynamicMapLayerPlugin.isLoaded()?L.esri.dynamicMapLayer(a.url,a.options):void 0}},markercluster:{mustHaveUrl:!1,createLayer:function(a){return Helpers.MarkerClusterPlugin.isLoaded()?new L.MarkerClusterGroup(a.options):void $log.error("[AngularJS - Leaflet] The markercluster plugin is not loaded.")}},bing:{mustHaveUrl:!1,createLayer:function(a){return Helpers.BingLayerPlugin.isLoaded()?new L.BingLayer(a.key,a.options):void 0}},heatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(a){if(Helpers.HeatMapLayerPlugin.isLoaded()){var b=new L.TileLayer.WebGLHeatMap(a.options);return isDefined(a.data)&&b.setData(a.data),b}}},yandex:{mustHaveUrl:!1,createLayer:function(a){var b=a.type||"map";return Helpers.YandexLayerPlugin.isLoaded()?new L.Yandex(b,a.options):void 0}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(a){return L.imageOverlay(a.url,a.bounds,a.options)}}};return{createLayer:function(a){if(isValidLayerType(a)){if(!isString(a.name))return void $log.error("[AngularJS - Leaflet] A base layer must have a name");isObject(a.layerParams)||(a.layerParams={}),isObject(a.layerOptions)||(a.layerOptions={});for(var b in a.layerParams)a.layerOptions[b]=a.layerParams[b];var c={url:a.url,data:a.data,options:a.layerOptions,layer:a.layer,type:a.layerType,bounds:a.bounds,key:a.key,pluginOptions:a.pluginOptions};return layerTypes[a.type].createLayer(c)}}}}]),angular.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","$log","leafletHelpers","leafletMapDefaults",function(a,b,c,d){var e,f=c.isObject,g=c.isDefined,h=function(a,b){var c=0;return f(a)&&(c+=Object.keys(a).length),f(b)&&(c+=Object.keys(b).length),c>1},i=function(a){var b,c=d.getDefaults(a),e={collapsed:c.controls.layers.collapsed,position:c.controls.layers.position};return b=c.controls.layers&&g(c.controls.layers.control)?c.controls.layers.control.apply(this,[[],[],e]):new L.control.layers([],[],e)};return{layersControlMustBeVisible:h,updateLayersControl:function(a,b,c,d,f,j){var k,l=h(d,f);if(g(e)&&c){for(k in j.baselayers)e.removeLayer(j.baselayers[k]);for(k in j.overlays)e.removeLayer(j.overlays[k]);e.removeFrom(a)}if(l){e=i(b);for(k in d)g(j.baselayers[k])&&e.addBaseLayer(j.baselayers[k],d[k].name);for(k in f)g(j.overlays[k])&&e.addOverlay(j.overlays[k],f[k].name);e.addTo(a)}return l}}}]),angular.module("leaflet-directive").factory("leafletLegendHelpers",function(){var a=function(a,b){if(a.innerHTML="",b.error)a.innerHTML+='<div class="info-title alert alert-danger">'+b.error.message+"</div>";else for(var c=0;c<b.layers.length;c++){var d=b.layers[c];a.innerHTML+='<div class="info-title">'+d.layerName+"</div>";for(var e=0;e<d.legend.length;e++){var f=d.legend[e];a.innerHTML+='<div class="inline"><img src="data:'+f.contentType+";base64,"+f.imageData+'" /></div><div class="info-label">'+f.label+"</div>"}}},b=function(b,c){return function(){var d=L.DomUtil.create("div",c);return L.Browser.touch?L.DomEvent.on(d,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(d),L.DomEvent.on(d,"mousewheel",L.DomEvent.stopPropagation)),a(d,b),d}},c=function(a,b){return function(){for(var c=L.DomUtil.create("div",b),d=0;d<a.colors.length;d++)c.innerHTML+='<div class="outline"><i style="background:'+a.colors[d]+'"></i></div><div class="info-label">'+a.labels[d]+"</div>";return L.Browser.touch?L.DomEvent.on(c,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(c),L.DomEvent.on(c,"mousewheel",L.DomEvent.stopPropagation)),c}};return{getOnAddArcGISLegend:b,getOnAddArrayLegend:c,updateArcGISLegend:a}}),angular.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","$log","leafletHelpers",function(a,b,c){function d(a){return a.filter(function(a){return k(a)}).map(function(a){return new L.LatLng(a.lat,a.lng)})}function e(a){return new L.LatLng(a.lat,a.lng)}function f(a){return a.map(function(a){return d(a)})}function g(a,b){for(var c=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],d={},e=0;e<c.length;e++){var f=c[e];h(a[f])?d[f]=a[f]:h(b.path[f])&&(d[f]=b.path[f])}return d}var h=c.isDefined,i=c.isArray,j=c.isNumber,k=c.isValidPoint,l=function(a,b){h(b.weight)&&a.setStyle({weight:b.weight}),h(b.color)&&a.setStyle({color:b.color}),h(b.opacity)&&a.setStyle({opacity:b.opacity})},m=function(a){if(!i(a))return!1;for(var b in a){var c=a[b];if(!k(c))return!1}return!0},n={polyline:{isValid:function(a){var b=a.latlngs;return m(b)},createPath:function(a){return new L.Polyline([],a)},setPath:function(a,b){a.setLatLngs(d(b.latlngs)),l(a,b)}},multiPolyline:{isValid:function(a){var b=a.latlngs;if(!i(b))return!1;for(var c in b){var d=b[c];if(!m(d))return!1}return!0},createPath:function(a){return new L.multiPolyline([[[0,0],[1,1]]],a)},setPath:function(a,b){a.setLatLngs(f(b.latlngs)),l(a,b)}},polygon:{isValid:function(a){var b=a.latlngs;return m(b)},createPath:function(a){return new L.Polygon([],a)},setPath:function(a,b){a.setLatLngs(d(b.latlngs)),l(a,b)}},multiPolygon:{isValid:function(a){var b=a.latlngs;if(!i(b))return!1;for(var c in b){var d=b[c];if(!m(d))return!1}return!0},createPath:function(a){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],a)},setPath:function(a,b){a.setLatLngs(f(b.latlngs)),l(a,b)}},rectangle:{isValid:function(a){var b=a.latlngs;if(!i(b)||2!==b.length)return!1;for(var c in b){var d=b[c];if(!k(d))return!1}return!0},createPath:function(a){return new L.Rectangle([[0,0],[1,1]],a)},setPath:function(a,b){a.setBounds(new L.LatLngBounds(d(b.latlngs))),l(a,b)}},circle:{isValid:function(a){var b=a.latlngs;return k(b)&&j(a.radius)},createPath:function(a){return new L.Circle([0,0],1,a)},setPath:function(a,b){a.setLatLng(e(b.latlngs)),h(b.radius)&&a.setRadius(b.radius),l(a,b)}},circleMarker:{isValid:function(a){var b=a.latlngs;return k(b)&&j(a.radius)},createPath:function(a){return new L.CircleMarker([0,0],a)},setPath:function(a,b){a.setLatLng(e(b.latlngs)),h(b.radius)&&a.setRadius(b.radius),l(a,b)}}},o=function(a){var b={};return a.latlngs&&(b.latlngs=a.latlngs),a.radius&&(b.radius=a.radius),b};return{setPathOptions:function(a,b,c){h(b)||(b="polyline"),n[b].setPath(a,c)},createPath:function(a,c,d){h(c.type)||(c.type="polyline");var e=g(c,d),f=o(c);return n[c.type].isValid(f)?n[c.type].createPath(e):void b.error("[AngularJS - Leaflet] Invalid data passed to the "+c.type+" path")}}}]),angular.module("leaflet-directive").factory("leafletBoundsHelpers",["$log","leafletHelpers",function(a,b){function c(a){return angular.isDefined(a)&&angular.isDefined(a.southWest)&&angular.isDefined(a.northEast)&&angular.isNumber(a.southWest.lat)&&angular.isNumber(a.southWest.lng)&&angular.isNumber(a.northEast.lat)&&angular.isNumber(a.northEast.lng)}var d=b.isArray,e=b.isNumber;return{createLeafletBounds:function(a){return c(a)?L.latLngBounds([a.southWest.lat,a.southWest.lng],[a.northEast.lat,a.northEast.lng]):void 0},isValidBounds:c,createBoundsFromArray:function(b){return d(b)&&2===b.length&&d(b[0])&&d(b[1])&&2===b[0].length&&2===b[1].length&&e(b[0][0])&&e(b[0][1])&&e(b[1][0])&&e(b[1][1])?{northEast:{lat:b[0][0],lng:b[0][1]},southWest:{lat:b[1][0],lng:b[1][1]}}:void a.error("[AngularJS - Leaflet] The bounds array is not valid.")}}}]),angular.module("leaflet-directive").factory("leafletMarkersHelpers",["$rootScope","leafletHelpers","$log",function(a,b,c){var d=b.isDefined,e=b.MarkerClusterPlugin,f=b.AwesomeMarkersPlugin,g=b.safeApply,h=b,i=b.isString,j=b.isNumber,k=b.isObject,l={},m=function(a){if(d(a)&&d(a.type)&&"awesomeMarker"===a.type)return f.isLoaded()||c.error("[AngularJS - Leaflet] The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(a);if(d(a)&&d(a.type)&&"div"===a.type)return new L.divIcon(a);var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=";
return d(a)?(d(a.iconUrl)||(a.iconUrl=b,a.shadowUrl=e),new L.Icon.Default(a)):new L.Icon.Default({iconUrl:b,shadowUrl:e})},n=function(a,b,c){if(a.closePopup(),d(c)&&d(c.overlays))for(var e in c.overlays)if(c.overlays[e]instanceof L.LayerGroup&&c.overlays[e].hasLayer(a))return void c.overlays[e].removeLayer(a);if(d(l))for(var f in l)l[f].hasLayer(a)&&l[f].removeLayer(a);b.hasLayer(a)&&b.removeLayer(a)};return{deleteMarker:n,createMarker:function(a){if(!d(a))return void c.error("[AngularJS - Leaflet] The marker definition is not valid.");var b={icon:m(a.icon),title:d(a.title)?a.title:"",draggable:d(a.draggable)?a.draggable:!1,clickable:d(a.clickable)?a.clickable:!0,riseOnHover:d(a.riseOnHover)?a.riseOnHover:!1,zIndexOffset:d(a.zIndexOffset)?a.zIndexOffset:0,iconAngle:d(a.iconAngle)?a.iconAngle:0};return new L.marker(a,b)},addMarkerToGroup:function(a,b,f){return i(b)?e.isLoaded()?(d(l[b])||(l[b]=new L.MarkerClusterGroup,f.addLayer(l[b])),void l[b].addLayer(a)):void c.error("[AngularJS - Leaflet] The MarkerCluster plugin is not loaded."):void c.error("[AngularJS - Leaflet] The marker group you have specified is invalid.")},listenMarkerEvents:function(a,b,c){a.on("popupopen",function(){g(c,function(){b.focus=!0})}),a.on("popupclose",function(){g(c,function(){b.focus=!1})})},addMarkerWatcher:function(a,b,e,f,g){var l=e.$watch("markers."+b,function(b,e){if(!d(b))return n(a,g,f),void l();if(d(e)){if(!j(b.lat)||!j(b.lng))return c.warn("There are problems with lat-lng data, please verify your marker model"),void n(a,g,f);if(i(b.layer)||i(e.layer)&&(d(f.overlays[e.layer])&&f.overlays[e.layer].hasLayer(a)&&(f.overlays[e.layer].removeLayer(a),a.closePopup()),g.hasLayer(a)||g.addLayer(a)),i(b.layer)&&e.layer!==b.layer){if(i(e.layer)&&d(f.overlays[e.layer])&&f.overlays[e.layer].hasLayer(a)&&f.overlays[e.layer].removeLayer(a),a.closePopup(),g.hasLayer(a)&&g.removeLayer(a),!d(f.overlays[b.layer]))return void c.error("[AngularJS - Leaflet] You must use a name of an existing layer");var o=f.overlays[b.layer];if(!(o instanceof L.LayerGroup))return void c.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group"');o.addLayer(a),g.hasLayer(a)&&b.focus===!0&&a.openPopup()}if(b.draggable!==!0&&e.draggable===!0&&d(a.dragging)&&a.dragging.disable(),b.draggable===!0&&e.draggable!==!0&&(a.dragging?a.dragging.enable():L.Handler.MarkerDrag&&(a.dragging=new L.Handler.MarkerDrag(a),a.options.draggable=!0,a.dragging.enable())),k(b.icon)||k(e.icon)&&(a.setIcon(m()),a.closePopup(),a.unbindPopup(),i(b.message)&&a.bindPopup(b.message)),k(b.icon)&&k(e.icon)&&!angular.equals(b.icon,e.icon)){var p=!1;a.dragging&&(p=a.dragging.enabled()),a.setIcon(m(b.icon)),p&&a.dragging.enable(),a.closePopup(),a.unbindPopup(),i(b.message)&&a.bindPopup(b.message)}!i(b.message)&&i(e.message)&&(a.closePopup(),a.unbindPopup()),h.LabelPlugin.isLoaded()&&d(b.label)&&d(b.label.message)&&!angular.equals(b.label.message,e.label.message)&&a.updateLabelContent(b.label.message),i(b.message)&&!i(e.message)&&(a.bindPopup(b.message),b.focus===!0&&a.openPopup()),i(b.message)&&i(e.message)&&b.message!==e.message&&a.setPopupContent(b.message);var q=!1;b.focus!==!0&&e.focus===!0&&(a.closePopup(),q=!0),b.focus===!0&&e.focus!==!0&&(a.openPopup(),q=!0),e.focus===!0&&b.focus===!0&&(a.openPopup(),q=!0);var r=a.getLatLng(),s=i(b.layer)&&h.MarkerClusterPlugin.is(f.overlays[b.layer]);s?q?(b.lat!==e.lat||b.lng!==e.lng)&&(f.overlays[b.layer].removeLayer(a),a.setLatLng([b.lat,b.lng]),f.overlays[b.layer].addLayer(a)):r.lat!==b.lat||r.lng!==b.lng?(f.overlays[b.layer].removeLayer(a),a.setLatLng([b.lat,b.lng]),f.overlays[b.layer].addLayer(a)):(b.lat!==e.lat||b.lng!==e.lng)&&(f.overlays[b.layer].removeLayer(a),a.setLatLng([b.lat,b.lng]),f.overlays[b.layer].addLayer(a)):(r.lat!==b.lat||r.lng!==b.lng)&&a.setLatLng([b.lat,b.lng])}},!0)}}}]),angular.module("leaflet-directive").factory("leafletHelpers",["$q","$log",function(a,b){function c(a,c){var d,e;if(angular.isDefined(c))d=c;else if(1===Object.keys(a).length)for(e in a)a.hasOwnProperty(e)&&(d=e);else 0===Object.keys(a).length?d="main":b.error("[AngularJS - Leaflet] - You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return d}function d(b,d){var e,f=c(b,d);return angular.isDefined(b[f])&&b[f].resolvedDefer!==!0?e=b[f].defer:(e=a.defer(),b[f]={defer:e,resolvedDefer:!1}),e}return{isEmpty:function(a){return 0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return angular.isUndefined(a)||null===a||0===Object.keys(a).length},isDefined:function(a){return angular.isDefined(a)&&null!==a},isNumber:function(a){return angular.isNumber(a)},isString:function(a){return angular.isString(a)},isArray:function(a){return angular.isArray(a)},isObject:function(a){return angular.isObject(a)},isFunction:function(a){return angular.isFunction(a)},equals:function(a,b){return angular.equals(a,b)},isValidCenter:function(a){return angular.isDefined(a)&&angular.isNumber(a.lat)&&angular.isNumber(a.lng)&&angular.isNumber(a.zoom)},isValidPoint:function(a){return angular.isDefined(a)&&angular.isNumber(a.lat)&&angular.isNumber(a.lng)},isSameCenterOnMap:function(a,b){var c=b.getCenter(),d=b.getZoom();return c.lat===a.lat&&c.lng===a.lng&&d===a.zoom?!0:!1},safeApply:function(a,b){var c=a.$root.$$phase;"$apply"===c||"$digest"===c?a.$eval(b):a.$apply(b)},obtainEffectiveMapId:c,getDefer:function(a,b){var e,f=c(a,b);return e=angular.isDefined(a[f])&&a[f].resolvedDefer!==!1?a[f].defer:d(a,b)},getUnresolvedDefer:d,setResolvedDefer:function(a,b){var d=c(a,b);a[d].resolvedDefer=!0},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)?!0:!1},is:function(a){return this.isLoaded()?a instanceof L.AwesomeMarkers.Icon:!1},equal:function(a,b){return this.isLoaded()&&this.is(a)?angular.equals(a,b):!1}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(a){return this.isLoaded()?a instanceof L.MarkerClusterGroup:!1}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(a){return this.isLoaded()?a instanceof L.MarkerClusterGroup:!1}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(a){return this.isLoaded()?a instanceof L.Google:!1}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(a){return this.isLoaded()?a instanceof L.BingLayer:!1}},WFSLayerPlugin:{isLoaded:function(){return void 0!==L.GeoJSON.WFS},is:function(a){return this.isLoaded()?a instanceof L.GeoJSON.WFS:!1}},AGSLayerPlugin:{isLoaded:function(){return void 0!==lvector&&void 0!==lvector.AGS},is:function(a){return this.isLoaded()?a instanceof lvector.AGS:!1}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(a){return this.isLoaded()?a instanceof L.Yandex:!1}},DynamicMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.dynamicMapLayer},is:function(a){return this.isLoaded()?a instanceof L.esri.dynamicMapLayer:!1}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(a){return this.isLoaded()?a instanceof L.TileLayer.GeoJSON:!1}},Leaflet:{DivIcon:{is:function(a){return a instanceof L.DivIcon},equal:function(a,b){return this.is(a)?angular.equals(a,b):!1}},Icon:{is:function(a){return a instanceof L.Icon},equal:function(a,b){return this.is(a)?angular.equals(a,b):!1}}}}}])}();